/*! For license information please see out.js.LICENSE.txt */
https://nettleweb.com/


/*! Copyright (C) 2024 nettleweb.com; All rights reserved. !*/
"use strict";

(()=>{function e(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function t(){return new TransformStream({transform(t,n){!function(t,n){Wt&&t.data instanceof Blob?t.data.arrayBuffer().then(e).then(n):Vt&&(t.data instanceof ArrayBuffer||qt(t.data))?n(e(t.data)):Gt(t,!1,(e=>{Xt||(Xt=new TextEncoder),n(Xt.encode(e))}))}(t,(e=>{const r=e.length;let o;if(r<126)o=new Uint8Array(1),
new DataView(o.buffer).setUint8(0,r);else if(r<65536){o=new Uint8Array(3);const e=new DataView(o.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{o=new Uint8Array(9);const e=new DataView(o.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}t.data&&"string"!=typeof t.data&&(o[0]|=128),n.enqueue(o),n.enqueue(e)}))}})}function n(e){return e.reduce(((e,t)=>e+t.length),0)}function r(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let o=0;o<t;o++)n[o]=e[0][r++],
r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}function i(e,...t){return t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}function a(e,t){t.useNativeTimers?(e.setTimeoutFn=on.bind(rn),e.clearTimeoutFn=an.bind(rn)):(e.setTimeoutFn=rn.setTimeout.bind(rn),e.clearTimeoutFn=rn.clearTimeout.bind(rn))}function s(){
return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function c(){}function l(){for(let e in pn.requests)pn.requests.hasOwnProperty(e)&&pn.requests[e].abort()}function d(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||un))return new XMLHttpRequest}catch(e){}if(!t)try{return new(rn[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}function u(e){if(e.length>8e3)throw"URI too long"
;const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let o=vn.exec(e||""),i={},a=14;for(;a--;)i[wn[a]]=o[a]||"";return-1!=n&&-1!=r&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/")
;return"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}(0,i.path),i.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,i.query),i}function h(e){return Tn&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||Sn&&e instanceof Blob||In&&e instanceof File}function p(e,t){if(!e||"object"!=typeof e)return!1
;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(p(e[t]))return!0;return!1}if(h(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return p(e.toJSON(),!0);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&p(e[t]))return!0;return!1}function f(e){const t=[],n=e.data,r=e;return r.data=m(n,t),r.attachments=t.length,{packet:r,buffers:t}}function m(e,t){if(!e)return e;if(h(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){
const n=Array(e.length);for(let r=0;r<e.length;r++)n[r]=m(e[r],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=m(e[r],t));return n}return e}function g(e,t){return e.data=b(e.data,t),delete e.attachments,e}function b(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw Error("illegal attachments")}
if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=b(e[n],t);else if("object"==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=b(e[n],t));return e}function y(e){return"[object Object]"===Object.prototype.toString.call(e)}function v(e,t,n){return e.on(t,n),function(){e.off(t,n)}}function w(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}function k(e,t){"object"==typeof e&&(t=e,
e=void 0);const n=function(e,t="",n){let r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=u(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host
;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,o=n.id,i=n.path,a=Fn[o]&&i in Fn[o].nsps;let s;return t.forceNew||t["force new connection"]||!1===t.multiplex||a?s=new Rn(r,t):(Fn[o]||(Fn[o]=new Rn(r,t)),s=Fn[o]),n.query&&!t.query&&(t.query=n.queryKey),s.socket(n.path,t)}function C(){try{return"object"==typeof indexedDB}catch(e){return!1}}function E(){return new Promise(((e,t)=>{try{let n=!0
;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}function x(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const o of n){if(!r.includes(o))return!1;const n=e[o],i=t[o];if(A(n)&&A(i)){if(!x(n,i))return!1}else if(n!==i)return!1}
for(const e of r)if(!n.includes(e))return!1;return!0}function A(e){return null!==e&&"object"==typeof e}function T(e,t=1e3,n=2){const r=t*Math.pow(n,e),o=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+o)}function L(e){return e&&e._delegate?e._delegate:e}function S(e){
return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(dr||(dr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(br(this),t),M(ur.get(this))}:function(...t){return M(e.apply(br(this),t))}:function(t,...n){const r=e.call(br(this),t,...n);return pr.set(r,t.sort?t.sort():[t]),M(r)}}function I(e){return"function"==typeof e?S(e):(e instanceof IDBTransaction&&function(e){
if(hr.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));hr.set(e,t)}(e),t=e,(lr||(lr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,gr):e);var t}
function M(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(M(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&ur.set(t,e)})).catch((()=>{})),mr.set(t,e),t}(e);if(fr.has(e))return fr.get(e);const t=I(e);return t!==e&&(fr.set(e,t),mr.set(t,e)),t}
function j(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const a=indexedDB.open(e,t),s=M(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(M(a.result),e.oldVersion,e.newVersion,M(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{i&&e.addEventListener("close",(()=>i())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}function _(e,t){
if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(wr.get(t))return wr.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=vr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!yr.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,o?"readwrite":"readonly");let a=i.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),o&&i.done]))[0]};return wr.set(t,i),i}function O(e,t){try{e.container.addComponent(t)}catch(n){
Ar.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function B(e){const t=e.name;if(no.has(t))return Ar.debug(`There were multiple attempts to register component ${t}.`),!1;no.set(t,e);for(const t of eo.values())O(t,e);for(const t of to.values())O(t,e);return!0}function N(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function P(e,t={}){let n=e;"object"!=typeof t&&(t={name:t})
;const r=Object.assign({name:Jr,automaticDataCollectionEnabled:!1},t),o=r.name;if("string"!=typeof o||!o)throw ro.create("bad-app-name",{appName:o+""});if(n||(n=Yn()),!n)throw ro.create("no-options");const i=eo.get(o);if(i){if(x(n,i.options)&&x(r,i.config))return i;throw ro.create("duplicate-app",{appName:o})}const a=new tr(o);for(const e of no.values())a.addComponent(e);const s=new oo(n,r,a);return eo.set(o,s),s}function D(e,t,n){var r;let o=null!==(r=$r[e])&&void 0!==r?r:e;n&&(o+="-"+n)
;const i=o.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=[`Unable to register library "${o}" with version "${t}":`];return i&&e.push(`library name "${o}" contains illegal characters (whitespace or "/")`),i&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Ar.warn(e.join(" "))}B(new Jn(o+"-version",(()=>({library:o,version:t})),"VERSION"))}function R(){return ao||(ao=j("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{
e.createObjectStore(io)}catch(e){}}}).catch((e=>{throw ro.create("idb-open",{originalErrorMessage:e.message})}))),ao}async function F(e,t){try{const n=(await R()).transaction(io,"readwrite"),r=n.objectStore(io);await r.put(t,H(e)),await n.done}catch(e){if(e instanceof Qn)Ar.warn(e.message);else{const t=ro.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});Ar.warn(t.message)}}}function H(e){return`${e.name}!${e.options.appId}`}function U(){
return(new Date).toISOString().substring(0,10)}function z(e){return Wn(JSON.stringify({version:2,heartbeats:e})).length}function W(e){return e instanceof Qn&&e.code.includes("request-failed")}function V({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function q(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function G(e,t){const n=(await t.json()).error
;return go.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Y({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function X(e,{refreshToken:t}){const n=Y(e);return n.append("Authorization",function(e){return`${mo} ${e}`}(t)),n}async function Q(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Z(e){return new Promise((t=>{setTimeout(t,e)}))}
function K(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return bo.test(t)?t:""}catch(e){return""}}function J(e){return`${e.appName}!${e.appId}`}function $(e,t){const n=J(e);ee(n,t),function(e,t){const n=te();n&&n.postMessage({key:e,fid:t}),ne()}(n,t)}function ee(e,t){const n=yo.get(e)
;if(n)for(const e of n)e(t)}function te(){return!vo&&"BroadcastChannel"in self&&(vo=new BroadcastChannel("[Firebase] FID Change"),vo.onmessage=e=>{ee(e.data.key,e.data.fid)}),vo}function ne(){0===yo.size&&vo&&(vo.close(),vo=null)}function re(){return ko||(ko=j("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(wo)}})),ko}async function oe(e,t){const n=J(e),r=(await re()).transaction(wo,"readwrite"),o=r.objectStore(wo),i=await o.get(n);return await o.put(t,n),
await r.done,i&&i.fid===t.fid||$(e,t.fid),t}async function ie(e){const t=J(e),n=(await re()).transaction(wo,"readwrite");await n.objectStore(wo).delete(t),await n.done}async function ae(e,t){const n=J(e),r=(await re()).transaction(wo,"readwrite"),o=r.objectStore(wo),i=await o.get(n),a=t(i);return void 0===a?await o.delete(n):await o.put(a,n),await r.done,!a||i&&i.fid===a.fid||$(e,a.fid),a}async function se(e){let t;const n=await ae(e.appConfig,(n=>{const r=function(e){const t=e||{fid:K(),
registrationStatus:0};return de(t)}(n),o=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(go.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=V(e),o=Y(e),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}
const a={fid:n,authVersion:mo,appId:e.appId,sdkVersion:fo},s={method:"POST",headers:o,body:JSON.stringify(a)},c=await Q((()=>fetch(r,s)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:q(e.authToken)}}throw await G("Create Installation",c)}(e,t);return oe(e.appConfig,n)}catch(n){throw W(n)&&409===n.customData.serverCode?await ie(e.appConfig):await oe(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,
registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:ce(e)}:{installationEntry:t}}(e,r);return t=o.registrationPromise,o.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function ce(e){let t=await le(e.appConfig);for(;1===t.registrationStatus;)await Z(100),t=await le(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await se(e);return n||t}
return t}function le(e){return ae(e,(e=>{if(!e)throw go.create("installation-not-found");return de(e)}))}function de(e){return 1===(t=e).registrationStatus&&t.registrationTime+po<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function ue({appConfig:e,heartbeatServiceProvider:t},n){const r=function(e,{fid:t}){return`${V(e)}/${t}/authTokens:generate`}(e,n),o=X(e,n),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const a={
installation:{sdkVersion:fo,appId:e.appId}},s={method:"POST",headers:o,body:JSON.stringify(a)},c=await Q((()=>fetch(r,s)));if(c.ok)return q(await c.json());throw await G("Generate Auth Token",c)}async function he(e,t=!1){let n;const r=await ae(e.appConfig,(r=>{if(!fe(r))throw go.create("not-registered");const o=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}(o))return r
;if(1===o.requestStatus)return n=async function(e,t){let n=await pe(e.appConfig);for(;1===n.authToken.requestStatus;)await Z(100),n=await pe(e.appConfig);const r=n.authToken;return 0===r.requestStatus?he(e,t):r}(e,t),r;{if(!navigator.onLine)throw go.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await ue(e,t),r=Object.assign(Object.assign({},t),{
authToken:n});return await oe(e.appConfig,r),n}catch(n){if(!W(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await oe(e.appConfig,n)}else await ie(e.appConfig);throw n}}(e,t),t}}));return n?await n:r.authToken}function pe(e){return ae(e,(e=>{if(!fe(e))throw go.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+po<Date.now()?Object.assign(Object.assign({},e),{
authToken:{requestStatus:0}}):e;var n}))}function fe(e){return void 0!==e&&2===e.registrationStatus}async function me(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await se(e);t&&await t}(n),(await he(n,t)).token}function ge(e){return go.create("missing-app-config-values",{valueName:e})}function be(e){if(!e.startsWith(Ao)){const t=Lo.create("invalid-gtag-resource",{gtagURL:e});return To.warn(t.message),""}return e}function ye(e){
return Promise.all(e.map((e=>e.catch((e=>e)))))}function ve(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:be}),r=document.createElement("script"),o=`${Ao}?l=${e}&id=${t}`;r.src=n?null==n?void 0:n.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function we(e,t,n,r){return async function(o,...i){try{if("event"===o){const[r,o]=i;await async function(e,t,n,r,o){try{let i=[]
;if(o&&o.send_to){let e=o.send_to;Array.isArray(e)||(e=[e]);const r=await ye(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),o=e&&t[e.appId];if(!o){i=[];break}i.push(o)}}0===i.length&&(i=Object.values(t)),await Promise.all(i),e("event",r,o||{})}catch(e){To.error(e)}}(e,t,n,r,o)}else if("config"===o){const[o,a]=i;await async function(e,t,n,r,o,i){const a=r[o];try{if(a)await t[a];else{const e=(await ye(n)).find((e=>e.measurementId===o));e&&await t[e.appId]}}catch(e){To.error(e)}
e("config",o,i)}(e,t,n,r,o,a)}else if("consent"===o){const[t,n]=i;e("consent",t,n)}else if("get"===o){const[t,n,r]=i;e("get",t,n,r)}else if("set"===o){const[t]=i;e("set",t)}else e(o,...i)}catch(e){To.error(e)}}}function ke(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Ce(e,t=So,n){const{appId:r,apiKey:o,measurementId:i}=e.options;if(!r)throw Lo.create("no-app-id");if(!o){if(i)return{measurementId:i,appId:r};throw Lo.create("no-api-key")}
const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new Io;return setTimeout((async()=>{s.abort()}),void 0!==n?n:6e4),Ee({appId:r,apiKey:o,measurementId:i},a,s,t)}async function Ee(e,{throttleEndTimeMillis:t,backoffCount:n},r,o=So){var i;const{appId:a,measurementId:s}=e;try{await function(e,t){return new Promise(((n,r)=>{const o=Math.max(t-Date.now(),0),i=setTimeout(n,o);e.addEventListener((()=>{clearTimeout(i),r(Lo.create("fetch-throttle",{
throttleEndTimeMillis:t}))}))}))}(r,t)}catch(e){if(s)return To.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+` provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:a,measurementId:s};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,o={method:"GET",headers:ke(r)
},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(i,o);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw Lo.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return o.deleteThrottleMetadata(a),t}catch(t){const c=t;if(!function(e){if(!(e instanceof Qn&&e.customData))return!1
;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(c)){if(o.deleteThrottleMetadata(a),s)return To.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+` provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:a,measurementId:s};throw t}
const l=503===Number(null===(i=null==c?void 0:c.customData)||void 0===i?void 0:i.httpStatus)?T(n,o.intervalMillis,30):T(n,o.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return o.setThrottleMetadata(a,d),To.debug(`Calling attemptFetch again in ${l} millis`),Ee(e,d,r,o)}}function xe(e){jo=e}function Ae(e){Mo=e}async function Te(e,t,n,r,o,i,a){var s;const c=Ce(e);c.then((t=>{n[t.measurementId]=t.appId,
e.options.measurementId&&t.measurementId!==e.options.measurementId&&To.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>To.error(e))),t.push(c);const l=async function(){
if(!C())return To.warn(Lo.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await E()}catch(e){return To.warn(Lo.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[d,u]=await Promise.all([c,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Ao)&&n.src.includes(e))return n;return null
})(i)||ve(i,d.measurementId),jo&&(o("consent","default",jo),xe(void 0)),o("js",new Date);const h=null!==(s=null==a?void 0:a.config)&&void 0!==s?s:{};return h.origin="firebase",h.update=!0,null!=u&&(h.firebase_id=u),o("config",d.measurementId,h),Mo&&(o("set",Mo),Ae(void 0)),d.measurementId}function Le(){const e=[];if(function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id
}()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=Lo.create("invalid-analytics-context",{errorInfo:t});To.warn(n.message)}}function Se(e,t,n){Le();const r=e.options.appId;if(!r)throw Lo.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Lo.create("no-api-key")
;To.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Oo[r])throw Lo.create("already-exists",{id:r});if(!Ho){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Ro);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,o){let i=function(){
window[r].push(arguments)};return window[o]&&"function"==typeof window[o]&&(i=window[o]),window[o]=we(i,e,t,n),{gtagCore:i,wrappedGtag:window[o]}}(Oo,Bo,No,Ro,Fo);Do=e,Po=t,Ho=!0}return Oo[r]=Te(e,Bo,No,t,Po,Ro,n),new _o(e)}function Ie(e=function(e=Jr){const t=eo.get(e);if(!t&&e===Jr&&Yn())return P();if(!t)throw ro.create("no-app",{appName:e});return t}()){const t=N(e=L(e),xo);return t.isInitialized()?t.getImmediate():function(e,t={}){const n=N(e,xo);if(n.isInitialized()){
const e=n.getImmediate();if(x(t,n.getOptions()))return e;throw Lo.create("already-initialized")}const r=n.initialize({options:t});return r}(e)}function Me(e,t,n,r){e=L(e),async function(e,t,n,r,o){if(o&&o.global)e("event",n,r);else{const o=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:o}))}}(Do,Oo[e.app.options.appId],t,n,r).catch((e=>To.error(e)))}function je(e){if("string"!=typeof e||!e)throw Error("expected a non-empty string, got: "+e)}function _e(e){
if("number"!=typeof e)throw Error("expected a number, got: "+e)}function Oe(e){return function(e,t){const n=new Set,r=[];for(const o of e){const e=t(o);n.has(e)||(n.add(e),r.push(o))}return r}(e,(e=>e.unicode))}function Be(e,t,n){n.onerror=()=>t(n.error),n.onblocked=()=>t(Error("IDB blocked")),n.onsuccess=()=>e(n.result)}async function Ne(e){const t=await new Promise(((t,n)=>{const r=indexedDB.open(e,1);ti[e]=r,r.onupgradeneeded=e=>{e.oldVersion<1&&function(e){function t(t,n,r){
const o=n?e.createObjectStore(t,{keyPath:n}):e.createObjectStore(t);if(r)for(const[e,[t,n]]of Object.entries(r))o.createIndex(e,t,{multiEntry:n});return o}t(Vo),t(Wo,"unicode",{[Go]:["tokens",!0],[Xo]:[["group","order"]],[ei]:["skinUnicodes",!0]}),t(qo,void 0,{[Yo]:[""]})}(r.result)},Be(t,n,r)}));return t.onclose=()=>De(e),t}function Pe(e,t,n,r){return new Promise(((o,i)=>{const a=e.transaction(t,n,{durability:"relaxed"}),s="string"==typeof t?a.objectStore(t):t.map((e=>a.objectStore(e)));let c
;r(s,a,(e=>{c=e})),a.oncomplete=()=>o(c),a.onerror=()=>i(a.error)}))}function De(e){const t=ti[e],n=t&&t.result;if(n){n.close();const t=ri[e];if(t)for(const e of t)e()}delete ti[e],delete ni[e],delete ri[e]}function Re(e){return e.split(/[\s_]+/).map((e=>!e.match(/\w/)||oi.has(e)?e.toLowerCase():e.replace(/[)(:,]/g,"").replace(/\u2019/g,"'").toLowerCase())).filter(Boolean)}function Fe(e){return e.filter(Boolean).map((e=>e.toLowerCase())).filter((e=>e.length>=2))}function He(e,t,n,r){
e[t](n).onsuccess=e=>r&&r(e.target.result)}function Ue(e,t,n){He(e,"get",t,n)}function ze(e,t,n){He(e,"getAll",t,n)}function We(e){e.commit&&e.commit()}function Ve(e,t){const n=function(e,t){let n=e[0];for(let r=1;r<e.length;r++){const o=e[r];t(n)>t(o)&&(n=o)}return n}(e,(e=>e.length)),r=[];for(const o of n)e.some((e=>-1===e.findIndex((e=>t(e)===t(o)))))||r.push(o);return r}async function qe(e,t,n,r){try{const o=function(e){
const t=e.map((({annotation:e,emoticon:t,group:n,order:r,shortcodes:o,skins:i,tags:a,emoji:s,version:c})=>{const l={annotation:e,group:n,order:r,tags:a,tokens:[...new Set(Fe([...(o||[]).map(Re).flat(),...(a||[]).map(Re).flat(),...Re(e),t]))].sort(),unicode:s,version:c};if(t&&(l.emoticon=t),o&&(l.shortcodes=o),i){l.skinTones=[],l.skinUnicodes=[],l.skinVersions=[];for(const{tone:e,emoji:t,version:n}of i)l.skinTones.push(e),l.skinUnicodes.push(t),l.skinVersions.push(n)}return l}));return t}(t)
;await Pe(e,[Wo,Vo],$o,(([e,t],i)=>{function a(){2==++l&&function(){if(s!==r||c!==n){e.clear();for(const t of o)e.put(t);t.put(r,Qo),t.put(n,Zo),We(i)}}()}let s,c,l=0;Ue(t,Qo,(e=>{s=e,a()})),Ue(t,Zo,(e=>{c=e,a()}))}))}finally{}}async function Ge(e,t){const n=Fe(Re(t));return n.length?Pe(e,Wo,Jo,((e,t,r)=>{const o=[],i=()=>{const e=Ve(o,(e=>e.unicode));r(e.sort(((e,t)=>e.order<t.order?-1:1)))};for(let t=0;t<n.length;t++){
const r=n[t],a=t===n.length-1?IDBKeyRange.bound(r,r+"\uffff",!1,!0):IDBKeyRange.only(r);ze(e.index(Go),a,(e=>{o.push(e),o.length===n.length&&i()}))}})):[]}async function Ye(e,t){const n=await Ge(e,t);if(!n.length){const n=e=>(e.shortcodes||[]).includes(t.toLowerCase());return await async function(e,t){return Pe(e,Wo,Jo,((e,n,r)=>{let o;const i=()=>{e.getAll(o&&IDBKeyRange.lowerBound(o,!0),50).onsuccess=e=>{const n=e.target.result;for(const e of n)if(o=e.unicode,t(e))return r(e)
;if(n.length<50)return r();i()}};i()}))}(e,n)||null}return n.filter((e=>{const n=(e.shortcodes||[]).map((e=>e.toLowerCase()));return n.includes(t.toLowerCase())}))[0]||null}function Xe(e,t,n){return Pe(e,t,Jo,((e,t,r)=>Ue(e,n,r)))}function Qe(e){!function(e){const t=e&&Array.isArray(e),n=t&&e.length&&(!e[0]||ii.some((t=>!(t in e[0]))));if(!t||n)throw Error("Custom emojis are in the wrong format")}(e);const t=(e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:1,n=e.sort(t),r=function(e,t){
const n=new Map;for(const r of e){const e=t(r);for(const t of e){let e=n;for(let n=0;n<t.length;n++){const r=t.charAt(n);let o=e.get(r);o||(o=new Map,e.set(r,o)),e=o}let o=e.get("");o||(o=[],e.set("",o)),o.push(r)}}return(e,t)=>{let r=n;for(let t=0;t<e.length;t++){const n=e.charAt(t),o=r.get(n);if(!o)return[];r=o}if(t)return r.get("")||[];const o=[],i=[r];for(;i.length;){const e=[...i.shift().entries()].sort(((e,t)=>e[0]<t[0]?-1:1));for(const[t,n]of e)""===t?o.push(...n):i.push(n)}return o}
}(e,(e=>{const t=new Set;if(e.shortcodes)for(const n of e.shortcodes)for(const e of Re(n))t.add(e);return t})),o=e=>r(e,!0),i=e=>r(e,!1),a=new Map,s=new Map;for(const t of e){s.set(t.name.toLowerCase(),t);for(const e of t.shortcodes||[])a.set(e.toLowerCase(),t)}return{all:n,search:e=>{const n=Re(e),r=n.map(((e,t)=>(t<n.length-1?o:i)(e)));return Ve(r,(e=>e.name)).sort(t)},byShortcode:e=>a.get(e.toLowerCase()),byName:e=>s.get(e.toLowerCase())}}function Ze(e){if(!e)return e
;if(ai&&(e=structuredClone(e)),delete e.tokens,e.skinTones){const t=e.skinTones.length;e.skins=Array(t);for(let n=0;n<t;n++)e.skins[n]={tone:e.skinTones[n],unicode:e.skinUnicodes[n],version:e.skinVersions[n]};delete e.skinTones,delete e.skinUnicodes,delete e.skinVersions}return e}function Ke(e,t){if(2!==Math.floor(e.status/100))throw Error("Failed to fetch: "+t+":  "+e.status)}async function Je(e){const t=await fetch(e);Ke(t,e);const n=t.headers.get("etag"),r=await t.json();return function(e){
if(!e||!Array.isArray(e)||!e[0]||"object"!=typeof e[0]||si.some((t=>!(t in e[0]))))throw Error("Emoji data is in the wrong format")}(r),[n,r]}async function $e(e){let t=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=-1;++o<t;)r[o]=e.charCodeAt(o);return n}(JSON.stringify(e));const n=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=-1;++o<r;)t+=String.fromCharCode(n[o]);return t}(await crypto.subtle.digest("SHA-1",t));return btoa(n)}async function et(e,t){
let n,r=await async function(e){const t=await fetch(e,{method:"HEAD"});Ke(t,e);const n=t.headers.get("etag");return n}(t);if(!r){const e=await Je(t);r=e[0],n=e[1],r||(r=await $e(n))}await async function(e,t,n){const[r,o]=await Promise.all([Qo,Zo].map((t=>Xe(e,Vo,t))));return r===n&&o===t}(e,t,r)||(n||(n=(await Je(t))[1]),await qe(e,n,t,r))}function tt(e){return e.unicode.includes("\u200d")}function nt(e){const t=gi(e,"#000"),n=gi(e,"#fff");return t&&n&&((e,t)=>{
const n=[...e].join(","),r=[...t].join(",");return n===r&&!n.startsWith("0,0,0,")})(t,n)}function rt(e){e.preventDefault(),e.stopPropagation()}function ot(e,t,n){return(t+=e?-1:1)<0?t=n.length-1:t>=n.length&&(t=0),t}function it(e,t){const n=new Set,r=[];for(const o of e){const e=t(o);n.has(e)||(n.add(e),r.push(o))}return r}function at(e){{const t=document.createRange();return t.selectNode(e.firstChild),t.getBoundingClientRect().width}}function st(e,t,n){let r=e.get(t);return r||(r=n(),
e.set(t,r)),r}function ct(e){return""+e}function lt(e,t){const{targetNode:n}=t;let{targetParentNode:r}=t,o=!1;r?o=function(e,t){let n=e.firstChild,r=0;for(;n;){if(t[r]!==n)return!0;n=n.nextSibling,r++}return r!==t.length}(r,e):(o=!0,t.targetNode=void 0,t.targetParentNode=r=n.parentNode),o&&function(e,t){Ti?e.replaceChildren(...t):(e.innerHTML="",e.append(...t))}(r,e)}function dt(e){let t="",n=!1,r=!1,o=-1;const i=new Map,a=[];for(let s=0,c=e.length;s<c;s++){const l=e[s];if(t+=l,s===c-1)break
;for(let e=0;e<l.length;e++)switch(l.charAt(e)){case"<":"/"===l.charAt(e+1)?a.pop():(n=!0,a.push(++o));break;case">":n=!1,r=!1;break;case"=":r=!0}const d=st(i,a[a.length-1],(()=>[]));let u,h,p;if(r){const t=/(\S+)="?([^"=]*)$/.exec(l);u=t[1],h=t[2],p=/^[^">]*/.exec(e[s+1])[0]}const f={attributeName:u,attributeValuePre:h,attributeValuePost:p,expressionIndex:s};d.push(f),n||r||(t+=" ")}const s=function(e){const t=document.createElement("template");return t.innerHTML=e,t}(t);return{template:s,
elementsToBindings:i}}function ut(e,t,n){for(let r=0;r<e.length;r++){const o=e[r],i={binding:o,targetNode:o.attributeName?t:t.firstChild,targetParentNode:void 0,currentExpression:void 0};n.push(i)}}function ht(e){const{template:t,elementsToBindings:n}=st(Ei,e,(()=>dt(e))),r=t.cloneNode(!0).content.firstElementChild,o=function(e,t){const n=[];let r;if(1===t.size&&(r=t.get(0)))ut(r,e,n);else{const r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);let o=e,i=-1;do{const e=t.get(++i)
;e&&ut(e,o,n)}while(o=r.nextNode())}return n}(r,n);return function(e){return function(e,t){for(const n of t){const{targetNode:t,currentExpression:r,binding:{expressionIndex:o,attributeName:i,attributeValuePre:a,attributeValuePost:s}}=n,c=e[o];if(r!==c)if(n.currentExpression=c,i)t.setAttribute(i,a+ct(c)+s);else{let e;Array.isArray(c)?lt(c,n):c instanceof Element?(e=c,t.replaceWith(e)):t.nodeValue=ct(c),e&&(n.targetNode=e)}}}(e,o),r}}function pt(e,t,n,r,o,i,a,s,c){function l(e,n,r){
return f(e,((e,o)=>p`<button role="${n?"option":"menuitem"}" aria-selected="${n?o===t.activeSearchItem:""}" aria-label="${d(e,t.currentSkinTone)}" title="${u(e)}" class="${"emoji"+(n&&o===t.activeSearchItem?" active":"")+(e.unicode?"":" custom-emoji")}" id="${`${r}-${e.id}`}" style="${e.unicode?"":`--custom-emoji-background: url(${JSON.stringify(e.url)})`}">${e.unicode?h(e,t.currentSkinTone):""}</button>`),(e=>`${r}-${e.id}`))}
const{labelWithSkin:d,titleForEmoji:u,unicodeWithSkin:h}=n,{html:p,map:f}=function(e){const t=st(xi,e,(()=>new Map));let n=Ai;return{map:function(e,t,r){return e.map(((e,o)=>{const i=n;n=r(e);try{return t(e,o)}finally{n=i}}))},html:function(e,...r){const o=st(t,e,(()=>new Map));return st(o,n,(()=>ht(e)))(r)}}
}(t),m=p`<section data-ref="rootElement" class="picker" aria-label="${t.i18n.regionLabel}" style="${t.pickerStyle||""}"><div class="pad-top"></div><div class="search-row"><div class="search-wrapper"><input id="search" class="search" type="search" role="combobox" enterkeyhint="search" placeholder="${t.i18n.searchLabel}" autocapitalize="none" autocomplete="off" spellcheck="true" aria-expanded="${!(!t.searchMode||!t.currentEmojis.length)}" aria-controls="search-results" aria-describedby="search-description" aria-autocomplete="list" aria-activedescendant="${t.activeSearchItemId?"emo-"+t.activeSearchItemId:""}" data-ref="searchElement" data-on-input="onSearchInput" data-on-keydown="onSearchKeydown"><label class="sr-only" for="search">${t.i18n.searchLabel}</label> <span id="search-description" class="sr-only">${t.i18n.searchDescription}</span></div><div class="skintone-button-wrapper ${t.skinTonePickerExpandedAfterAnimation?"expanded":""}"><button id="skintone-button" class="emoji ${t.skinTonePickerExpanded?"hide-focus":""}" aria-label="${t.skinToneButtonLabel}" title="${t.skinToneButtonLabel}" aria-describedby="skintone-description" aria-haspopup="listbox" aria-expanded="${t.skinTonePickerExpanded}" aria-controls="skintone-list" data-on-click="onClickSkinToneButton">${t.skinToneButtonText||""}</button></div><span id="skintone-description" class="sr-only">${t.i18n.skinToneDescription}</span><div data-ref="skinToneDropdown" id="skintone-list" class="skintone-list hide-focus ${t.skinTonePickerExpanded?"":"hidden no-animate"}" style="transform:translateY(${t.skinTonePickerExpanded?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))"})" role="listbox" aria-label="${t.i18n.skinTonesLabel}" aria-activedescendant="skintone-${t.activeSkinTone}" aria-hidden="${!t.skinTonePickerExpanded}" tabIndex="-1" data-on-focusout="onSkinToneOptionsFocusOut" data-on-click="onSkinToneOptionsClick" data-on-keydown="onSkinToneOptionsKeydown" data-on-keyup="onSkinToneOptionsKeyup">${f(t.skinTones,((e,n)=>p`<div id="skintone-${n}" class="emoji ${n===t.activeSkinTone?"active":""}" aria-selected="${n===t.activeSkinTone}" role="option" title="${t.i18n.skinTones[n]}" aria-label="${t.i18n.skinTones[n]}">${e}</div>`),(e=>e))}</div></div><div class="nav" role="tablist" style="grid-template-columns:repeat(${t.groups.length},1fr)" aria-label="${t.i18n.categoriesLabel}" data-on-keydown="onNavKeydown" data-on-click="onNavClick">${f(t.groups,(e=>p`<button role="tab" class="nav-button" aria-controls="tab-${e.id}" aria-label="${t.i18n.categories[e.name]}" aria-selected="${!t.searchMode&&t.currentGroup.id===e.id}" title="${t.i18n.categories[e.name]}" data-group-id="${e.id}"><div class="nav-emoji emoji">${e.emoji}</div></button>`),(e=>e.id))}</div><div class="indicator-wrapper"><div class="indicator" style="transform:translateX(${(t.isRtl?-1:1)*t.currentGroupIndex*100}%)"></div></div><div class="message ${t.message?"":"gone"}" role="alert" aria-live="polite">${t.message||""}</div><div data-ref="tabpanelElement" class="tabpanel ${!t.databaseLoaded||t.message?"gone":""}" role="${t.searchMode?"region":"tabpanel"}" aria-label="${t.searchMode?t.i18n.searchResultsLabel:t.i18n.categories[t.currentGroup.name]}" id="${t.searchMode?"":"tab-"+t.currentGroup.id}" tabIndex="0" data-on-click="onEmojiClick"><div data-action="calculateEmojiGridStyle">${f(t.currentEmojisWithCategories,((e,n)=>p`<div><div id="menu-label-${n}" class="category ${1===t.currentEmojisWithCategories.length&&""===t.currentEmojisWithCategories[0].category?"gone":""}" aria-hidden="true">${t.searchMode?t.i18n.searchResultsLabel:e.category?e.category:t.currentEmojisWithCategories.length>1?t.i18n.categories.custom:t.i18n.categories[t.currentGroup.name]}</div><div class="emoji-menu ${0===n||t.searchMode||-1!==t.currentGroup.id?"":"visibility-auto"}" style="${"--num-rows: "+Math.ceil(e.emojis.length/t.numColumns)}" data-action="updateOnIntersection" role="${t.searchMode?"listbox":"menu"}" aria-labelledby="menu-label-${n}" id="${t.searchMode?"search-results":""}">${l(e.emojis,t.searchMode,"emo")}</div></div>`),(e=>e.category))}</div></div><div class="favorites onscreen emoji-menu ${t.message?"gone":""}" role="menu" aria-label="${t.i18n.favoritesLabel}" data-on-click="onEmojiClick">${l(t.currentFavorites,!1,"fav")}</div><button data-ref="baselineEmoji" aria-hidden="true" tabindex="-1" class="abs-pos hidden emoji baseline-emoji">😀</button></section>`,g=(t,n)=>{
for(const r of e.querySelectorAll(`[${t}]`))n(r,r.getAttribute(t))};if(c){e.appendChild(m);for(const e of["click","focusout","input","keydown","keyup"])g("data-on-"+e,((t,n)=>{t.addEventListener(e,r[n])}));g("data-ref",((e,t)=>{i[t]=e})),a.addEventListener("abort",(()=>{e.removeChild(m)}))}g("data-action",((e,t)=>{let n=s.get(t);n||s.set(t,n=new WeakSet),n.has(e)||(n.add(e),o[t](e))}))}function ft(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1
;return!0}function mt(e,t){function n(){const{customEmoji:e,database:t}=h,n=e||Ii;t.customEmoji!==n&&(t.customEmoji=n)}function r(e){const t=function(e,t,n){let r=!0;for(const o of e){const e=at(n(o));void 0===ki&&(ki=at(t));const i=e/1.8<ki;vi.set(o.unicode,i),i||(r=!1)}return r}(e,l.baselineEmoji,g);t?L():h.currentEmojis=[...h.currentEmojis]}function o(e){return!e.unicode||!tt(e)||vi.get(e.unicode)}async function i(e){const t=h.emojiVersion||await yi()
;return e.filter((({version:e})=>!e||e<=t))}async function a(e){return function(e,t){const n=e=>{const n={};for(const r of e)"number"==typeof r.tone&&r.version<=t&&(n[r.tone]=r.unicode);return n};return e.map((({unicode:e,skins:t,shortcodes:r,url:o,name:i,category:a,annotation:s})=>({unicode:e,name:i,shortcodes:r,url:o,category:a,annotation:s,id:e||i,skins:t&&n(t)})))}(e,h.emojiVersion||await yi())}async function s(e){
const t=await h.database.getEmojiByUnicodeOrName(e),n=[...h.currentEmojis,...h.currentFavorites].find((t=>t.id===e)),r=n.unicode&&C(n,h.currentSkinTone);await h.database.incrementFavoriteEmojiCount(e),b("emoji-click",{emoji:t,skinTone:h.currentSkinTone,...r&&{unicode:r},...n.name&&{name:n.name}})}function c(e){h.currentSkinTone=e,h.skinTonePickerExpanded=!1,m("skintone-button"),b("skin-tone-change",{skinTone:e}),h.database.setPreferredSkinTone(e)}
const l={},d=new AbortController,u=d.signal,{state:h,createEffect:p}=function(e){let t,n=!1;const r=new Map,o=new Set;let i;const a=()=>{if(n)return;const e=[...o];o.clear();try{for(const t of e)t()}finally{i=!1,o.size&&(i=!0,Li(a))}},s=new Proxy({},{get(e,n){if(t){let e=r.get(n);e||(e=new Set,r.set(n,e)),e.add(t)}return e[n]},set(e,t,n){if(e[t]!==n){e[t]=n;const s=r.get(t);if(s){for(const e of s)o.add(e);i||(i=!0,Li(a))}}return!0}});return e.addEventListener("abort",(()=>{n=!0})),{state:s,
createEffect:e=>{const n=()=>{const r=t;t=n;try{return e()}finally{t=r}};return n()}}}(u),f=new Map;Mi(h,{skinToneEmoji:void 0,i18n:void 0,database:void 0,customEmoji:void 0,customCategorySorting:void 0,emojiVersion:void 0}),Mi(h,t),Mi(h,{initialLoad:!0,currentEmojis:[],currentEmojisWithCategories:[],rawSearchText:"",searchText:"",searchMode:!1,activeSearchItem:-1,message:void 0,skinTonePickerExpanded:!1,skinTonePickerExpandedAfterAnimation:!1,currentSkinTone:0,activeSkinTone:0,
skinToneButtonText:void 0,pickerStyle:void 0,skinToneButtonLabel:"",skinTones:[],currentFavorites:[],defaultFavoriteEmojis:void 0,numColumns:8,isRtl:!1,currentGroupIndex:0,groups:di,databaseLoaded:!1,activeSearchItemId:void 0}),p((()=>{h.currentGroup!==h.groups[h.currentGroupIndex]&&(h.currentGroup=h.groups[h.currentGroupIndex])}));const m=t=>{e.getElementById(t).focus()},g=t=>e.getElementById("emo-"+t.id),b=(e,t)=>{l.rootElement.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0
}))},y=(e,t)=>e.id===t.id,v=(e,t)=>{const{category:n,emojis:r}=e,{category:o,emojis:i}=t;return n===o&&ft(r,i,y)},w=e=>{ft(h.currentEmojis,e,y)||(h.currentEmojis=e)},k=e=>{h.searchMode!==e&&(h.searchMode=e)},C=(e,t)=>t&&e.skins&&e.skins[t]||e.unicode,E={labelWithSkin:(e,t)=>{return(n=[e.name||C(e,t),e.annotation,...e.shortcodes||Ii].filter(Boolean),it(n,(e=>e))).join(", ");var n},titleForEmoji:e=>e.annotation||(e.shortcodes||Ii).join(", "),unicodeWithSkin:C},x={onClickSkinToneButton:function(e){
h.skinTonePickerExpanded=!h.skinTonePickerExpanded,h.activeSkinTone=h.currentSkinTone,h.skinTonePickerExpanded&&(rt(e),wi((()=>m("skintone-list"))))},onEmojiClick:async function(e){const{target:t}=e;t.classList.contains("emoji")&&(rt(e),s(t.id.substring(4)))},onNavClick:function(e){const{target:t}=e,n=t.closest(".nav-button");if(!n)return;const r=parseInt(n.dataset.groupId,10);l.searchElement.value="",h.rawSearchText="",h.searchText="",h.activeSearchItem=-1,
h.currentGroupIndex=h.groups.findIndex((e=>e.id===r))},onNavKeydown:function(e){const{target:t,key:n}=e,r=t=>{t&&(rt(e),t.focus())};switch(n){case"ArrowLeft":return r(t.previousElementSibling);case"ArrowRight":return r(t.nextElementSibling);case"Home":return r(t.parentElement.firstElementChild);case"End":return r(t.parentElement.lastElementChild)}},onSearchKeydown:function(e){if(!h.searchMode||!h.currentEmojis.length)return;const t=t=>{rt(e),
h.activeSearchItem=ot(t,h.activeSearchItem,h.currentEmojis)};switch(e.key){case"ArrowDown":return t(!1);case"ArrowUp":return t(!0);case"Enter":if(-1!==h.activeSearchItem)return rt(e),s(h.currentEmojis[h.activeSearchItem].id);h.activeSearchItem=0}},onSkinToneOptionsClick:function(e){const{target:{id:t}}=e,n=t&&t.match(/^skintone-(\d)/);n&&(rt(e),c(parseInt(n[1],10)))},onSkinToneOptionsFocusOut:async function(e){const{relatedTarget:t}=e;t&&"skintone-list"===t.id||(h.skinTonePickerExpanded=!1)},
onSkinToneOptionsKeydown:function(e){if(!h.skinTonePickerExpanded)return;const t=async t=>{rt(e),h.activeSkinTone=t};switch(e.key){case"ArrowUp":return t(ot(!0,h.activeSkinTone,h.skinTones));case"ArrowDown":return t(ot(!1,h.activeSkinTone,h.skinTones));case"Home":return t(0);case"End":return t(h.skinTones.length-1);case"Enter":return rt(e),c(h.activeSkinTone);case"Escape":return rt(e),h.skinTonePickerExpanded=!1,m("skintone-button")}},onSkinToneOptionsKeyup:function(e){
if(h.skinTonePickerExpanded)return" "===e.key?(rt(e),c(h.activeSkinTone)):void 0},onSearchInput:function(e){h.rawSearchText=e.target.value}},A={calculateEmojiGridStyle:function(e){!function(e,t,n){let r;Ci?(r=new ResizeObserver(n),r.observe(e)):wi(n),t.addEventListener("abort",(()=>{r&&r.disconnect()}))}(e,u,(()=>{{const e=getComputedStyle(l.rootElement),t=parseInt(e.getPropertyValue("--num-columns"),10),n="rtl"===e.getPropertyValue("direction");h.numColumns=t,h.isRtl=n}}))},
updateOnIntersection:function(e){!function(e,t,n){{const r=e.closest(".tabpanel");let o=Si.get(r);o||(o=new IntersectionObserver(n,{root:r,rootMargin:"50% 0px 50% 0px",threshold:0}),Si.set(r,o),t.addEventListener("abort",(()=>{o.disconnect()}))),o.observe(e)}}(e,u,(e=>{for(const{target:t,isIntersecting:n}of e)t.classList.toggle("onscreen",n)}))}};let T=!0;p((()=>{pt(e,h,E,x,A,l,u,f,T),T=!1})),h.emojiVersion||yi().then((e=>{e||(h.message=h.i18n.emojiUnsupportedMessage)})),p((()=>{
h.database&&async function(){let e=!1;const t=setTimeout((()=>{e=!0,h.message=h.i18n.loadingMessage}),1e3);try{await h.database.ready(),h.databaseLoaded=!0}catch(e){h.message=h.i18n.networkErrorMessage}finally{clearTimeout(t),e&&(e=!1,h.message="")}}()})),p((()=>{h.pickerStyle=`\n      --num-groups: ${h.groups.length}; \n      --indicator-opacity: ${h.searchMode?0:1}; \n      --num-skintones: 6;`})),p((()=>{h.customEmoji&&h.database&&n()})),p((()=>{
h.customEmoji&&h.customEmoji.length?h.groups!==li&&(h.groups=li):h.groups!==di&&(h.currentGroupIndex&&h.currentGroupIndex--,h.groups=di)})),p((()=>{!async function(){h.databaseLoaded&&(h.currentSkinTone=await h.database.getPreferredSkinTone())}()})),p((()=>{h.skinTones=[,,,,,,].fill().map(((e,t)=>function(e,t){if(0===t)return e;const n=e.indexOf("\u200d");return-1!==n?e.substring(0,n)+String.fromCodePoint(127995+t-1)+e.substring(n):(e.endsWith("\ufe0f")&&(e=e.substring(0,e.length-1)),
e+"\ud83c"+String.fromCodePoint(57339+t-1))}(h.skinToneEmoji,t)))})),p((()=>{h.skinToneButtonText=h.skinTones[h.currentSkinTone]})),p((()=>{h.skinToneButtonLabel=h.i18n.skinToneLabel.replace("{skinTone}",h.i18n.skinTones[h.currentSkinTone])})),p((()=>{h.databaseLoaded&&async function(){const{database:e}=h,t=(await Promise.all(pi.map((t=>e.getEmojiByUnicodeOrName(t))))).filter(Boolean);h.defaultFavoriteEmojis=t}()})),p((()=>{h.databaseLoaded&&h.defaultFavoriteEmojis&&async function(){n()
;const{database:e,defaultFavoriteEmojis:t,numColumns:r}=h,o=await e.getTopFavoriteEmoji(r),i=await a(it([...o,...t],(e=>e.unicode||e.name)).slice(0,r));h.currentFavorites=i}()})),p((()=>{!async function(){const{searchText:e,currentGroup:t,databaseLoaded:n,customEmoji:r}=h;if(n)if(e.length>=2){const t=await async function(e){return a(await i(await h.database.getEmojiBySearchQuery(e)))}(e);h.searchText===e&&(w(t),k(!0))}else{const{id:e}=t;if(-1!==e||r&&r.length){const t=await async function(e){
const t=-1===e?h.customEmoji:await h.database.getEmojiByGroup(e);return a(await i(t))}(e);h.currentGroup.id===e&&(w(t),k(!1))}}else h.currentEmojis=[],h.searchMode=!1}()}));const L=()=>{wi((()=>{var e;(e=l.tabpanelElement)&&(e.scrollTop=0)}))};return p((()=>{const{currentEmojis:e,emojiVersion:t}=h,n=e.filter((e=>e.unicode)).filter((e=>tt(e)&&!vi.has(e.unicode)));if(!t&&n.length)w(e),wi((()=>r(n)));else{const n=t?e:e.filter(o);w(n),L()}})),p((()=>{})),p((()=>{const e=function(){
const{searchMode:e,currentEmojis:t}=h;if(e)return[{category:"",emojis:t}];const n=new Map;for(const e of t){const t=e.category||"";let r=n.get(t);r||(r=[],n.set(t,r)),r.push(e)}return[...n.entries()].map((([e,t])=>({category:e,emojis:t}))).sort(((e,t)=>h.customCategorySorting(e.category,t.category)))}();(e=>{ft(h.currentEmojisWithCategories,e,v)||(h.currentEmojisWithCategories=e)})(e)})),p((()=>{h.activeSearchItemId=-1!==h.activeSearchItem&&h.currentEmojis[h.activeSearchItem].id})),p((()=>{
const{rawSearchText:e}=h;ui((()=>{h.searchText=(e||"").trim(),h.activeSearchItem=-1}))})),p((()=>{h.skinTonePickerExpanded?l.skinToneDropdown.addEventListener("transitionend",(()=>{h.skinTonePickerExpandedAfterAnimation=!0}),{once:!0}):h.skinTonePickerExpandedAfterAnimation=!1})),{$set(e){Mi(h,e)},$destroy(){d.abort()}}}function gt(e){let t=0,n="";for(;t<e.byteLength;){const r=e[t];if(128&r)if(192==(224&r)){const o=e[t+1];n+=String.fromCharCode((31&r)<<6|63&o),t+=2}else if(224==(240&r)){
const o=e[t+1],i=e[t+2];n+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&i),t+=3}else if(240==(248&r)){const o=(7&r)<<18|(63&e[t+1])<<12|(63&e[t+2])<<6|63&e[t+3];n+=o<=1114111?String.fromCodePoint(o):"\ufffd",t+=4}else n+="\ufffd",t+=1;else n+=String.fromCharCode(r),t+=1}return n}function bt(e){try{return new DataView(e,0,0),!0}catch(e){return!1}}function yt(e,t){const n=function(e){const t=[];for(const n of Array.from(e,(e=>e.codePointAt(0)||0)))n<=127?t.push(n):n<=2047?(t.push(n>>6|192),
t.push(63&n|128)):n<=65535?(t.push(n>>12|224),t.push(n>>6&63|128),t.push(63&n|128)):n<=1114111&&(t.push(n>>18|240),t.push(n>>12&63|128),t.push(n>>6&63|128),t.push(63&n|128));return Uint8Array.from(t)}(t),r=new DataView(new ArrayBuffer(4),0,4);r.setUint32(0,n.byteLength,!0),e.write(r),e.write(n)}function vt(e,t){const n=new DataView(new ArrayBuffer(5),0,5);n.setUint8(0,102),n.setUint32(1,t.byteLength,!0),e.write(n),e.write(t)}function wt(e,t){switch(typeof t){case"string":e.write(101),yt(e,t)
;break;case"boolean":e.write([10,t?1:0]);break;case"undefined":e.write(0);break;case"number":{if(Number.isSafeInteger(t))if(t>=0){if(t<=255){const n=new DataView(new ArrayBuffer(2),0,2);return n.setUint8(0,10),n.setUint8(1,t),void e.write(n)}if(t<=65535){const n=new DataView(new ArrayBuffer(3),0,3);return n.setUint8(0,11),n.setUint16(1,t,!0),void e.write(n)}if(t<=4294967295){const n=new DataView(new ArrayBuffer(5),0,5);return n.setUint8(0,12),n.setUint32(1,t,!0),void e.write(n)}}else{
if(t>=-128&&t<128){const n=new DataView(new ArrayBuffer(2),0,2);return n.setUint8(0,20),n.setInt8(1,t),void e.write(n)}if(t>=-32768&&t<32768){const n=new DataView(new ArrayBuffer(3),0,3);return n.setUint8(0,21),n.setInt16(1,t,!0),void e.write(n)}if(t>=-2147483648&&t<2147483648){const n=new DataView(new ArrayBuffer(5),0,5);return n.setUint8(0,22),n.setInt32(1,t,!0),void e.write(n)}}const n=new DataView(new ArrayBuffer(9),0,9);n.setUint8(0,33),n.setFloat64(1,t,!0),e.write(n)}break;case"bigint":{
const n=new DataView(new ArrayBuffer(9),0,9);t>=0n?(n.setUint8(0,13),n.setBigUint64(1,t,!0)):(n.setUint8(0,23),n.setBigUint64(1,t,!0)),e.write(n)}break;case"object":null===t?e.write(255):Array.isArray(t)?function(e,t){const n=new DataView(new ArrayBuffer(5),0,5);n.setUint8(0,99),n.setUint32(1,t.length,!0),e.write(n);for(const n of t)wt(e,n)}(e,t):bt(t)?vt(e,new Uint8Array(t)):ArrayBuffer.isView(t)?vt(e,new Uint8Array(t.buffer,t.byteOffset,t.byteLength)):function(e,t){
if("function"==typeof t.toJSON)return void wt(e,t.toJSON());const n=Object.keys(t);{const t=new DataView(new ArrayBuffer(5),0,5);t.setUint8(0,100),t.setUint32(1,n.length,!0),e.write(t)}for(const r of n){const n=t[r];switch(typeof n){case"bigint":case"number":case"object":case"string":case"boolean":case"undefined":yt(e,r),wt(e,n)}}}(e,t)}}function kt(e){const t=e.read();switch(t){case 0:return;case 255:return null;case 10:return e.read();case 11:return e.readNBytesDV(2).getUint16(0,!0);case 12:
return e.readNBytesDV(4).getUint32(0,!0);case 13:return e.readNBytesDV(8).getBigUint64(0,!0);case 20:return e.read()<<8>>8;case 21:return e.readNBytesDV(2).getInt16(0,!0);case 22:return e.readNBytesDV(4).getInt32(0,!0);case 23:return e.readNBytesDV(8).getBigInt64(0,!0);case 32:return e.readNBytesDV(4).getFloat32(0,!0);case 33:return e.readNBytesDV(8).getFloat64(0,!0);case 99:return function(e){const t=e.readNBytesDV(4).getUint32(0,!0),n=Array(t);for(let r=0;r<t;r++)n[r]=kt(e);return n}(e)
;case 100:return function(e){const t=e.readNBytesDV(4).getUint32(0,!0),n=Object.create(null);for(let r=0;r<t;r++)n[gt(e.readNBytes(e.readNBytesDV(4).getUint32(0,!0)))]=kt(e);return n}(e);case 101:return gt(e.readNBytes(e.readNBytesDV(4).getUint32(0,!0)));case 102:return e.readNBytes(e.readNBytesDV(4).getUint32(0,!0));default:throw Error("Parse Error: Invalid data ID: "+t)}}function Ct(e){if(!Number.isSafeInteger(e)||e<1||e>40)throw Error(`Invalid version=${e}. Expected number [1..40]`)}
function Et(e,t){return e.toString(2).padStart(t,"0")}function xt(e,t){const n=e%t;return n>=0?n:t+n}function At(e,t){return Array(e).fill(t)}function Tt(...e){let t=0;for(const n of e)t=Math.max(t,n.length);const n=[];for(let r=0;r<t;r++)for(const t of e)r>=t.length||n.push(t[r]);return new Uint8Array(n)}function Lt(e,t,n){if(n<0||n+t.length>e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[n+r])return!1;return!0}function St(){let e,t=1/0;return{add(n,r){n>=t||(e=r,t=n)},get:()=>e,
score:()=>t}}function It(e){return{has:t=>e.includes(t),decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw Error("alphabet.decode: not string element="+t);const n=e.indexOf(t);if(-1===n)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))},encode:t=>{
if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(function(e){if(!Number.isSafeInteger(e))throw Error("integer expected: "+e)}(t),t<0||t>=e.length)throw Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))}}}function Mt(e,t){const{words:n,shortBlocks:r,numBlocks:o,blockLen:i,total:a}=ra.capacity(e,t),s=(c=n,{encode(e){const t=ia.divisorPoly(c),n=Array.from(e)
;return n.push(...t.slice(0,-1).fill(0)),Uint8Array.from(ia.remainderPoly(n,t))},decode(e){const t=e.slice(),n=ia.polynomial(Array.from(e));let r=At(c,0),o=!1;for(let e=0;e<c;e++){const t=ia.evalPoly(n,ia.exp(e));r[r.length-1-e]=t,0!==t&&(o=!0)}if(!o)return t;r=ia.polynomial(r);const i=ia.monomial(c,1),[a,s]=ia.euclidian(i,r,c),l=At(ia.degree(a),0);let d=0;for(let e=1;e<256&&d<l.length;e++)0===ia.evalPoly(a,e)&&(l[d++]=ia.inv(e));if(d!==l.length)throw Error("RS.decode: invalid errors number")
;for(let e=0;e<l.length;e++){const n=t.length-1-ia.log(l[e]);if(n<0)throw Error("RS.decode: invalid error location");const r=ia.inv(l[e]);let o=1;for(let t=0;t<l.length;t++)e!==t&&(o=ia.mul(o,ia.add(1,ia.mul(l[t],r))));t[n]=ia.add(t[n],ia.mul(ia.evalPoly(s,r),ia.inv(o)))}return t}});var c;return{encode(e){const t=[],n=[];for(let a=0;a<o;a++){const o=i+(a<r?0:1);t.push(e.subarray(0,o)),n.push(s.encode(e.subarray(0,o))),e=e.subarray(o)}
const a=Tt(...t),c=Tt(...n),l=new Uint8Array(a.length+c.length);return l.set(a),l.set(c,a.length),l},decode(e){if(e.length!==a)throw Error(`interleave.decode: len(data)=${e.length}, total=${a}`);const t=[];for(let e=0;e<o;e++){const o=e<r;t.push(new Uint8Array(n+i+(o?0:1)))}let c=0;for(let n=0;n<i;n++)for(let r=0;r<o;r++)t[r][n]=e[c++];for(let n=r;n<o;n++)t[n][i]=e[c++];for(let a=i;a<i+n;a++)for(let n=0;n<o;n++){const o=n<r;t[n][a+(o?0:1)]=e[c++]}const l=[]
;for(const e of t)l.push(...Array.from(s.decode(e)).slice(0,-n));return Uint8Array.from(l)}}}function jt(e,t,n,r=!1){const o=ra.size.encode(e);let i=new Ki(o+2);const a=new Ki(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);i=i.embed(0,a).embed({x:-a.width,y:0},a).embed({x:0,y:-a.height},a),i=i.rectSlice(1,o);const s=new Ki(1).rect(0,1,!0).border(1,!1).border(1,!0),c=ra.alignmentPatterns(e);for(const e of c)for(const t of c)void 0===i.data[e][t]&&i.embed({x:t-2,y:e-2},s);i=i.hLine({x:0,
y:6},1/0,(({x:e},t)=>void 0===t?e%2==0:t)).vLine({x:6,y:0},1/0,(({y:e},t)=>void 0===t?e%2==0:t));{const e=ra.formatBits(t,n),a=t=>!r&&1==(e>>t&1);for(let e=0;e<6;e++)i.data[e][8]=a(e);for(let e=6;e<8;e++)i.data[e+1][8]=a(e);for(let e=8;e<15;e++)i.data[o-15+e][8]=a(e);for(let e=0;e<8;e++)i.data[8][o-e-1]=a(e);for(let e=8;e<9;e++)i.data[8][15-e-1+1]=a(e);for(let e=9;e<15;e++)i.data[8][15-e-1]=a(e);i.data[o-8][8]=!r}if(e>=7){const t=ra.versionBits(e);for(let e=0;e<18;e+=1){
const n=!r&&1==(t>>e&1),a=Math.floor(e/3),s=e%3+o-8-3;i.data[a][s]=n,i.data[s][a]=n}}return i}function _t(e,t,n){const r=e.height,o=oa[t];let i=-1,a=r-1;for(let t=r-1;t>0;t-=2){for(6==t&&(t=5);;a+=i){for(let r=0;r<2;r+=1){const i=t-r;void 0===e.data[a][i]&&n(i,a,o(i,a))}if(a+i<0||a+i>=r)break}i=-i}}function Ot(e){let t="numeric";for(let n of e)if(!ra.alphabet.numeric.has(n)&&(t="alphanumeric",!ra.alphabet.alphanumerc.has(n)))return"byte";return t}function Bt(e,t,n,r){let o="",i=n.length
;if("numeric"===r){const e=ra.alphabet.numeric.decode(n.split("")),t=e.length;for(let n=0;n<t-2;n+=3)o+=Et(100*e[n]+10*e[n+1]+e[n+2],10);t%3==1?o+=Et(e[t-1],4):t%3==2&&(o+=Et(10*e[t-2]+e[t-1],7))}else if("alphanumeric"===r){const e=ra.alphabet.alphanumerc.decode(n.split("")),t=e.length;for(let n=0;n<t-1;n+=2)o+=Et(45*e[n]+e[n+1],11);t%2==1&&(o+=Et(e[t-1],6))}else{if("byte"!==r)throw Error("encode: unsupported type");{const e=function(e){
if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(n);i=e.length,o=Array.from(e).map((e=>Et(e,8))).join("")}}const{capacity:a}=ra.capacity(e,t),s=Et(i,ra.lengthBits(e,r));let c=ra.modeBits[r]+s+o;if(c.length>a)throw Error("Capacity overflow");c+="0".repeat(Math.min(4,Math.max(0,a-c.length))),c.length%8&&(c+="0".repeat(8-c.length%8));const l="1110110000010001";for(let e=0;c.length!==a;e++)c+=l[e%16]
;const d=Uint8Array.from(c.match(/(.{8})/g).map((e=>Number("0b"+e))));return Mt(e,t).encode(d)}function Nt(e,t,n,r,o=!1){const i=jt(e,t,r,o);let a=0;const s=8*n.length;if(_t(i,r,((e,t,r)=>{let o=!1;a<s&&(o=!!(n[a>>>3]>>(7-a&7)&1),a++),i.data[t][e]=o!==r})),a!==s)throw Error("QR: bytes left after draw");return i}function Pt(e){const t=e.inverse(),n=e=>{let t=0;for(let n,r=0,o=1;r<e.length;r++)n===e[r]&&(o++,r!==e.length-1)||(o>=5&&(t+=o-5+3),n=e[r],o=1);return t};let r=0
;e.data.forEach((e=>r+=n(e))),t.data.forEach((e=>r+=n(e)));let o=0,i=e.data;const a=e.width-1,s=e.height-1;for(let e=0;e<a;e++)for(let t=0;t<s;t++){const n=e+1,r=t+1;i[e][t]===i[n][t]&&i[n][t]===i[e][r]&&i[n][t]===i[n][r]&&(o+=3)}const c=e=>{const t=[!0,!1,!0,!0,!0,!1,!0],n=[!1,!1,!1,!1],r=[...t,...n],o=[...n,...t];let i=0;for(let t=0;t<e.length;t++)Lt(e,r,t)&&(i+=40),Lt(e,o,t)&&(i+=40);return i};let l=0;for(const t of e.data)l+=c(t);for(const e of t.data)l+=c(e);let d=0
;e.rectRead(0,1/0,((e,t)=>d+=t?1:0));const u=d/(e.height*e.width)*100;return r+o+l+10*Math.floor(Math.abs(u-50)/5)}function Dt(e,t){return as(e,{i:2},t&&t.out,t&&t.dictionary)}var Rt={d:(e,t)=>{for(var n in t)Rt.o(t,n)&&!Rt.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}};Rt.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),
Rt.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Rt.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var Ft={};Rt.r(Ft),Rt.d(Ft,{Decoder:()=>Bn,Encoder:()=>On,PacketType:()=>_n,protocol:()=>jn});const Ht=Object.create(null);Ht.open="0",Ht.close="1",Ht.ping="2",Ht.pong="3",Ht.message="4",Ht.upgrade="5",Ht.noop="6";const Ut=Object.create(null);Object.keys(Ht).forEach((e=>{
Ut[Ht[e]]=e}));const zt={type:"error",data:"parser error"},Wt="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Vt="function"==typeof ArrayBuffer,qt=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Gt=({type:e,data:t},n,r)=>Wt&&t instanceof Blob?n?r(t):Yt(t,r):Vt&&(t instanceof ArrayBuffer||qt(t))?n?r(t):Yt(new Blob([t]),r):r(Ht[e]+(t||"")),Yt=(e,t)=>{const n=new FileReader
;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};let Xt;const Qt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zt="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<64;e++)Zt[Qt.charCodeAt(e)]=e;const Kt="function"==typeof ArrayBuffer,Jt=(e,t)=>{if("string"!=typeof e)return{type:"message",data:en(e,t)};const n=e.charAt(0);return"b"===n?{type:"message",data:$t(e.substring(1),t)}:Ut[n]?e.length>1?{type:Ut[n],
data:e.substring(1)}:{type:Ut[n]}:zt},$t=(e,t)=>{if(Kt){const n=(e=>{let t,n,r,o,i,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);const l=new ArrayBuffer(a),d=new Uint8Array(l);for(t=0;t<s;t+=4)n=Zt[e.charCodeAt(t)],r=Zt[e.charCodeAt(t+1)],o=Zt[e.charCodeAt(t+2)],i=Zt[e.charCodeAt(t+3)],d[c++]=n<<2|r>>4,d[c++]=(15&r)<<4|o>>2,d[c++]=(3&o)<<6|63&i;return l})(e);return en(n,t)}return{base64:!0,data:e}
},en=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer;let tn;o.prototype.on=o.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},o.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},
o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},o.prototype.emit=function(e){
this._callbacks=this._callbacks||{};for(var t=Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t)}return this},o.prototype.emitReserved=o.prototype.emit,o.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},o.prototype.hasListeners=function(e){return!!this.listeners(e).length}
;const nn="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),rn="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),on=rn.setTimeout,an=rn.clearTimeout;class sn extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class cn extends o{constructor(e){super(),this.writable=!1,a(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,
this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new sn(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Jt(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}
onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),
t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class ln extends cn{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){
this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split("\x1e"),r=[];for(let e=0;e<n.length;e++){const o=Jt(n[e],t);if(r.push(o),"error"===o.type)break}return r})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),
"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=Array(n);let o=0;e.forEach(((e,i)=>{Gt(e,!1,(e=>{r[i]=e,++o===n&&t(r.join("\x1e"))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{}
;return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=s()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let dn=!1;try{dn="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(is){}const un=dn;class hn extends ln{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){
const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class pn extends o{constructor(e,t,n){super(),this.createRequest=e,a(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e
;const t=i(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(e){}if("POST"===this._method)try{
n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),
4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"==typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(e){return void this.setTimeoutFn((()=>{this._onError(e)}),0)}"undefined"!=typeof document&&(this._index=pn.requestsCount++,pn.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=c,e)try{
this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete pn.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}pn.requestsCount=0,pn.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",l):"function"==typeof addEventListener&&addEventListener("onpagehide"in rn?"pagehide":"unload",l,!1));const fn=function(){
const e=d({xdomain:!1});return e&&null!==e.responseType}(),mn="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class gn extends cn{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=mn?{}:i(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity")
;this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){
this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;Gt(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(e){}r&&nn((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=s()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}
const bn=rn.WebSocket||rn.MozWebSocket,yn={websocket:class extends gn{createSocket(e,t,n){return mn?new bn(e,t,n):t?new bn(e,t):new bn(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends cn{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),
this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const o=function(e,t){tn||(tn=new TextDecoder);const o=[];let i=0,a=-1,s=!1;return new TransformStream({transform(c,l){for(o.push(c);;){if(0===i){if(n(o)<1)break;const e=r(o,1);s=!(128&~e[0]),a=127&e[0],i=a<126?3:126===a?1:2}else if(1===i){if(n(o)<2)break;const e=r(o,2);a=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),i=3}else if(2===i){if(n(o)<8)break
;const e=r(o,8),t=new DataView(e.buffer,e.byteOffset,e.length),s=t.getUint32(0);if(s>2097151){l.enqueue(zt);break}a=4294967296*s+t.getUint32(4),i=3}else{if(n(o)<a)break;const e=r(o,a);l.enqueue(Jt(s?e:tn.decode(e),t)),i=0}if(0===a||a>e){l.enqueue(zt);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(o).getReader(),a=t();a.readable.pipeTo(e.writable),this._writer=a.writable.getWriter();const s=()=>{i.read().then((({done:e,value:t})=>{e||(this.onPacket(t),s())
})).catch((()=>{}))};s();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then((()=>{r&&nn((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends hn{constructor(e){super(e);const t=e&&e.forceBase64
;this.supportsBinary=fn&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new pn(d,this.uri(),e)}}
},vn=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,wn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],kn="function"==typeof addEventListener&&"function"==typeof removeEventListener,Cn=[]
;kn&&addEventListener("offline",(()=>{Cn.forEach((e=>e()))}),!1);class En extends o{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const n=u(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=u(t.host).host);a(this,t),
this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),
this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let e=0,r=n.length;e<r;e++){let r=n[e].split("=")
;t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}(this.opts.query)),kn&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Cn.push(this._offlineEventListener))),
this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0)
;const e=this.opts.rememberUpgrade&&En.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){
this.readyState="open",En.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":
const t=Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer)
;const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){
const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(e+="string"==typeof(t=r)?function(e){let t=0,n=0;for(let r=0,o=e.length;r<o;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n
}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,nn((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,
t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const o={type:e,data:t,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)}
;return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(En.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){
if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),kn&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=Cn.indexOf(this._offlineEventListener);-1!==e&&Cn.splice(e,1)}this.readyState="closed",this.id=null,
this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}En.protocol=4;class xn extends En{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){function t(){a||(a=!0,l(),i.close(),i=null)}function n(){c("transport closed")}function r(){c("socket closed")}function o(e){i&&e.name!==i.name&&t()}let i=this.createTransport(e),a=!1
;En.priorWebsocketSuccess=!1;const s=()=>{a||(i.send([{type:"ping",data:"probe"}]),i.once("packet",(e=>{if(!a)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",i),!i)return;En.priorWebsocketSuccess="websocket"===i.name,this.transport.pause((()=>{a||"closed"!==this.readyState&&(l(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())}))}else{const e=Error("probe error");e.transport=i.name,
this.emitReserved("upgradeError",e)}})))},c=e=>{const n=Error("probe error: "+e);n.transport=i.name,t(),this.emitReserved("upgradeError",n)},l=()=>{i.removeListener("open",s),i.removeListener("error",c),i.removeListener("close",n),this.off("close",r),this.off("upgrading",o)};i.once("open",s),i.once("error",c),i.once("close",n),this.once("close",r),this.once("upgrading",o),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{a||i.open()}),200):i.open()}
onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class An extends xn{constructor(e,t={}){const n="object"==typeof e?e:t;(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map((e=>yn[e])).filter((e=>!!e))),super(e,n)}}
const Tn="function"==typeof ArrayBuffer,Ln=Object.prototype.toString,Sn="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Ln.call(Blob),In="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Ln.call(File),Mn=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],jn=5;var _n;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",
e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(_n||(_n={}));class On{constructor(e){this.replacer=e}encode(e){return e.type!==_n.EVENT&&e.type!==_n.ACK||!p(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===_n.EVENT?_n.BINARY_EVENT:_n.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==_n.BINARY_EVENT&&e.type!==_n.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),
null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=f(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}class Bn extends o{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===_n.BINARY_EVENT;n||t.type===_n.BINARY_ACK?(t.type=n?_n.EVENT:_n.ACK,this.reconstructor=new Nn(t),
0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!h(e)&&!e.base64)throw Error("Unknown type: "+e);if(!this.reconstructor)throw Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===_n[n.type])throw Error("unknown packet type "+n.type)
;if(n.type===_n.BINARY_EVENT||n.type===_n.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const o=e.substring(r,t);if(o!=Number(o)||"-"!==e.charAt(t))throw Error("Illegal attachments");n.attachments=Number(o)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}
n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!Bn.isPayloadValid(n.type,r))throw Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case _n.CONNECT:return y(t);case _n.DISCONNECT:return void 0===t;case _n.CONNECT_ERROR:return"string"==typeof t||y(t);case _n.EVENT:case _n.BINARY_EVENT:
return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===Mn.indexOf(t[0]));case _n.ACK:case _n.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Nn{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=g(this.reconPack,this.buffers);return this.finishedReconstruction(),e}
return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Pn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Dn extends o{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}
get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[v(e,"open",this.onopen.bind(this)),v(e,"packet",this.onpacket.bind(this)),v(e,"error",this.onerror.bind(this)),v(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),
this.emit.apply(this,e),this}emit(e,...t){var n,r,o;if(Pn.hasOwnProperty(e))throw Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const i={type:_n.EVENT,data:t,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,n=t.pop();this._registerAckCallback(e,n),i.id=e}
const a=null===(r=null===(n=this.io.engine)||void 0===n?void 0:n.transport)||void 0===r?void 0:r.writable,s=this.connected&&!(null===(o=this.io.engine)||void 0===o?void 0:o._hasPingExpired());return this.flags.volatile&&!a||(s?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,t){var n;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t)
;const o=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,Error("operation has timed out"))}),r),i=(...e)=>{this.io.clearTimeoutFn(o),t.apply(this,e)};i.withError=!0,this.acks[e]=i}emitWithAck(e,...t){return new Promise(((n,r)=>{const o=(e,t)=>e?r(e):n(t);o.withError=!0,t.push(o),this.emit(e,...t)}))}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const n={
id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(((e,...r)=>{if(n===this._queue[0])return null!==e?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue()})),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,
this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:_n.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){
Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>t.id+""===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case _n.CONNECT:
e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case _n.EVENT:case _n.BINARY_EVENT:this.onevent(e);break;case _n.ACK:case _n.BINARY_ACK:this.onack(e);break;case _n.DISCONNECT:this.ondisconnect();break;case _n.CONNECT_ERROR:this.destroy()
;const t=Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1
;return function(...r){n||(n=!0,t.packet({type:_n.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{
this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:_n.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}
timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){
return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){
return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}w.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},w.prototype.reset=function(){this.attempts=0},
w.prototype.setMin=function(e){this.ms=e},w.prototype.setMax=function(e){this.max=e},w.prototype.setJitter=function(e){this.jitter=e};class Rn extends o{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,a(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),
this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new w({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||Ft;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){
return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,
null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new An(this.uri,this.opts)
;const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=v(t,"open",(function(){n.onopen(),e&&e()})),o=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},i=v(t,"error",o);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{r(),o(Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(r),this.subs.push(i),this}
connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(v(e,"ping",this.onping.bind(this)),v(e,"data",this.ondata.bind(this)),v(e,"error",this.onerror.bind(this)),v(e,"close",this.onclose.bind(this)),v(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){nn((()=>{this.emitReserved("packet",e)
}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Dn(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t)if(this.nsps[e].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,
this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),
this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),
this.emitReserved("reconnect",e)}}const Fn={};Object.assign(k,{Manager:Rn,Socket:Dn,io:k,connect:k});const Hn=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296==(64512&o)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t
},Un={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_()
;const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const o=e[t],i=t+1<e.length,a=i?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=o>>2,d=(3&o)<<4|a>>4;let u=(15&a)<<2|c>>6,h=63&c;s||(h=64,i||(u=64)),r.push(n[l],n[d],n[u],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Hn(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const o=e[n++]
;if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const i=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){const i=((7&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_()
;const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const o=n[e.charAt(t++)],i=t<e.length?n[e.charAt(t)]:0;++t;const a=t<e.length?n[e.charAt(t)]:64;++t;const s=t<e.length?n[e.charAt(t)]:64;if(++t,null==o||null==i||null==a||null==s)throw new zn;const c=o<<2|i>>4;if(r.push(c),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==s){const e=a<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},
this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}}
;class zn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Wn=function(e){return function(e){const t=Hn(e);return Un.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Vn=function(e){try{return Un.decodeString(e,!0)}catch(e){}return null},qn=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==Rt.g)return Rt.g;throw Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Gn=()=>{try{
return qn()||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&Vn(e[1]);return t&&JSON.parse(t)})()}catch(e){return}},Yn=()=>{var e;return null===(e=Gn())||void 0===e?void 0:e.config};class Xn{constructor(){this.reject=()=>{},this.resolve=()=>{},
this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}class Qn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zn.prototype.create)}}class Zn{constructor(e,t,n){this.service=e,this.serviceName=t,
this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],i=o?function(e,t){return e.replace(Kn,((e,n)=>{const r=t[n];return null!=r?r+"":`<${n}?>`}))}(o,n):"Error",a=`${this.serviceName}: ${i} (${r}).`;return new Qn(r,a,n)}}const Kn=/\{\$([^}]+)}/g;class Jn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){
return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const $n="[DEFAULT]";class er{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e)
;if(!this.instancesDeferred.has(t)){const e=new Xn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null
;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{
this.getOrInitializeService({instanceIdentifier:$n})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=$n){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values())
;await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=$n){return this.instances.has(e)}getOptions(e=$n){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`)
;if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),o=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);const i=this.instances.get(r);return i&&e(i,r),()=>{
o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===$n?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{
this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=$n){return this.component?this.component.multipleInstances?e:$n:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class tr{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`)
;t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new er(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const nr=[];var rr;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(rr||(rr={}))
;const or={debug:rr.DEBUG,verbose:rr.VERBOSE,info:rr.INFO,warn:rr.WARN,error:rr.ERROR,silent:rr.SILENT},ir=rr.INFO,ar={[rr.DEBUG]:"log",[rr.VERBOSE]:"log",[rr.INFO]:"info",[rr.WARN]:"warn",[rr.ERROR]:"error"},sr=(e,t)=>{if(!(t<e.logLevel||((new Date).toISOString(),ar[t])))throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class cr{constructor(e){this.name=e,this._logLevel=ir,this._logHandler=sr,this._userLogHandler=null,nr.push(this)}get logLevel(){
return this._logLevel}set logLevel(e){if(!(e in rr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?or[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){
this._userLogHandler&&this._userLogHandler(this,rr.DEBUG,...e),this._logHandler(this,rr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rr.VERBOSE,...e),this._logHandler(this,rr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rr.INFO,...e),this._logHandler(this,rr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rr.WARN,...e),this._logHandler(this,rr.WARN,...e)}error(...e){
this._userLogHandler&&this._userLogHandler(this,rr.ERROR,...e),this._logHandler(this,rr.ERROR,...e)}}let lr,dr;const ur=new WeakMap,hr=new WeakMap,pr=new WeakMap,fr=new WeakMap,mr=new WeakMap;let gr={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return hr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||pr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return M(e[t])},set:(e,t,n)=>(e[t]=n,!0),
has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};const br=e=>mr.get(e),yr=["get","getKey","getAll","getAllKeys","count"],vr=["put","add","delete","clear"],wr=new Map;var kr;kr=gr,gr={...kr,get:(e,t,n)=>_(e,t)||kr.get(e,t,n),has:(e,t)=>!!_(e,t)||kr.has(e,t)};class Cr{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){
const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}
const Er="@firebase/app",xr="0.10.17",Ar=new cr("@firebase/app"),Tr="@firebase/app-compat",Lr="@firebase/analytics-compat",Sr="@firebase/analytics",Ir="@firebase/app-check-compat",Mr="@firebase/app-check",jr="@firebase/auth",_r="@firebase/auth-compat",Or="@firebase/database",Br="@firebase/data-connect",Nr="@firebase/database-compat",Pr="@firebase/functions",Dr="@firebase/functions-compat",Rr="@firebase/installations",Fr="@firebase/installations-compat",Hr="@firebase/messaging",Ur="@firebase/messaging-compat",zr="@firebase/performance",Wr="@firebase/performance-compat",Vr="@firebase/remote-config",qr="@firebase/remote-config-compat",Gr="@firebase/storage",Yr="@firebase/storage-compat",Xr="@firebase/firestore",Qr="@firebase/vertexai",Zr="@firebase/firestore-compat",Kr="firebase",Jr="[DEFAULT]",$r={
[Er]:"fire-core",[Tr]:"fire-core-compat",[Sr]:"fire-analytics",[Lr]:"fire-analytics-compat",[Mr]:"fire-app-check",[Ir]:"fire-app-check-compat",[jr]:"fire-auth",[_r]:"fire-auth-compat",[Or]:"fire-rtdb",[Br]:"fire-data-connect",[Nr]:"fire-rtdb-compat",[Pr]:"fire-fn",[Dr]:"fire-fn-compat",[Rr]:"fire-iid",[Fr]:"fire-iid-compat",[Hr]:"fire-fcm",[Ur]:"fire-fcm-compat",[zr]:"fire-perf",[Wr]:"fire-perf-compat",[Vr]:"fire-rc",[qr]:"fire-rc-compat",[Gr]:"fire-gcs",[Yr]:"fire-gcs-compat",[Xr]:"fire-fst",
[Zr]:"fire-fst-compat",[Qr]:"fire-vertex","fire-js":"fire-js",[Kr]:"fire-js-all"},eo=new Map,to=new Map,no=new Map,ro=new Zn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted",
"no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",
"idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class oo{constructor(e,t,n){this._isDeleted=!1,
this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Jn("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}
get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ro.create("app-deleted",{appName:this._name})}}const io="firebase-heartbeat-store";let ao=null;class so{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate()
;this._storage=new co(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=U();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return
;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(e){Ar.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,
null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=U(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const o of e){const e=n.find((e=>e.agent===o.agent));if(e){if(e.dates.push(o.date),z(n)>t){e.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),z(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}
}(this._heartbeatsCache.heartbeats),o=Wn(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ar.warn(e),""}}}class co{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){
return!!C()&&E().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await R()).transaction(io),n=await t.objectStore(io).get(H(e));return await t.done,n}catch(e){if(e instanceof Qn)Ar.warn(e.message);else{const t=ro.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Ar.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t
;if(await this._canUseIndexedDBPromise){const n=await this.read();return F(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return F(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}var lo;lo="",
B(new Jn("platform-logger",(e=>new Cr(e)),"PRIVATE")),B(new Jn("heartbeat",(e=>new so(e)),"PRIVATE")),D(Er,xr,lo),D(Er,xr,"esm2017"),D("fire-js",""),D("firebase","11.1.0","app");const uo="@firebase/installations",ho="0.6.11",po=1e4,fo="w:"+ho,mo="FIS_v2",go=new Zn("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.",
"request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."}),bo=/^[cdef][\w-]{21}$/,yo=new Map;let vo=null;const wo="firebase-installations-store";let ko=null;const Co="installations",Eo=e=>{const t=N(e.getProvider("app").getImmediate(),Co).getImmediate();return{
getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await se(t);return r?r.catch(console.error):he(t).catch(console.error),n.fid}(t),getToken:e=>me(t,e)}};B(new Jn(Co,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw ge("App Configuration");if(!e.name)throw ge("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw ge(n);return{appName:e.name,projectId:e.options.projectId,
apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:N(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),B(new Jn("installations-internal",Eo,"PRIVATE")),D(uo,ho),D(uo,ho,"esm2017");const xo="analytics",Ao="https://www.googletagmanager.com/gtag/js",To=new cr("@firebase/analytics"),Lo=new Zn("analytics","Analytics",{
"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.",
"already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}",
"invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",
"fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',
"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."}),So=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){
delete this.throttleMetadata[e]}};class Io{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Mo,jo;class _o{constructor(e){this.app=e}_delete(){return delete Oo[this.app.options.appId],Promise.resolve()}}let Oo={},Bo=[];const No={};let Po,Do,Ro="dataLayer",Fo="gtag",Ho=!1;const Uo="@firebase/analytics",zo="0.10.10"
;B(new Jn(xo,((e,{options:t})=>Se(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),B(new Jn("analytics-internal",(function(e){try{const t=e.getProvider(xo).getImmediate();return{logEvent:(e,n,r)=>Me(t,e,n,r)}}catch(e){throw Lo.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),D(Uo,zo),D(Uo,zo,"esm2017")
;const Wo="emoji",Vo="keyvalue",qo="favorites",Go="tokens",Yo="count",Xo="group-order",Qo="eTag",Zo="url",Ko="skinTone",Jo="readonly",$o="readwrite",ei="skinUnicodes",ti={},ni={},ri={},oi=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]),ii=["name","url"],ai="undefined"!=typeof wrappedJSObject,si=["annotation","emoji","group","order","version"];class ci{
constructor({dataSource:e="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",locale:t="en",customEmoji:n=[]}={}){this.dataSource=e,this.locale=t,this._dbName="emoji-picker-element-"+this.locale,this._db=void 0,this._lazyUpdate=void 0,this._custom=Qe(n),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const e=this._db=await(t=this._dbName,ni[t]||(ni[t]=Ne(t)),ni[t]);var t;!function(e,t){let n=ri[e];n||(n=ri[e]=[]),n.push(t)
}(this._dbName,this._clear);const n=this.dataSource,r=await async function(e){return!await Xe(e,Vo,Zo)}(e);r?await async function(e,t){let[n,r]=await Je(t);n||(n=await $e(r)),await qe(e,r,t,n)}(e,n):this._lazyUpdate=et(e,n)}async ready(){const e=async()=>(this._ready||(this._ready=this._init()),this._ready);await e(),this._db||await e()}async getEmojiByGroup(e){return _e(e),await this.ready(),Oe(await async function(e,t){return Pe(e,Wo,Jo,((e,n,r)=>{const o=IDBKeyRange.bound([t,0],[t+1,0],!1,!0)
;ze(e.index(Xo),o,r)}))}(this._db,e)).map(Ze)}async getEmojiBySearchQuery(e){return je(e),await this.ready(),[...this._custom.search(e),...Oe(await Ge(this._db,e)).map(Ze)]}async getEmojiByShortcode(e){je(e),await this.ready();const t=this._custom.byShortcode(e);return t||Ze(await Ye(this._db,e))}async getEmojiByUnicodeOrName(e){je(e),await this.ready();const t=this._custom.byName(e);return t||Ze(await async function(e,t){return Pe(e,Wo,Jo,((e,n,r)=>Ue(e,t,(n=>{if(n)return r(n)
;Ue(e.index(ei),t,(e=>r(e||null)))}))))}(this._db,e))}async getPreferredSkinTone(){return await this.ready(),await Xe(this._db,Vo,Ko)||0}async setPreferredSkinTone(e){return _e(e),await this.ready(),function(e,t,n,r){return Pe(e,t,$o,((e,t)=>{e.put(r,n),We(t)}))}(this._db,Vo,Ko,e)}async incrementFavoriteEmojiCount(e){return je(e),await this.ready(),t=this._db,n=e,Pe(t,qo,$o,((e,t)=>Ue(e,n,(r=>{e.put((r||0)+1,n),We(t)}))));var t,n}async getTopFavoriteEmoji(e){return _e(e),await this.ready(),
(await function(e,t,n){return 0===n?[]:Pe(e,[qo,Wo],Jo,(([e,r],o,i)=>{const a=[];e.index(Yo).openCursor(void 0,"prev").onsuccess=e=>{function o(e){if(a.push(e),a.length===n)return i(a);s.continue()}const s=e.target.result;if(!s)return i(a);const c=s.primaryKey,l=t.byName(c);if(l)return o(l);Ue(r,c,(e=>{if(e)return o(e);s.continue()}))}}))}(this._db,this._custom,e)).map(Ze)}set customEmoji(e){this._custom=Qe(e)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{
await this._lazyUpdate}catch(e){}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await De(this._dbName)}async delete(){var e;await this._shutdown(),await(e=this._dbName,new Promise(((t,n)=>{De(e),Be(t,n,indexedDB.deleteDatabase(e))})))}}
const li=[[-1,"\u2728","custom"],[0,"\u{1f600}","smileys-emotion"],[1,"\u{1f44b}","people-body"],[3,"\u{1f431}","animals-nature"],[4,"\u{1f34e}","food-drink"],[5,"\u{1f3e0}\ufe0f","travel-places"],[6,"\u26bd","activities"],[7,"\u{1f4dd}","objects"],[8,"\u26d4\ufe0f","symbols"],[9,"\u{1f3c1}","flags"]].map((([e,t,n])=>({id:e,emoji:t,name:n}))),di=li.slice(1),ui="function"==typeof requestIdleCallback?requestIdleCallback:setTimeout,hi={"\u{1fae9}":16,"\u{1fae8}":15.1,"\u{1fae0}":14,
"\u{1f972}":13.1,"\u{1f97b}":12.1,"\u{1f970}":11,"\u{1f929}":5,"\u{1f471}\u200d\u2640\ufe0f":4,"\u{1f923}":3,"\u{1f441}\ufe0f\u200d\u{1f5e8}\ufe0f":2,"\u{1f600}":1,"\u{1f610}\ufe0f":.7,"\u{1f603}":.6
},pi=["\u{1f60a}","\u{1f612}","\u2764\ufe0f","\u{1f44d}\ufe0f","\u{1f60d}","\u{1f602}","\u{1f62d}","\u263a\ufe0f","\u{1f614}","\u{1f629}","\u{1f60f}","\u{1f495}","\u{1f64c}","\u{1f618}"],fi='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',mi=(e,t)=>e<t?-1:e>t?1:0,gi=(e,t)=>{const n=document.createElement("canvas");n.width=n.height=1;const r=n.getContext("2d",{willReadFrequently:!0})
;return r.textBaseline="top",r.font="100px "+fi,r.fillStyle=t,r.scale(.01,.01),r.fillText(e,0,0),r.getImageData(0,0,1,1).data};let bi;const yi=()=>(bi||(bi=new Promise((e=>ui((()=>e(function(){const e=Object.entries(hi);try{for(const[t,n]of e)if(nt(t))return n}catch(e){}return e[0][1]}())))))),bi),vi=new Map,wi=requestAnimationFrame;let ki,Ci="function"==typeof ResizeObserver
;const Ei=new WeakMap,xi=new WeakMap,Ai=Symbol("un-keyed"),Ti="replaceChildren"in Element.prototype,Li="function"==typeof queueMicrotask?queueMicrotask:e=>Promise.resolve().then(e),Si=new WeakMap,Ii=[],{assign:Mi}=Object;var ji={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading\u2026",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",
searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons",
"people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const _i=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji","emojiVersion"],Oi=`:host{--emoji-font-family:${fi}}`;class Bi extends HTMLElement{constructor(e){super(),this.attachShadow({mode:"open"});const t=document.createElement("style")
;t.textContent=':host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--border-radius:0;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){color-scheme:light;--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);border-radius:var(--border-radius);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;scrollbar-gutter:stable;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.emoji-menu.visibility-auto{content-visibility:auto;contain-intrinsic-size:calc(var(--num-columns)*var(--total-emoji-size)) calc(var(--num-rows)*var(--total-emoji-size))}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;height:var(--total-emoji-size);width:var(--total-emoji-size);line-height:1;overflow:hidden;font-family:var(--emoji-font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.onscreen .custom-emoji::after{content:"";width:var(--emoji-size);height:var(--emoji-size);background-repeat:no-repeat;background-position:center center;background-size:contain;background-image:var(--custom-emoji-background)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{overflow-y:auto;scrollbar-gutter:stable;display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}'+Oi,
this.shadowRoot.appendChild(t),this._ctx={locale:"en",dataSource:"https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",skinToneEmoji:"\u{1f590}\ufe0f",customCategorySorting:mi,customEmoji:null,i18n:ji,emojiVersion:null,...e};for(const e of _i)"database"!==e&&Object.prototype.hasOwnProperty.call(this,e)&&(this._ctx[e]=this[e],delete this[e]);this._dbFlush()}connectedCallback(){this._cmp||(this._cmp=mt(this.shadowRoot,this._ctx))}disconnectedCallback(){Li((()=>{
if(!this.isConnected&&this._cmp){this._cmp.$destroy(),this._cmp=void 0;const{database:e}=this._ctx;e.close().catch((()=>{}))}}))}static get observedAttributes(){return["locale","data-source","skin-tone-emoji","emoji-version"]}attributeChangedCallback(e,t,n){this._set(e.replace(/-([a-z])/g,((e,t)=>t.toUpperCase())),"emoji-version"===e?parseFloat(n):n)}_set(e,t){this._ctx[e]=t,this._cmp&&this._cmp.$set({[e]:t}),["locale","dataSource"].includes(e)&&this._dbFlush()}_dbCreate(){
const{locale:e,dataSource:t,database:n}=this._ctx;n&&n.locale===e&&n.dataSource===t||this._set("database",new ci({locale:e,dataSource:t}))}_dbFlush(){Li((()=>this._dbCreate()))}}const Ni={};for(const e of _i)Ni[e]={get(){return"database"===e&&this._dbCreate(),this._ctx[e]},set(t){if("database"===e)throw Error("database is read-only");this._set(e,t)}};Object.defineProperties(Bi.prototype,Ni),customElements.get("emoji-picker")||customElements.define("emoji-picker",Bi)
;var Pi,Di,Ri=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},Fi=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter")
;if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Pi=new WeakMap,Di=new WeakMap;const Hi=class{constructor(e,t){Pi.set(this,void 0),Di.set(this,void 0),Ri(this,Pi,ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e),"f"),Ri(this,Di,t||0,"f")}read(){var e,t;return Fi(this,Pi,"f")[(Ri(this,Di,(t=Fi(this,Di,"f"),e=t++,
t),"f"),e)]}readNBytes(e){return Fi(this,Pi,"f").subarray(Fi(this,Di,"f"),Ri(this,Di,Fi(this,Di,"f")+e,"f"))}readNBytesDV(e){const t=Fi(this,Pi,"f").subarray(Fi(this,Di,"f"),Ri(this,Di,Fi(this,Di,"f")+e,"f"));return new DataView(t.buffer,t.byteOffset,t.byteLength)}};var Ui,zi,Wi=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter")
;if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},Vi=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter")
;if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n};Ui=new WeakMap,zi=new WeakMap;const qi=class{constructor(){Ui.set(this,[]),zi.set(this,0)}write(e){if("number"==typeof e)Wi(this,Ui,"f").push(e),Vi(this,zi,Wi(this,zi,"f")+1,"f");else if(Array.isArray(e)){const t=Uint8Array.from(e);Wi(this,Ui,"f").push(t),Vi(this,zi,Wi(this,zi,"f")+t.byteLength,"f")
}else if(ArrayBuffer.isView(e)){const t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);Wi(this,Ui,"f").push(t),Vi(this,zi,Wi(this,zi,"f")+t.byteLength,"f")}else{const t=new Uint8Array(e);Wi(this,Ui,"f").push(t),Vi(this,zi,Wi(this,zi,"f")+t.byteLength,"f")}}toBuffer(){const e=new Uint8Array(Wi(this,zi,"f"));let t=0;for(const n of Wi(this,Ui,"f"))"number"!=typeof n?(e.set(n,t),t+=n.byteLength):e[t++]=n;return e}},Gi=Object.freeze(Object.create(null,{encode:{value:function(e){
if("object"!=typeof e||null==e)throw Error("Data must be a non-null object or array.");const t=new qi;return t.write(Uint8Array.of(128,99,98,106,102,2)),wt(t,e),t.toBuffer().buffer},writable:!1,enumerable:!1,configurable:!1},decode:{value:function(e){if(Array.isArray(e)||"function"==typeof e[Symbol.iterator])e=Uint8Array.from(e);else if(bt(e))e=new Uint8Array(e);else{if(!ArrayBuffer.isView(e))throw Error("Data must be a Uint8Array or ArrayBuffer object.")
;e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}if(128!==e[0]||99!==e[1]||98!==e[2]||106!==e[3]||102!==e[4]||2!==e[5])throw Error("Parse Error: Invalid magic value");return kt(new Hi(e,6))},writable:!1,enumerable:!1,configurable:!1},[Symbol.toStringTag]:{value:"NettleDB",writable:!1,enumerable:!1,configurable:!1}
})),Yi="object"==typeof globalThis&&null!=globalThis?globalThis:"object"==typeof window&&null!=window?window:"object"==typeof global&&null!=global?global:"object"==typeof self&&null!=self?self:Function("return this;")();"object"==typeof Yi&&null!=Yi&&Object.defineProperty(Yi,"NettleDB",{value:Gi,writable:!1,enumerable:!1,configurable:!1});const Xi=Gi,Qi=10,Zi=27;class Ki{static size(e,t){if("number"==typeof e&&(e={height:e,width:e}),
!Number.isSafeInteger(e.height)&&e.height!==1/0)throw Error(`Bitmap: invalid height=${e.height} (${typeof e.height})`);if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw Error(`Bitmap: invalid width=${e.width} (${typeof e.width})`);return void 0!==t&&(e={width:Math.min(e.width,t.width),height:Math.min(e.height,t.height)}),e}static fromString(e){const t=(e=e.replace(/^\n+/g,"").replace(/\n+$/g,"")).split(String.fromCharCode(Qi)),n=t.length,r=Array(n);let o;for(const e of t){
const t=e.split("").map((e=>{if("X"===e)return!0;if(" "===e)return!1;if("?"!==e)throw Error("Bitmap.fromString: unknown symbol="+e)}));if(o&&t.length!==o)throw Error(`Bitmap.fromString different row sizes: width=${o} cur=${t.length}`);o=t.length,r.push(t)}return o||(o=0),new Ki({height:n,width:o},r)}constructor(e,t){const{height:n,width:r}=Ki.size(e);this.data=t||Array.from({length:n},(()=>At(r,void 0))),this.height=n,this.width=r}point(e){return this.data[e.y][e.x]}isInside(e){
return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}size(e){if(!e)return{height:this.height,width:this.width};const{x:t,y:n}=this.xy(e);return{height:this.height-n,width:this.width-t}}xy(e){if("number"==typeof e&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw Error("Bitmap: invalid x="+e.x);if(!Number.isSafeInteger(e.y))throw Error("Bitmap: invalid y="+e.y);return e.x=xt(e.x,this.width),e.y=xt(e.y,this.height),e}rect(e,t,n){const{x:r,y:o}=this.xy(e),{height:i,width:a}=Ki.size(t,this.size({
x:r,y:o}));for(let e=0;e<i;e++)for(let t=0;t<a;t++)this.data[o+e][r+t]="function"==typeof n?n({x:t,y:e},this.data[o+e][r+t]):n;return this}rectRead(e,t,n){return this.rect(e,t,((e,t)=>(n(e,t),t)))}hLine(e,t,n){return this.rect(e,{width:t,height:1},n)}vLine(e,t,n){return this.rect(e,{width:1,height:t},n)}border(e=2,t){const n=this.height+2*e,r=this.width+2*e,o=At(e,t),i=Array.from({length:e},(()=>At(r,t)));return new Ki({height:n,width:r},[...i,...this.data.map((e=>[...o,...e,...o])),...i])}
embed(e,t){return this.rect(e,t.size(),(({x:e,y:n})=>t.data[n][e]))}rectSlice(e,t=this.size()){const n=new Ki(Ki.size(t,this.size(this.xy(e))));return this.rect(e,t,(({x:e,y:t},r)=>n.data[t][e]=r)),n}inverse(){const{height:e,width:t}=this;return new Ki({height:t,width:e}).rect({x:0,y:0},1/0,(({x:e,y:t})=>this.data[e][t]))}scale(e){if(!Number.isSafeInteger(e)||e>1024)throw Error("invalid scale factor: "+e);const{height:t,width:n}=this;return new Ki({height:e*t,width:e*n}).rect({x:0,y:0
},1/0,(({x:t,y:n})=>this.data[Math.floor(n/e)][Math.floor(t/e)]))}clone(){return new Ki(this.size()).rect({x:0,y:0},this.size(),(({x:e,y:t})=>this.data[t][e]))}assertDrawn(){this.rectRead(0,1/0,((e,t)=>{if("boolean"!=typeof t)throw Error("Invalid color type="+typeof t)}))}toString(){return this.data.map((e=>e.map((e=>void 0===e?"?":e?"X":" ")).join(""))).join(String.fromCharCode(Qi))}toASCII(){const{height:e,width:t,data:n}=this;let r="";for(let o=0;o<e;o+=2){for(let i=0;i<t;i++){
const t=n[o][i],a=o+1>=e||n[o+1][i];t||a?!t&&a?r+="\u2580":t&&!a?r+="\u2584":t&&a&&(r+=" "):r+="\u2588"}r+=String.fromCharCode(Qi)}return r}toTerm(){const e=String.fromCharCode(Zi),t=e+"[0m",n=e+"[1;47m  "+t,r=e+"[40m  "+t;return this.data.map((e=>e.map((e=>e?r:n)).join(""))).join(String.fromCharCode(Qi))}toSVG(){let e=`<svg xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 ${this.width} ${this.height}" version="1.1" xmlns="http://www.w3.org/2000/svg">`
;return this.rectRead(0,1/0,(({x:t,y:n},r)=>{r&&(e+=`<rect x="${t}" y="${n}" width="1" height="1" />`)})),e+="</svg>",e}toGIF(){const e=e=>[255&e,e>>>8&255],t=[...e(this.width),...e(this.height)],n=[];this.rectRead(0,1/0,((e,t)=>n.push(+(!0===t))));const r=126,o=[71,73,70,56,55,97,...t,246,0,0,255,255,255,...At(381,0),44,0,0,0,0,...t,0,7],i=Math.floor(n.length/r);for(let e=0;e<i;e++)o.push(127,128,...n.slice(r*e,r*(e+1)).map((e=>+e)));return o.push(n.length%r+1,128,...n.slice(i*r).map((e=>+e))),
o.push(1,129,0,59),new Uint8Array(o)}toImage(e=!1){const{height:t,width:n}=this.size(),r=new Uint8Array(t*n*(e?3:4));let o=0;for(let i=0;i<t;i++)for(let t=0;t<n;t++){const n=this.data[i][t]?0:255;r[o++]=n,r[o++]=n,r[o++]=n,e||(r[o++]=255)}return{height:t,width:n,data:r}}}
const Ji=["low","medium","quartile","high"],$i=["numeric","alphanumeric","byte","kanji","eci"],ea=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],ta={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],
medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},na={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],
medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},ra={size:{encode:e=>21+4*(e-1),decode:e=>(e-17)/4},sizeType:e=>Math.floor((e+7)/17),alignmentPatterns(e){if(1===e)return[]
;const t=ra.size.encode(e)-6-1,n=t-6,r=Math.ceil(n/28);let o=Math.floor(n/r);o%2?o+=1:n%r*2>=r&&(o+=2);const i=[6];for(let e=1;e<r;e++)i.push(t-(r-e)*o);return i.push(t),i},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(e,t){const n=ra.ECCode[e]<<3|t;let r=n;for(let e=0;e<10;e++)r=r<<1^1335*(r>>9);return(n<<10|r)^ra.formatMask},versionBits(e){let t=e;for(let e=0;e<12;e++)t=t<<1^7973*(t>>11);return e<<12|t},alphabet:{numeric:It("0123456789"),
alphanumerc:It("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits:(e,t)=>({numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]}[t][ra.sizeType(e)]),modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(e,t){const n=ea[e-1],r=ta[t][e-1],o=na[t][e-1],i=Math.floor(n/o)-r,a=o-n%o;return{words:r,numBlocks:o,shortBlocks:a,blockLen:i,capacity:8*(n-r*o),total:(r+i)*o+o-a}}
},oa=[(e,t)=>(e+t)%2==0,(e,t)=>t%2==0,e=>e%3==0,(e,t)=>(e+t)%3==0,(e,t)=>(Math.floor(t/2)+Math.floor(e/3))%2==0,(e,t)=>e*t%2+e*t%3==0,(e,t)=>(e*t%2+e*t%3)%2==0,(e,t)=>((e+t)%2+e*t%3)%2==0],ia={tables:(()=>{const e=At(256,0),t=At(256,0);for(let n=0,r=1;n<256;n++)e[n]=r,t[r]=n,r<<=1,256&r&&(r^=285);return{exp:e,log:t}})(),exp:e=>ia.tables.exp[e],log(e){if(0===e)throw Error("GF.log: invalid arg="+e);return ia.tables.log[e]%255},
mul:(e,t)=>0===e||0===t?0:ia.tables.exp[(ia.tables.log[e]+ia.tables.log[t])%255],add:(e,t)=>e^t,pow:(e,t)=>ia.tables.exp[ia.tables.log[e]*t%255],inv(e){if(0===e)throw Error("GF.inverse: invalid arg="+e);return ia.tables.exp[255-ia.tables.log[e]]},polynomial(e){if(0==e.length)throw Error("GF.polymomial: invalid length");if(0!==e[0])return e;let t=0;for(;t<e.length-1&&0==e[t];t++);return e.slice(t)},monomial(e,t){if(e<0)throw Error("GF.monomial: invalid degree="+e);if(0==t)return[0]
;let n=At(e+1,0);return n[0]=t,ia.polynomial(n)},degree:e=>e.length-1,coefficient:(e,t)=>e[ia.degree(e)-t],mulPoly(e,t){if(0===e[0]||0===t[0])return[0];const n=At(e.length+t.length-1,0);for(let r=0;r<e.length;r++)for(let o=0;o<t.length;o++)n[r+o]=ia.add(n[r+o],ia.mul(e[r],t[o]));return ia.polynomial(n)},mulPolyScalar(e,t){if(0==t)return[0];if(1==t)return e;const n=At(e.length,0);for(let r=0;r<e.length;r++)n[r]=ia.mul(e[r],t);return ia.polynomial(n)},mulPolyMonomial(e,t,n){
if(t<0)throw Error("GF.mulPolyMonomial: invalid degree");if(0==n)return[0];const r=At(e.length+t,0);for(let t=0;t<e.length;t++)r[t]=ia.mul(e[t],n);return ia.polynomial(r)},addPoly(e,t){if(0===e[0])return t;if(0===t[0])return e;let n=e,r=t;n.length>r.length&&([n,r]=[r,n]);let o=At(r.length,0),i=r.length-n.length,a=r.slice(0,i);for(let e=0;e<a.length;e++)o[e]=a[e];for(let e=i;e<r.length;e++)o[e]=ia.add(n[e-i],r[e]);return ia.polynomial(o)},remainderPoly(e,t){const n=Array.from(e)
;for(let r=0;r<e.length-t.length+1;r++){const e=n[r];if(0!==e)for(let o=1;o<t.length;o++)0!==t[o]&&(n[r+o]=ia.add(n[r+o],ia.mul(t[o],e)))}return n.slice(e.length-t.length+1,n.length)},divisorPoly(e){let t=[1];for(let n=0;n<e;n++)t=ia.mulPoly(t,[1,ia.pow(2,n)]);return t},evalPoly(e,t){if(0==t)return ia.coefficient(e,0);let n=e[0];for(let r=1;r<e.length;r++)n=ia.add(ia.mul(t,n),e[r]);return n},euclidian(e,t,n){ia.degree(e)<ia.degree(t)&&([e,t]=[t,e]);let r=e,o=t,i=[0],a=[1]
;for(;2*ia.degree(o)>=n;){let e=r,t=i;if(r=o,i=a,0===r[0])throw Error("rLast[0] === 0");o=e;let n=[0];const s=ia.inv(r[0]);for(;ia.degree(o)>=ia.degree(r)&&0!==o[0];){const e=ia.degree(o)-ia.degree(r),t=ia.mul(o[0],s);n=ia.addPoly(n,ia.monomial(e,t)),o=ia.addPoly(o,ia.mulPolyMonomial(r,e,t))}if(n=ia.mulPoly(n,i),a=ia.addPoly(n,t),ia.degree(o)>=ia.degree(r))throw Error(`Division failed r: ${o}, rLast: ${r}`)}const s=ia.coefficient(a,0);if(0==s)throw Error("sigmaTilde(0) was zero")
;const c=ia.inv(s);return[ia.mulPolyScalar(a,c),ia.mulPolyScalar(o,c)]}},aa=function(e,t="raw",n={}){const r=void 0!==n.ecc?n.ecc:"medium";!function(e){if(!Ji.includes(e))throw Error(`Invalid error correction mode=${e}. Expected: ${Ji}`)}(r);const o=void 0!==n.encoding?n.encoding:Ot(e);!function(e){if(!$i.includes(e))throw Error(`Encoding: invalid mode=${e}. Expected: ${$i}`);if("kanji"===e||"eci"===e)throw Error(`Encoding: ${e} is not supported (yet?).`)}(o),void 0!==n.mask&&function(e){
if(![0,1,2,3,4,5,6,7].includes(e)||!oa[e])throw Error(`Invalid mask=${e}. Expected number [0..7]`)}(n.mask);let i,a=n.version,s=Error("Unknown error");if(void 0!==a)Ct(a),i=Bt(a,r,e,o);else for(let t=1;t<=40;t++)try{i=Bt(t,r,e,o),a=t;break}catch(e){s=e}if(!a||!i)throw s;let c=function(e,t,n,r){if(void 0===r){const o=St();for(let r=0;r<oa.length;r++)o.add(Pt(Nt(e,t,n,r,!0)),r);r=o.get()}if(void 0===r)throw Error("Cannot find mask");return Nt(e,t,n,r)}(a,r,i,n.mask);c.assertDrawn()
;const l=void 0===n.border?2:n.border;if(!Number.isSafeInteger(l))throw Error("invalid border type="+typeof l);if(c=c.border(l,!1),void 0!==n.scale&&(c=c.scale(n.scale)),"raw"===t)return c.data;if("ascii"===t)return c.toASCII();if("svg"===t)return c.toSVG();if("gif"===t)return c.toGIF();if("term"===t)return c.toTerm();throw Error("Unknown output: "+t)},sa=function(){for(let e=Object.getPrototypeOf(this);null!=e;e=Object.getPrototypeOf(e))try{delete e.constructor}catch(e){}
},ca=Object.freeze(Object.create(null));Object.defineProperty(sa,"prototype",{value:ca,writable:!1,enumerable:!1,configurable:!1}),Object.setPrototypeOf(sa,null),Object.freeze(sa);const la=sa;var da,ua=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}
;da=new WeakMap;const ha=class extends la{constructor(){super(...arguments),da.set(this,Object.create(null))}get size(){return Object.keys(ua(this,da,"f")).length}has(e){return e in ua(this,da,"f")}get(e){return ua(this,da,"f")[e]||null}set(e,t){ua(this,da,"f")[e]=t}delete(e){return delete ua(this,da,"f")[e]}clear(){const e=ua(this,da,"f");for(const t of Object.keys(e))delete e[t]}keys(){return Object.keys(ua(this,da,"f"))}values(){const e=ua(this,da,"f"),t=[]
;for(const n of Object.keys(e))t.push(e[n]);return t}entries(){const e=ua(this,da,"f"),t=[];for(const n of Object.keys(e))t.push([n,e[n]]);return t}};var pa,fa=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},ma=function(e,t,n,r,o){
if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n};pa=new WeakMap;const ga=class extends la{get size(){return fa(this,pa,"f").length}constructor(e){super(),pa.set(this,void 0),ma(this,pa,e,"f")}has(e){
return null!=fa(this,pa,"f").getItem(e)}get(e){return fa(this,pa,"f").getItem(e)}set(e,t){fa(this,pa,"f").setItem(e,t)}delete(e){return fa(this,pa,"f").removeItem(e),!0}clear(){fa(this,pa,"f").clear()}keys(){const e=fa(this,pa,"f"),t=e.length,n=Array(t);for(let r=0;r<t;r++)n[r]=e.key(r);return n}values(){const e=fa(this,pa,"f"),t=e.length,n=Array(t);for(let r=0;r<t;r++)n[r]=e.getItem(e.key(r));return n}entries(){const e=fa(this,pa,"f"),t=e.length,n=Array(t);for(let r=0;r<t;r++){const t=e.key(r)
;n[r]=[t,e.getItem(t)]}return n}};var ba,ya,va,wa,ka=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},Ca=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable")
;if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n};ba=new WeakMap,ya=new WeakMap,va=new WeakMap,wa=new WeakMap;const Ea=class extends la{get message(){return ka(this,va,"f")}get persistent(){return ka(this,wa,"f")}get localStorage(){return ka(this,ba,"f")}
get sessionStorage(){return ka(this,ya,"f")}constructor(e){super(),ba.set(this,void 0),ya.set(this,void 0),va.set(this,void 0),wa.set(this,void 0);try{const{localStorage:t,sessionStorage:n}=e;if(null==t||null==n)throw Error("Required storage interfaces not available.");const r="___whitespider___",o=Date.now().toString(24);if(t.setItem(r,o),t.getItem(r)!==o)throw Error("Local storage test failed: value mismatch");if(n.setItem(r,o),
n.getItem(r)!==o)throw Error("Session storage test failed: value mismatch");Ca(this,ba,new ga(t),"f"),Ca(this,ya,new ga(n),"f"),Ca(this,va,null,"f"),Ca(this,wa,!0,"f")}catch(e){Ca(this,ba,new ha,"f"),Ca(this,ya,new ha,"f"),Ca(this,va,e+"","f"),Ca(this,wa,!1,"f")}}},xa="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",Aa={encode:function(e){let t="",n=0,r=0;for(let o=0;o<e.length;o++)for(n=n<<8|e[o],r+=8;r>=5;)t+=xa[n>>r-5&31],r-=5;for(r>0&&(t+=xa[n<<5-r&31]);t.length%8!=0;)t+="=";return t},decode:function(e){
e=e.replace(/=+$/,"");const t=[];let n=0,r=0;for(let o=0;o<e.length;o++){const i=xa.indexOf(e[o].toUpperCase());if(i<0)throw Error("Invalid character found in Base32 string.");n=n<<5|i,r+=5,r>=8&&(t.push(n>>r-8&255),r-=8)}return Uint8Array.from(t)}};Object.setPrototypeOf(Aa,null);const Ta=Object.freeze(Aa),La="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Sa=new Uint8Array(new ArrayBuffer(256),0,256);for(let e=0;e<64;e++)Sa[La.charCodeAt(e)]=e;const Ia={encode:function(e){
const t=e.byteLength;let n="",r="";for(let r=0;r<t;r+=3){const t=e[r]<<16|e[r+1]<<8|e[r+2];n+=La[t>>18&63]+La[t>>12&63]+La[t>>6&63]+La[63&t]}const o=t%3;return 1===o?(r="==",n=n.slice(0,-2)):2===o&&(r="=",n=n.slice(0,-1)),n+r},decode:function(e){const t=.75*e.length-(e.endsWith("==")?2:e.endsWith("=")?1:0),n=new Uint8Array(new ArrayBuffer(t),0,t);let r=0;for(let t=0;t<e.length;t+=4){const o=Sa[e.charCodeAt(t)]<<18|Sa[e.charCodeAt(t+1)]<<12|Sa[e.charCodeAt(t+2)]<<6|Sa[e.charCodeAt(t+3)]
;n[r++]=o>>16&255,n[r++]=o>>8&255,n[r++]=255&o}return n}};Object.setPrototypeOf(Ia,null);const Ma=Object.freeze(Ia),ja={encode:function(e){const t=[];for(const n of Array.from(e,(e=>e.codePointAt(0)||0)))n<=127?t.push(n):n<=2047?(t.push(n>>6|192),t.push(63&n|128)):n<=65535?(t.push(n>>12|224),t.push(n>>6&63|128),t.push(63&n|128)):n<=1114111&&(t.push(n>>18|240),t.push(n>>12&63|128),t.push(n>>6&63|128),t.push(63&n|128));return Uint8Array.from(t)},decode:function(e){let t=0,n=""
;for(;t<e.byteLength;){const r=e[t];if(128&r)if(192==(224&r)){const o=e[t+1];n+=String.fromCharCode((31&r)<<6|63&o),t+=2}else if(224==(240&r)){const o=e[t+1],i=e[t+2];n+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&i),t+=3}else if(240==(248&r)){const o=(7&r)<<18|(63&e[t+1])<<12|(63&e[t+2])<<6|63&e[t+3];n+=o<=1114111?String.fromCodePoint(o):"\ufffd",t+=4}else n+="\ufffd",t+=1;else n+=String.fromCharCode(r),t+=1}return n}};Object.setPrototypeOf(ja,null);const _a=Object.freeze(ja)
;var Oa=Uint8Array,Ba=Uint16Array,Na=Int32Array,Pa=new Oa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Da=new Oa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ra=new Oa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Fa=function(e,t){for(var n=new Ba(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var o=new Na(n[30]);for(r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)o[i]=i-n[r]<<5|r;return{b:n,r:o}},Ha=Fa(Pa,2),Ua=Ha.b,za=Ha.r;Ua[28]=258,za[258]=28
;for(var Wa=Fa(Da,0),Va=Wa.b,qa=(Wa.r,new Ba(32768)),Ga=0;Ga<32768;++Ga){var Ya=(43690&Ga)>>1|(21845&Ga)<<1;Ya=(61680&(Ya=(52428&Ya)>>2|(13107&Ya)<<2))>>4|(3855&Ya)<<4,qa[Ga]=((65280&Ya)>>8|(255&Ya)<<8)>>1}var Xa=function(e,t,n){for(var r=e.length,o=0,i=new Ba(t);o<r;++o)e[o]&&++i[e[o]-1];var a,s=new Ba(t);for(o=1;o<t;++o)s[o]=s[o-1]+i[o-1]<<1;if(n){a=new Ba(1<<t);var c=15-t;for(o=0;o<r;++o)if(e[o])for(var l=o<<4|e[o],d=t-e[o],u=s[e[o]-1]++<<d,h=u|(1<<d)-1;u<=h;++u)a[qa[u]>>c]=l
}else for(a=new Ba(r),o=0;o<r;++o)e[o]&&(a[o]=qa[s[e[o]-1]++]>>15-e[o]);return a},Qa=new Oa(288);for(Ga=0;Ga<144;++Ga)Qa[Ga]=8;for(Ga=144;Ga<256;++Ga)Qa[Ga]=9;for(Ga=256;Ga<280;++Ga)Qa[Ga]=7;for(Ga=280;Ga<288;++Ga)Qa[Ga]=8;var Za=new Oa(32);for(Ga=0;Ga<32;++Ga)Za[Ga]=5;var Ka=Xa(Qa,9,1),Ja=Xa(Za,5,1),$a=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},es=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},ts=function(e,t){var n=t/8|0
;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},ns=function(e){return(e+7)/8|0},rs=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new Oa(e.subarray(t,n))},os=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],is=function(e,t,n){var r=Error(t||os[e])
;if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,is),!n)throw r;return r},as=function(e,t,n,r){var o=e.length,i=r?r.length:0;if(!o||t.f&&!t.l)return n||new Oa(0);var a=!n,s=a||2!=t.i,c=t.i;a&&(n=new Oa(3*o));var l=function(e){var t=n.length;if(e>t){var r=new Oa(Math.max(2*t,e));r.set(n),n=r}},d=t.f||0,u=t.p||0,h=t.b||0,p=t.l,f=t.d,m=t.m,g=t.n,b=8*o;do{if(!p){d=es(e,u,1);var y=es(e,u+1,3);if(u+=3,!y){var v=e[(M=ns(u)+4)-4]|e[M-3]<<8,w=M+v;if(w>o){c&&is(0);break}s&&l(h+v),
n.set(e.subarray(M,w),h),t.b=h+=v,t.p=u=8*w,t.f=d;continue}if(1==y)p=Ka,f=Ja,m=9,g=5;else if(2==y){var k=es(e,u,31)+257,C=es(e,u+10,15)+4,E=k+es(e,u+5,31)+1;u+=14;for(var x=new Oa(E),A=new Oa(19),T=0;T<C;++T)A[Ra[T]]=es(e,u+3*T,7);u+=3*C;var L=$a(A),S=(1<<L)-1,I=Xa(A,L,1);for(T=0;T<E;){var M,j=I[es(e,u,S)];if(u+=15&j,(M=j>>4)<16)x[T++]=M;else{var _=0,O=0;for(16==M?(O=3+es(e,u,3),u+=2,_=x[T-1]):17==M?(O=3+es(e,u,7),u+=3):18==M&&(O=11+es(e,u,127),u+=7);O--;)x[T++]=_}}
var B=x.subarray(0,k),N=x.subarray(k);m=$a(B),g=$a(N),p=Xa(B,m,1),f=Xa(N,g,1)}else is(1);if(u>b){c&&is(0);break}}s&&l(h+131072);for(var P=(1<<m)-1,D=(1<<g)-1,R=u;;R=u){var F=(_=p[ts(e,u)&P])>>4;if((u+=15&_)>b){c&&is(0);break}if(_||is(2),F<256)n[h++]=F;else{if(256==F){R=u,p=null;break}var H=F-254;if(F>264){var U=Pa[T=F-257];H=es(e,u,(1<<U)-1)+Ua[T],u+=U}var z=f[ts(e,u)&D],W=z>>4;if(z||is(3),u+=15&z,N=Va[W],W>3&&(U=Da[W],N+=ts(e,u)&(1<<U)-1,u+=U),u>b){c&&is(0);break}s&&l(h+131072);var V=h+H
;if(h<N){var q=i-N,G=Math.min(N,V);for(q+h<0&&is(3);h<G;++h)n[h]=r[q+h]}for(;h<V;++h)n[h]=n[h-N]}}t.l=p,t.p=R,t.b=h,t.f=d,p&&(d=1,t.m=m,t.d=f,t.n=g)}while(!d);return h!=n.length&&a?rs(n,0,h):n.subarray(0,h)},ss=new Oa(0),cs="undefined"!=typeof TextDecoder&&new TextDecoder;try{cs.decode(ss,{stream:!0})}catch(e){}"function"==typeof queueMicrotask&&queueMicrotask
;const ls=Object.freeze(Xi.decode(Dt(Ma.decode("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"))))
;let ds="whitespider";const{p:us,s:hs,y:ps,e:fs}=ls.x;us&&hs&&ps&&(ds=hs+fs+"2_."+ps+us+"/",ds.length<10&&(ds=""));const ms=ds;let gs;const bs=Object.freeze(Object.create(null,{_:{value:({console:e})=>{if(null==e||"object"!=typeof e)throw Error("Invalid interface");const t=Reflect.get(e,"log",void 0);if("function"!=typeof t)throw Error("Invalid instance impl");gs=(...e)=>(Reflect.apply(t,null,e),!0)},writable:!1,enumerable:!1,configurable:!1},$:{get:()=>gs,enumerable:!1,configurable:!1}}))
;(async({window:e,document:t})=>{function n(e){const n=t.getElementById(e);if(null==n)throw Error("Element does not exist: "+e);return n}function r(e){const n=t.querySelector(e);if(n instanceof HTMLElement)return n;throw Error("Failed to query selector: "+e)}function o(e){null!=e?(_.textContent=e,_.style.display="block"):_.style.display="none"}function i(e){try{return new URL(e)}catch(e){return null}}function a(e){for(let t=e.length-1;t>=0;t--){const n=Math.floor(Math.random()*(t+1))
;[e[t],e[n]]=[e[n],e[t]]}return e}function s(e){return"https://"+ls.b+"/"+ls.c+"?OO0O0OO0="+encodeURIComponent(Ma.encode(_a.encode(e)))}function c(e){return new Date(e).toLocaleString("POSIX",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}async function l(t,n){try{const r=await e.fetch(t,{cache:n||"force-cache",method:"GET"});return r.ok?await r.text():null}catch(e){return null}}async function d(e,t,n){try{const r=new Image(512,512)
;r.loading="eager",r.decoding="sync",r.draggable=!1;{const t=URL.createObjectURL(e);r.src=t,await r.decode(),URL.revokeObjectURL(t)}const o=n/t;let i=r.naturalWidth,a=r.naturalHeight;if(a>=i*o?a=Math.floor(i*o):i=Math.floor(a/o),(t=Math.min(t,i))<10||(n=Math.min(n,a))<10)throw Error("Image must have at least 100 pixels.");const s=new OffscreenCanvas(t,n),c=s.getContext("2d",{alpha:!1});if(null==c)throw Error("Failed to initialize canvas context.");return c.imageSmoothingEnabled=!0,
c.imageSmoothingQuality="high",c.drawImage(r,0,0,i,a,0,0,t,n),await s.convertToBlob({type:"image/jpeg",quality:100})}catch(e){return null}}async function u(t){let n=0,r=0;const o=[];for(const e of t.split(",")){const t=e.split(";",3);if(3!==t.length)throw Error("Invalid entry value");const n=parseInt(t[1],10),i=parseInt(t[2],10),a=i-n;if(n<0||i<0||a<=0)throw Error("Invalid entry data length");r+=a,o.push({id:t[0],s:n,e:i,l:a})}const i=new Uint8Array(new ArrayBuffer(r),0,r)
;for(const{id:t,s:r,e:a,l:s}of o){const o=await e.fetch("/r/"+t,{cache:"force-cache",method:"GET",headers:{Range:"bytes="+r+"-"+(a-1)}});if(!o.ok)throw Error("Failed to fetch resources: Remote returned error status code: "+o.status);206===o.status&&o.headers.has("content-range")?i.set(new Uint8Array(await o.arrayBuffer(),0,s),n):i.set(new Uint8Array(await o.arrayBuffer(),r,s),n),n+=s}return i.buffer}function h(e,t){return new Promise(((n,r)=>{const o=performance.now().toString(36),i=(e,t,s)=>{
e===o&&(Z.off("res",i),Z.off("disconnect",a),null!=s?r(s):n(t))},a=()=>{Z.off("res",i),Z.off("disconnect",a),r("Error: Server connection interrupted.")};Z.on("res",i),Z.on("disconnect",a),Z.emit("fetch",o,e,t)}))}function p(e){O.appendChild(b(e)),B.style.display="block"}function f(n,r){const o=performance.now().toString(36),i=t.createElement("embed");i.src="/player.html?s="+o,i.type="text/html",i.width="1024",i.height="768";const a=t=>{if(t.origin===e.origin&&t.data===o){const o=t.source
;null!=o&&o.postMessage({id:n,buf:r},{targetOrigin:origin,transfer:Array.isArray(r)?[]:[r]}),e.removeEventListener("message",a)}};return e.addEventListener("message",a,{passive:!0}),i}function m(e){const{name:n,prev:r,date:i}=e,a=t.createElement("a");a.href=i>0?"/"+i.toString(36):"#",a.title="Play "+n,a.target="_self",a.className="game",a.onclick=t=>{t.ctrlKey||(t.preventDefault(),t.stopPropagation(),ie(e).catch((e=>{j(e),o("Failed to launch game. Message: "+e)})))},
a.style.backgroundImage=null!=r?'url("'+r+'"), url("/res/preview.svg")':'url("/d/'+encodeURIComponent(n.replace(/\//g,""))+'.jpg"), url("/res/preview.svg")';{const e=t.createElement("div");e.textContent=n,a.appendChild(e)}if(e.path.startsWith("https://")){const e=t.createElement("img");e.src="/res/cloud.svg",e.alt="Cloud",e.title="Embedded from third-party servers",e.width=24,e.height=24,e.loading="lazy",e.decoding="async",e.draggable=!1,a.appendChild(e)}switch(e.type){case"html5":{
const e=t.createElement("span");e.textContent="HTML5",e.style.background="#c04000",a.appendChild(e)}break;case"flash":{const e=t.createElement("span");e.textContent="Flash",e.style.background="#008000",a.appendChild(e)}break;case"dos":{const e=t.createElement("span");e.textContent="Dos",e.style.background="#0000ff",a.appendChild(e)}break;default:a.style.backgroundImage='url("/res/preview.svg")'}return a}function g(e){const n=t.createElement("div");n.className="item",n.onclick=()=>{
oe(e).catch((e=>{o("Failed to open the item. Message: "+e)}))},n.style.backgroundImage='url("'+e.prev[0]+'"), url("/res/preview.svg")';{const r=t.createElement("div");r.textContent=e.name,n.appendChild(r)}{const r=t.createElement("span");r.textContent="$"+e.price.toFixed(2),n.appendChild(r)}return n}function b(e){if(e.startsWith("https://")){const r=t.createElement("iframe");r.setAttribute("name","Frame"),r.setAttribute("width","1024"),r.setAttribute("height","768"),
r.setAttribute("loading","lazy"),r.setAttribute("sandbox","allow-forms allow-popups allow-scripts allow-same-origin allow-pointer-lock"),r.setAttribute("scrolling","no"),r.setAttribute("frameborder","0"),r.setAttribute("credentialless","true"),r.setAttribute("referrerpolicy","no-referrer"),r.setAttribute("allowfullscreen","true"),r.setAttribute("allowpaymentrequest","true");{
const t="data:application/xhtml+xml;base64,"+Ma.encode(_a.encode(`<?xml version="1.0" encoding="utf-8" ?>\n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" lang="en">\n\t<head>\n\t\t<meta charset="utf-8" />\n\t\t<meta name="referrer" content="no-referrer" />\n\t\t<meta name="viewport" content="width=device-width,initial-scale=1" />\n\t\t<base href="${origin}" target="_blank" />\n\t\t<link rel="icon" type="image/x-icon" href="res/google.ico" />\n\t\t<link rel="stylesheet" type="text/css" href="data:text/css;base64,Ym9keSxlbWJlZCxpZnJhbWV7cG9zaXRpb246YWJzb2x1dGU7ZGlzcGxheTpibG9jazt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO21hcmdpbjowcHg7cGFkZGluZzowcHg7Ym9yZGVyOm5vbmU7b3ZlcmZsb3c6aGlkZGVuO30K" />\n\t\t<title>Google</title>\n\t</head>\n\t<body>\n\t\t<embed type="text/plain" width="1024" height="768" src="${n=e,
n.replace(/[&<"']/g,(e=>{switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return""}}))}" />\n\t</body>\n</html>`));r.addEventListener("load",(()=>{const e=r.contentWindow;null!=e?(e.stop(),e.focus(),e.location.replace(t)):r.setAttribute("src",t)}),{once:!0,passive:!0}),V.set(r,e)}return r}{const n=t.createElement("embed");return n.setAttribute("type","text/plain"),n.setAttribute("width","1024"),n.setAttribute("height","768"),
n.setAttribute("src",e),n}var n}function y(){ce=null,$||(t.title="NettleWeb"),T.replaceState(void 0,"","/")}function v(t){const n=e.open(void 0,"_blank","");null!=n?(n.stop(),n.focus(),setTimeout((()=>{n.location.replace(t)}),100)):o("Please allow popups in your browser settings and try again.")}function w(t){const n=e.open(void 0,"_blank","");if(null==n)return void o("Please allow popups in your browser settings and try again.");n.focus();const r=n.document
;r.head.innerHTML='<meta charset="utf-8" /><meta name="referrer" content="no-referrer"/><meta name="viewport" content="width=device-width,initial-scale=1"/><base href="'+e.origin+'" target="_blank" /><link rel="icon" type="image/x-icon" href="res/google.ico" /><link rel="stylesheet" type="text/css" href="data:text/css;base64,Ym9keSxlbWJlZCxpZnJhbWV7cG9zaXRpb246YWJzb2x1dGU7ZGlzcGxheTpibG9jazt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO21hcmdpbjowcHg7cGFkZGluZzowcHg7Ym9yZGVyOm5vbmU7b3ZlcmZsb3c6aGlkZGVuO30K"/>',
r.body.appendChild(t),r.title="Google"}function C(){const e=t.createElement("iframe");e.setAttribute("id","anchor"),e.setAttribute("name","API Anchor"),e.setAttribute("width","1024"),e.setAttribute("height","768"),e.setAttribute("loading","lazy"),e.setAttribute("scrolling","no"),e.setAttribute("frameborder","0"),e.setAttribute("credentialless","true"),e.setAttribute("referrerpolicy","no-referrer"),e.setAttribute("allowfullscreen","true"),e.setAttribute("allowpaymentrequest","true"),
e.addEventListener("load",(()=>{const t=e.contentWindow;null!=t?(t.stop(),t.focus(),t.location.replace("https://nettleweb.com/?m=1")):e.setAttribute("src","https://nettleweb.com/?m=1")}),{once:!0,passive:!0}),M.appendChild(e)}var E,x;"complete"!==t.readyState&&await new Promise((e=>{const n=()=>{"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),setTimeout(e,100,null))};t.addEventListener("readystatechange",n,{passive:!0})})),t.title="NettleWeb",bs._(e),e.focus(),
e.onerror=(e,t,n,r,o)=>{const i="Unhandled error at "+(t||"unknown source")+" "+(n||"X")+":"+(r||"X")+"\n\n Message: "+o;_.textContent=i,_.style.display="block"},e.onkeydown=e=>{if(e.ctrlKey&&!e.altKey&&!e.metaKey&&!e.shiftKey)switch(e.key){case"h":case"q":e.preventDefault(),e.stopPropagation(),A.replace("https://www.google.com/webhp?igu=1");break;case"b":e.preventDefault(),e.stopPropagation(),M.hasAttribute("style")?M.removeAttribute("style"):M.setAttribute("style","filter: blur(15px);")}},
e.onpopstate=e=>{e.preventDefault(),e.stopPropagation(),o("Notice: Please press ctrl+Q to leave this website.")},e.onappinstalled=e=>{e.preventDefault(),e.stopPropagation(),D.style.display="none"},e.onbeforeinstallprompt=e=>{e.preventDefault(),e.stopPropagation(),D.style.display="block",D.onclick=()=>{e.prompt().catch((e=>{o("Failed to show install prompt. Message: "+e)}))}}
;const A=e.location,T=e.history,L=A.pathname,S=new URLSearchParams(A.search),I=t.head,M=t.body,j=bs.$,_=n("error"),O=n("frame"),B=n("frame-view"),N=n("status"),D=n("install"),R=n("content"),F=n("accn-btn"),H=n("strm-btn"),U=n("comm-btn"),z=n("nmsg-btn"),W=n("side-menu");{const{_a:pe,_b:fe,_c:me,_d:ge,_e:be,_f:ye,_g:ve,_h:we,_i:ke,_j:Ce,_k:Ee,_l:xe,_m:Ae,_n:Te,_o:Le,_v:Se,_w:Me,_p:je,_q:_e,_r:Oe}=ls;if((()=>{j(pe,fe);const e=new URL(A.href),n=e.hostname,o=e.origin;switch(e.protocol){case"http:":
if("localhost"!==n)return e.protocol="https:",A.replace(e.href),!1;break;case"https:":break;default:return!0}switch(n){case"whitespider.cf":case"whitespider.tk":case"whitespider.dev":case"whitespider.web.app":case"whitespider.pages.dev":case"whitespider.firebaseapp.com":return e.host="nettleweb.com",e.hash="",e.search="",e.pathname="/",A.replace(e.href),!1}{const e=t[Le](we);if(null==e||e[Ce](ke)!==xe)return!0}for(const e of t[Ae](Te)){switch(e[Ce]("type")||""){case"":case"text/javascript":
case"application/javascript":break;default:return e.remove(),!0}const t=e[Ce]("src");if(!t||e.textContent)return e.remove(),!0;const n=new URL(t.startsWith("//")?"https:"+t:t,o);if(n.origin!==o){if("https:"===n.protocol){const e=n.host.split("."),t=e.length;if("com"===e[t-1]){const n=e[t-2];if(n.indexOf("google")>=0||n.indexOf("firebase")>=0)continue}}return e.remove(),!0}}return r('link[rel="canonical"]')[Ce]("href").slice(0,me)!==ye||null==t[Le](je)||null==t[Le](_e)||t[Oe]!==pe.slice(2,11)
})()){j(be,Ee);const Be=(new DOMParser).parseFromString(Se,"application/xhtml+xml");Be.title=ve;const Ne=Be.body;Ne.innerHTML=ge;{const Pe=Be.createElement("button");Pe.innerHTML=Me,Pe.setAttribute("type","button"),Pe.addEventListener("click",(()=>{A.replace(ye)}),{passive:!0}),Ne.appendChild(Pe)}return void t.documentElement.replaceWith(Be.documentElement)}for(const De of Object.getOwnPropertyNames(ls))2===De.length&&delete ls[De]}if(e!==e.top){
if("null"===(null===(E=A.ancestorOrigins)||void 0===E?void 0:E.item(0))){const Re=t.createElement("div");return Re.style.padding="15px",Re.textContent="Click here to continue",Re.onclick=()=>{const e=t.createElement("embed");e.type="text/plain",e.width="1280",e.height="720",e.src="https://nettleweb.com/embed.html",w(e)},M.innerHTML="",void M.appendChild(Re)}if("https://nettleweb.com"!==A.origin)return void A.replace("https://nettleweb.com/embed.html")}Ie(P({
appId:"1:176227430389:web:94270de43b7eb971c03abc",apiKey:"AIzaSyCPXTy7dt3fpcLd8kVTBtXy0xuBdeuhbFc",projectId:"whitespider",authDomain:"whitespider.firebaseapp.com",databaseURL:"https://whitespider-default-rtdb.firebaseio.com",storageBucket:"whitespider.appspot.com",measurementId:"G-F72WBJT57S",messagingSenderId:"176227430389"},"NettleWeb"));const V=new WeakMap,q=M.clientWidth<800,G=new Ea(e),{localStorage:Y}=G;let X,Q,Z,K,J,$,ee,te,ne,re,oe,ie,ae,se=[],ce=null
;if(null!==(x=e.isSecureContext)&&void 0!==x?x:"https:"===A.protocol){if(G.persistent)try{const Fe=await l("/manifest.json","no-cache");if(null!=Fe){const He=JSON.parse(Fe).version;if(He!==Y.get("__mf_version")){M.innerHTML="Updating contents...";const Ue=e.caches;for(const ze of await Ue.keys())await Ue.delete(ze);return Y.set("__mf_version",He),void A.reload()}n("version").textContent="v"+He}X=Y.get("__secrets_")||void 0
}catch(We){}else o("Warning: Cookies are blocked by your browser. Some features might not work properly, and your game data will NOT be saved.");try{const Ve=e.navigator.serviceWorker;null!=Ve&&(await Ve.register("/sw.js",{type:"classic",scope:"/",updateViaCache:"none"}),await Ve.ready)}catch(qe){}}try{const Ge=await e.fetch("/d/index.json",{mode:"same-origin",cache:"no-cache",method:"GET"});if(!Ge.ok)throw Error("Remote returned error status code: "+Ge.status)
;ee=Xi.decode(Dt(new Uint8Array(await Ge.arrayBuffer())))}catch(Ye){return void o("Failed to initialize local game list. Message: "+Ye)}try{const Xe=e.top;null!=Xe&&(J=Xe===e?e:Xe.origin===e.origin?Xe:null)}catch(Qe){}_.onclick=()=>{_.innerHTML="",_.style.display="none"},n("frame-close").onclick=()=>{O.innerHTML="",B.style.display="none"},n("frame-expand").onclick=e=>{if(t.fullscreenEnabled&&!e.ctrlKey)O.requestFullscreen({navigationUI:"hide"}).catch((e=>{
o("Failed to enter fullscreen mode. Message: "+e)}));else{const e=O.firstElementChild;if(null!=e){const t=V.get(e)||"";t.startsWith("https://")&&w(b(t))}O.innerHTML="",B.style.display="none"}},n("content-page").outerHTML=ls.pages;{const Ze=r("link[rel*='icon']"),Ke=n("backend-url"),Je=n("overlay"),$e=n("notice"),et=n("theme"),tt=n("tab-cloaking"),nt=n("stealth-mode");let rt;function ot(e){if(null!=Z&&(Z.disconnect(),Z.close()),null==K){const{q:e,r:t}=ls;null!=e&&null!=t&&(K=e+t+ms)}
Z=k(e||K||"https://service.nettleweb.com/",{path:"/webapi/",secure:!0,upgrade:!0,timeout:8e3,forceNew:!0,multiplex:!1,protocols:[],transports:["polling","websocket"],autoConnect:!0,reconnection:!0,timestampParam:"x",rememberUpgrade:!0,timestampRequests:!0,reconnectionDelay:5e3,rejectUnauthorized:!0,closeOnBeforeunload:!0}),N.innerHTML="Connecting...",N.style.color="#808000",Z.on("an",(e=>{"string"==typeof e&&e.length>0&&($e.textContent=e,$e.style.display="block")})),Z.on("no",(()=>{
z.setAttribute("data-unread","")})),"string"!=typeof Q&&Z.once("lr",(e=>{Q=e})),Z.io.on("open",(()=>{N.title="",N.innerHTML="\u2713Connected",N.style.color="#008000"})),Z.io.on("close",(e=>{N.title=e,N.innerHTML="\u2715Disconnected",N.style.color="#ff0000"})),Z.io.on("reconnect_attempt",(()=>{N.title="",N.innerHTML="Connecting...",N.style.color="#808000"})),Z.io.on("reconnect_error",(e=>{N.title=e+"",N.innerHTML="\u2715Disconnected",N.style.color="#ff0000"})),Z.io.on("reconnect",(()=>{
N.title="",N.innerHTML="\u2713Connected",N.style.color="#008000",null!=X&&Z.emit("login",X)}))}function it(e){switch(null==rt&&(rt=t.createElement("link"),rt.rel="stylesheet",rt.type="text/css",rt.href="index.dark.css",I.appendChild(rt)),e){case"light":rt.href="data:text/css;base64,",rt.removeAttribute("media");break;case"dark":rt.href="index.dark.css",rt.removeAttribute("media");break;default:rt.href="index.dark.css",rt.media="all and (prefers-color-scheme: dark)"}}function at(e){switch(e){
case"empty":$=!0,t.title="\u2060",Ze.type="image/x-icon",Ze.href="/res/empty.ico";break;case"google":$=!0,t.title="Google",Ze.type="image/x-icon",Ze.href="/res/google.ico";break;case"classroom":$=!0,t.title="Home",Ze.type="image/png",Ze.href="/res/classroom.png";break;default:$=!1,t.title="NettleWeb",Ze.type="image/x-icon",Ze.href="/favicon.ico"}}function st(e){switch(e){case"blank":t.onblur=t.onmouseleave=e=>{Je.hasAttribute("data-x")||(e.preventDefault(),e.stopPropagation(),
Je.setAttribute("data-x","1"))},t.onmousedown=t.ontouchstart=e=>{Je.hasAttribute("data-x")&&(e.preventDefault(),e.stopPropagation(),Je.removeAttribute("data-x"))},Je.innerHTML="",Je.removeAttribute("data-x");break;case"google":t.onblur=t.onmouseleave=e=>{Je.hasAttribute("data-x")||(e.preventDefault(),e.stopPropagation(),Je.setAttribute("data-x","1"))},t.onmousedown=t.ontouchstart=e=>{Je.hasAttribute("data-x")&&(e.preventDefault(),e.stopPropagation(),Je.removeAttribute("data-x"))},
Je.innerHTML='<iframe width="1024" height="768" allowfullscreen="true" allowpaymentrequest="true" name="Frame" allow="fullscreen payment" loading="lazy" scrolling="no" frameborder="0" credentialless="true" referrerpolicy="no-referrer" src="https://www.google.com/webhp?igu=1"></iframe>',Je.removeAttribute("data-x");break;default:Je.innerHTML="",Je.removeAttribute("data-x"),t.onblur=t.onmouseleave=t.onmousedown=t.ontouchstart=null}}Ke.onblur=()=>{const e=i(Ke.value.trim());if(null!=e){
const t=e.href;Y.set("__backendURL_",t),ot(Ke.value=t)}else Y.delete("__backendURL_"),ot(Ke.value="")},et.onchange=()=>{const e=et.value;it(e),Y.set("__set_theme",e)},tt.onchange=()=>{const e=tt.value;at(e),Y.set("__set_tabc",e)},nt.onchange=()=>{const e=nt.value;st(e),Y.set("__set_sm",e)};{const ct=Y.get("__backendURL_")||"";ot(ct),Ke.value=ct}{const lt=Y.get("__set_theme")||"default";it(lt),et.value=lt}{const dt=Y.get("__set_tabc")||"disabled";at(dt),tt.value=dt}{
const ut=Y.get("__set_sm")||"disabled";st(ut),nt.value=ut}}{const ht=n("headlines");h(47).then((e=>{if(Array.isArray(e))if(0!==e.length){ht.innerHTML="";for(const n of e){const e=t.createElement("div"),r=n.urlToImage||null;{const n=t.createElement("img");n.src=null==r?"/res/preview.svg":s(r),n.alt="Preview",n.width=160,n.height=90,n.loading="lazy",n.decoding="async",n.draggable=!1,e.appendChild(n)}{const r=t.createElement("div");{const e=t.createElement("div");e.className="title",
e.textContent=n.title,r.appendChild(e)}{const e=t.createElement("div");e.className="desc",e.textContent=n.description||"Description is not available for this article.",r.appendChild(e)}{const e=t.createElement("div");e.className="time",e.textContent="Source: "+(n.source.name||"unknown")+"; Author: "+(n.author||"unknown")+"; Published at "+c(n.publishedAt),r.appendChild(e)}e.appendChild(r)}e.onclick=()=>{v(n.url)},ht.appendChild(e)}
}else ht.innerHTML="No articles are available at this moment.";else ht.innerHTML="Error: Failed to parse server response."})).catch((e=>{ht.textContent="Failed to fetch from the API server. Message: "+e}))}{
const pt=n("game-container"),ft=n("comments"),mt=n("player"),gt=n("share"),bt=n("like"),yt=n("game-page"),vt=n("ecode"),wt=n("edit"),kt=n("name"),Ct=n("type"),Et=n("tags"),xt=n("date"),At=n("user"),Tt=n("desc"),Lt=n("code"),St=n("lock"),It=n("comm"),Mt=n("post"),jt=n("e-name"),_t=n("e-tags"),Ot=n("e-desc"),Bt=n("e-subm"),Nt=n("editor"),Pt=n("s-games"),Rt=n("loadmore"),Ft=n("controller"),Ht=n("gnav-back"),Ut=n("gnav-forward"),zt=n("gnav-page-no"),Wt=n("gnav-page-count"),Vt=[]
;let qt="p",Gt="all",Yt="",Xt=0;{const $t=n("game-search"),en=r("#game-search>input");let tn=0;$t.onsubmit=e=>{e.preventDefault(),e.stopPropagation(),Yt=en.value.trim().toLowerCase(),clearTimeout(tn),Zt()},en.onblur=()=>{Yt=en.value.trim().toLowerCase(),clearTimeout(tn),Zt()},en.oninput=()=>{clearTimeout(tn),tn=setTimeout((()=>{Yt=en.value.trim().toLowerCase(),Zt()}),1e3)}}{const nn=t.querySelectorAll("#game-category>button");for(const rn of nn)rn.onclick=()=>{
for(const e of nn)e.removeAttribute("data-current");Gt=rn.getAttribute("data-match")||"all",rn.setAttribute("data-current",""),Zt()}}{const on=n("game-sort");on.value=qt=Y.get("__gamesortorder")||"p",on.onchange=()=>{Y.set("__gamesortorder",qt=on.value),Zt()}}function Qt(){switch(Gt){case"all":return Yt.length>0?ee.filter((e=>e.name.toLowerCase().indexOf(Yt)>=0||e.tags.indexOf(Yt)>=0)):[...ee];case"html5":
return ee.filter((e=>"html5"===e.type&&(0===Yt.length||e.name.toLowerCase().indexOf(Yt)>=0||e.tags.indexOf(Yt)>=0)));case"flash":return ee.filter((e=>"flash"===e.type&&(0===Yt.length||e.name.toLowerCase().indexOf(Yt)>=0||e.tags.indexOf(Yt)>=0)));case"dos":return ee.filter((e=>"dos"===e.type&&(0===Yt.length||e.name.toLowerCase().indexOf(Yt)>=0||e.tags.indexOf(Yt)>=0)));default:return ee.filter((e=>e.tags.split(",").indexOf(Gt)>=0&&(0===Yt.length||e.name.toLowerCase().indexOf(Yt)>=0)))}}
function Zt(){Xt=0,Vt.length=0;const e=Qt();if(0===e.length)return Ht.disabled=!0,Ut.disabled=!0,void(pt.innerHTML="No results found :(");switch(qt){case"r":"Joey"===Q||"anonymous"===Q?e.sort(((e,t)=>e.desc.length-t.desc.length)):a(e);break;case"d":e.sort(((e,t)=>t.date-e.date));break;case"p":e.sort(((e,t)=>(t.count||0)-(e.count||0)))}for(let t=0;t<e.length;t+=100)Vt.push(e.slice(t,t+100));Kt()}function Kt(){zt.min="1",zt.max=Wt.innerHTML=Vt.length+"",zt.value=Xt+1+"",pt.innerHTML="",
Ht.disabled=Xt<1,Xt>=Vt.length-1?Ut.disabled=!0:Ut.disabled=!1;for(const e of Vt[Xt])pt.appendChild(m(e))}function Jt({id:e,msg:n,uid:r,vip:i,user:a,icon:s},c){const l=t.createElement("div");l.setAttribute("id",e);const d=t.createElement("div");switch(d.className="user",d.textContent=a,i){case 3:d.setAttribute("data-vip","gold");break;case 4:d.setAttribute("data-vip","diamond")}{const e=t.createElement("img");if(e.alt="Avatar",e.width=32,e.height=32,e.loading="lazy",e.decoding="async",
e.draggable=!1,"string"!=typeof s){const t=URL.createObjectURL(new Blob([s],{type:"image/jpeg",endings:"native"}));e.addEventListener("load",(()=>URL.revokeObjectURL(t)),{once:!0,passive:!0}),e.src=t}else e.src=s;null!=r&&(e.style.cursor=d.style.cursor="pointer",e.onclick=d.onclick=()=>{ae(r).catch((e=>{o("Failed to open user profile. Message: "+e)}))}),l.appendChild(e)}const u=t.createElement("div");if(u.appendChild(d),n.length>0){const i=t.createElement("span");if(i.textContent=n,
u.appendChild(i),null!=Q&&r===Q){{const r=t.createElement("button");r.type="button",r.title="Edit",r.className="edit",r.onclick=()=>{const a=t.createElement("div"),s=t.createElement("input");s.type="text",s.value=n,s.required=!0,s.minLength=1,s.maxLength=1e3,s.placeholder="Message",s.autocomplete="off",a.appendChild(s);const l=t.createElement("button");l.type="button",l.title="Save",l.className="tick",a.appendChild(l);const d=t.createElement("button");d.type="button",d.title="Cancel",
d.className="cross",a.appendChild(d),l.onclick=()=>{const t=s.value.trim();t.length<1?o("Comments cannot be empty."):t.length>1e3?o("Comments cannot be longer than 1000 characters."):h(61,[X,e,c,t]).then((()=>{n=t,a.remove(),r.disabled=!1})).catch((e=>{o("Failed to update the comment. Message: "+e)}))},d.onclick=()=>{a.remove(),r.disabled=!1,i.innerHTML=n},r.disabled=!0,i.innerHTML="",i.appendChild(a)},l.appendChild(r)}{const n=t.createElement("button");n.type="button",n.title="Delete",
n.className="delete",n.onclick=()=>{n.disabled=!0,h(61,[X,e,c,""]).catch((e=>{o("Failed to delete the comment. Message: "+e)}))},l.appendChild(n)}}}return l.appendChild(u),l}ie=async({name:e,type:n,tags:r,date:i,path:s,desc:l})=>{null!=ce&&ce();for(const e of he)e.removeAttribute("data-current");R.scrollTo({top:0,left:0,behavior:"instant"}),W.checked=!1,yt.setAttribute("data-current",""),ce=()=>{ce=null,St.title="Enable scroll lock",St.style.backgroundImage='url("res/lock-open-w.svg")',
$||(t.title="NettleWeb"),mt.innerHTML="",R.style.overflow="",Z.removeAllListeners("comm"),Z.removeAllListeners("comu"),T.replaceState(void 0,"","/")},It.value="",jt.value="",_t.value="",Ot.value="",Pt.innerHTML="",At.innerHTML="",bt.innerHTML="Like",gt.innerHTML="Share",ft.innerHTML="",Nt.style.display="none",wt.style.display="block",Ft.style.display="block",kt.textContent=e,Ct.textContent=n.toUpperCase(),Et.textContent=r.replace(/\,/g,", ")||"None",xt.textContent=c(i),
Tt.textContent=l||"No information provided by the uploader.";{const n=i.toString(36),r="/"+n,a="https://nettleweb.com"+r;$||(t.title=e+" - NettleWeb"),T.replaceState(void 0,"",r),Lt.textContent=n,vt.textContent='<embed type="text/plain" width="1280" height="720" src="'+a+'?hidegui=1" />',gt.onclick=()=>{navigator.clipboard.writeText(a).then((()=>{gt.innerHTML="Link copied!"})).catch((e=>{o("Failed to copy link to clipboard. Message: "+e)}))}}wt.innerHTML="Edit Game Info",wt.disabled=!1,
wt.onclick=()=>{null!=X?(jt.value=e,_t.value=r,Ot.value=l,Nt.style.display="block",wt.style.display="none"):F.click()},Bt.onclick=()=>{if(null==X)return void o("Invalid session. Please refresh this page and try again.");const e=jt.value.replace(/\s+/g," ").trim();if(0===e.length)return void o("Game name must not be empty.");if(e.length>256)return void o("Game name must be less than 256 characters in length.")
;const t=Ot.value.replace(/\s+/g," ").trim(),n=_t.value.trim().toLowerCase().split(",").map((e=>e.replace(/\s+/g," ").trim())).join(",");n.length>300?o("Game tags list must be less than 300 characters long in total."):t.length>5e3?o("Game description text must be less than 5000 characters in length."):(Bt.disabled=!0,h(23,[X,i,e,n,t]).then((()=>{Bt.disabled=!1,wt.disabled=!0,wt.innerHTML="Requested. Pending review...",Nt.style.display="none",wt.style.display="block"})).catch((e=>{
o("Failed to submit request. Message: "+e),Bt.disabled=!1})))},Mt.onclick=()=>{if(null==X)return void F.click();const e=It.value.trim();e.length<1?o("Comments cannot be empty."):e.length>1e3?o("Comments cannot be longer than 1000 characters."):(Mt.disabled=!0,h(59,[X,i,e]).then((()=>{It.value="",Mt.disabled=!1})).catch((e=>{o("Failed to post comment. Message: "+e),Mt.disabled=!1})))}
;for(const e of a(ee.filter((e=>!e.path.startsWith("https://")))).slice(3,9))e.date!==i&&Pt.childElementCount<5&&Pt.appendChild(m(e));s.startsWith("!content!")?mt.appendChild(f(n,await u(s.slice(9)))):mt.appendChild(b(s));{const e=await h(56,i);{let t=e.likes;bt.textContent=t.toString(10),bt.onclick=()=>{bt.disabled=!0,h(57,i).then((()=>{bt.textContent=(++t).toString(10),bt.disabled=!1})).catch((e=>{o("Failed to give a like. Message: "+e)}))}}{const n=t.createElement("img");n.alt="Avatar",
n.width=40,n.height=40,n.loading="eager",n.decoding="sync",n.draggable=!1;{const t=URL.createObjectURL(new Blob([e.avatar],{type:"image/jpeg",endings:"native"}));n.src=t,await n.decode(),URL.revokeObjectURL(t)}At.appendChild(n)}{const n=t.createElement("div");switch(n.className="user",n.textContent=e.id,e.vip){case 3:n.setAttribute("data-vip","gold");break;case 4:n.setAttribute("data-vip","diamond")}At.appendChild(n)}At.onclick=()=>{ae(e.uid).catch((e=>{
o("Failed to open user profile. Message: "+e)}))}}{const e=await h(58,[i]);if(20===e.length){let t=e[e.length-1].id;Rt.style.display="block",Rt.onclick=()=>{Rt.style.display="none",h(58,[i,t]).then((e=>{20===e.length&&(t=e[e.length-1].id,Rt.style.display="block");for(const t of e)ft.appendChild(Jt(t,i))})).catch((e=>{o("Failed to fetch comments. Message: "+e)}))}}for(const t of e)ft.appendChild(Jt(t,i))}Z.on("comm",((e,t)=>{i===e&&ft.prepend(Jt(t,i))})),Z.on("comu",((e,t,n)=>{
if(i===e)for(const e of ft.children)if(e.getAttribute("id")===t){const r=e.querySelector("div>span");null!=r?r.textContent=n:o("Failed to update comment: "+t);break}}))},Ht.onclick=()=>{Xt--,Kt(),pt.scrollIntoView({behavior:"instant",inline:"start",block:"start"})},Ut.onclick=()=>{Xt++,Kt(),pt.scrollIntoView({behavior:"instant",inline:"start",block:"start"})},zt.onblur=()=>{const e=parseInt(zt.value.trim(),10)||0;Xt+1!==e&&(e<1||e>Vt.length?(zt.value="1",Xt=0):Xt=e-1,Kt(),pt.scrollIntoView({
behavior:"instant",inline:"start",block:"start"}))},zt.onchange=()=>{zt.blur()},St.onclick=()=>{"Disable scroll lock"===St.title?(St.style.backgroundImage='url("res/lock-open-w.svg")',St.title="Enable scroll lock",R.style.overflow=""):(St.style.backgroundImage='url("res/lock-w.svg")',St.title="Disable scroll lock",R.style.overflow="hidden",mt.scrollIntoView({block:"start",inline:"start",behavior:"instant"}))},It.onfocus=()=>{null==X&&F.click()},n("hide").onclick=()=>{Ft.style.display="none"},
n("e-canc").onclick=()=>{Nt.style.display="none",wt.style.display="block"},n("newtab").onclick=()=>{o("This feature has been temporarily disabled.")},n("fullscreen").onclick=()=>{if(t.fullscreenEnabled){const e=mt.firstElementChild;null!=e&&e.requestFullscreen({navigationUI:"hide"}).catch((e=>{o("Failed to enter fullscreen mode. Message: "+e)}))}else o("Fullscreen mode is not supported in the current browsing context.")},Zt()}{
const an=r("#yt-search>input"),sn=r("#yt-search>button"),cn=n("video-page"),ln=n("goto-video"),dn=n("videos-page"),un=n("yt-load-more"),hn=n("yt-results"),pn=n("sserver"),fn=n("s-videos"),mn=n("service"),gn=n("yt-filter"),bn=n("yt-order"),yn=n("video"),vn=n("vcode"),wn=n("vname"),kn=n("vtags"),Cn=n("vdate"),En=n("vdesc"),xn=n("vlike"),An=n("vview"),Tn=n("origin"),Ln=n("source"),Sn=n("stream"),In=n("privacy"),Mn=n("license"),jn=n("category"),_n=n("uploader");let On="",Bn="0";function Nn(e){
switch(e.protocol){case"http:":case"https:":break;default:return null}const t=e.pathname;if(t.length<4)return null;switch(e.hostname){case"piped.video":case"youtube.com":case"www.youtube.com":case"youtube-nocookie.com":case"www.youtube-nocookie.com":return"/watch"===t?e.searchParams.get("v")||null:"/embed/"===t.slice(0,7)&&t.slice(7)||null;case"youtu.be":return t.slice(1)||null;default:return null}}function Pn(e){var n
;const r=t.createElement("div"),i=(null===(n=e.thumbnails[0])||void 0===n?void 0:n.url)||null;{const e=t.createElement("img");e.src=null==i?"/res/preview.svg":s(i),e.alt="Preview",e.width=160,e.height=90,e.loading="lazy",e.decoding="async",e.draggable=!1,r.appendChild(e)}{const n=t.createElement("div");{const r=t.createElement("div");r.className="title",r.textContent=e.name,n.appendChild(r)}{const r=t.createElement("div");r.className="desc",r.textContent=e.description||"",n.appendChild(r)}{
const{uploadDate:r,viewCount:o,uploader:i}=e;let a="string"==typeof r&&r.length>0?r+"; ":"";"number"==typeof o&&(a+="Views: "+o),null!=i&&(a+="; Uploader: "+i.name),"0"===Bn&&(a+="; Source: YouTube");const s=t.createElement("div");s.className="time",s.textContent=a,n.appendChild(s)}r.appendChild(n)}return r.onclick=()=>{switch(Bn){case"0":case"2":case"3":Rn(e.url);break;default:o("Function not implemented")}},r}async function Dn(){sn.disabled=!0,an.disabled=!0
;const e=await h(40,[an.value.trim(),On,bn.value,gn.value,Bn]);if(null==e||"object"!=typeof e)return void(hn.innerHTML="Error: API server returned invalid response.");const t=e.results;if(!Array.isArray(t))return void(hn.innerHTML="Error: Failed to parse search results.");if(0===t.length)return void(hn.innerHTML="No matching results found :(");for(const e of t)hn.appendChild(Pn(e));const n=e.nextPageToken;null!=n&&(un.style.display="block",un.onclick=()=>{On=n,Dn().then((()=>{sn.disabled=!1,
an.disabled=!1}))})}function Rn(e){h(63,[e,Bn]).then((n=>{if(null==n||"object"!=typeof n)return void o("Error: API server returned invalid response.");null!=ce&&ce();for(const e of he)e.removeAttribute("data-current");R.scrollTo({top:0,left:0,behavior:"instant"}),fn.innerHTML="",W.checked=!1,cn.setAttribute("data-current",""),ce=()=>{ce=null,yn.innerHTML=""};const r=vn.textContent=n.id;"0"!==Bn?(pn.value="nettle",pn.disabled=!0,Ln.textContent="Unknown"):(pn.disabled=!1,Ln.textContent="YouTube"),
wn.textContent=n.name,kn.textContent=n.tags.join(", ").trim()||"None",Cn.textContent=c(Date.parse(n.uploadDate)),En.textContent=n.description.replace(/\<br\>/g,"\n").replace(/<[^>]*>/g,""),xn.textContent=n.likeCount,An.textContent=n.viewCount,Tn.textContent=e,Sn.textContent=n.stream,In.textContent=n.privacy,Mn.textContent=n.license||"Unknown",jn.textContent=n.category||"Unknown";{const{name:e,verified:t,subscribers:r}=n.uploader;_n.textContent=e+" ("+r+" subscribers)"+(t?" \u2713":"")}{
const e=n.relatedItems;if(e.length>0)for(const t of e)fn.appendChild(Pn(t));else fn.innerHTML="No suggestions are available for this video."}(pn.onchange=()=>{var i;switch(pn.value){case"none":yn.innerHTML="",yn.appendChild(b("https://www.youtube-nocookie.com/embed/"+r));break;case"piped":yn.innerHTML="",yn.appendChild(b("https://cf.piped.video/watch?v="+r));break;default:
if((e=(null===(i=n.videoStreams[0])||void 0===i?void 0:i.url)||"").length<4)return void(yn.innerHTML="Failed to retrieve the video stream. Try switching to a different stream proxy server below.");{const i=t.createElement("video");i.src=s(e),i.width=800,i.height=600,i.volume=.8,i.autoplay=!0,i.controls=!0,i.preservesPitch=!1,(e=n.thumbnails.pop().url||"").length>4&&(i.poster=s(e)),i.onerror=()=>{o("Video stream failed to load. Falling back to official server."),
i.replaceWith(b("https://www.youtube-nocookie.com/embed/"+r))},i.oncanplay=()=>{i.onerror=null,i.oncanplay=null},yn.innerHTML="",yn.appendChild(i)}}})()})).catch((t=>{o("Failed to fetch video stream information. Message: "+t),p("https://www.youtube-nocookie.com/embed/"+Nn(new URL(e)))}))}bn.value=Y.get("__yt_order")||"relevance",gn.value=Y.get("__yt_filter")||"videos",mn.value=Y.get("__yt_service")||"0",bn.onchange=()=>{Y.set("__yt_order",bn.value)},gn.onchange=()=>{Y.set("__yt_filter",gn.value)
},mn.onchange=()=>{Y.set("__yt_service",mn.value)},n("yt-search").onsubmit=e=>{e.preventDefault(),e.stopPropagation(),o(null),On="",hn.innerHTML="",un.style.display="none",Bn=mn.value;const t=i(an.value);if(null!=t){const e=Nn(t);null!=e?Rn("https://www.youtube.com/watch?v="+e):o("Error: Failed to parse video ID from the provided URL.")}else Dn().then((()=>{sn.disabled=!1,an.disabled=!1}))},H.onclick=ln.onclick=()=>{null!=ce&&ce();for(const e of he)e.removeAttribute("data-current")
;$||(t.title="NettleWeb Videos"),R.scrollTo({top:0,left:0,behavior:"instant"}),W.checked=!1,ce=y,T.replaceState(void 0,"","/videos"),H.setAttribute("data-current",""),dn.setAttribute("data-current",""),0===hn.childElementCount&&(H.disabled=!0,ln.disabled=!0,h(65,Bn=mn.value).then((e=>{if(null==e||"object"!=typeof e)return void(hn.innerHTML="Error: API server returned invalid response.");const t=e.results;if(Array.isArray(t)){hn.innerHTML="";for(const e of t)hn.appendChild(Pn(e));H.disabled=!1,
ln.disabled=!1}else hn.innerHTML="Error: Failed to parse search results."})).catch((e=>{H.disabled=!1,ln.disabled=!1,hn.textContent="Failed to get trending videos. Message: "+e})))}}{
const Fn=n("item-container"),Hn=n("item-category"),Un=n("previews"),zn=n("seller"),Wn=n("price"),Vn=n("stock"),qn=n("item-page"),Gn=n("iname"),Yn=n("itags"),Xn=n("idate"),Qn=n("idesc"),Zn=n("icode"),Kn=[],Jn=n("iadd"),$n=n("ibuy"),er=n("checkout"),tr=n("nav-back"),nr=n("nav-forward"),rr=n("nav-page-no"),or=n("nav-page-count"),ir=n("purchase-page"),ar=[];let sr="p",cr="all",lr="",dr=0;te=h(48).then((e=>{
if(null==e||"object"!=typeof e)return void(Fn.innerHTML="Error: Failed to load contents. Message: Failed to parse server response.");const n=e.pros;if(Array.isArray(n)&&0!==n.length){{const n=e.cats,r=Hn.children;{const e=t.createElement("button");e.type="button",e.innerHTML="All",e.setAttribute("data-current",""),e.onclick=()=>{for(const e of r)e.removeAttribute("data-current");cr="all",hr(),e.setAttribute("data-current","")},Hn.appendChild(e)}if(Array.isArray(n)&&n.length>0)for(const e of n){
const n=t.createElement("button");n.type="button",n.textContent=e,n.onclick=()=>{for(const e of r)e.removeAttribute("data-current");cr=e,hr(),n.setAttribute("data-current","")},Hn.appendChild(n)}}se=n,hr()}else Fn.innerHTML="Sorry, no items are available at this moment."})).catch((e=>{Fn.textContent="Failed to load contents. Message: "+e}));{const mr=n("item-search"),gr=r("#item-search>input");let br=0;mr.onsubmit=e=>{e.preventDefault(),e.stopPropagation(),lr=gr.value.trim().toLowerCase(),
clearTimeout(br),hr()},gr.onblur=()=>{lr=gr.value.trim().toLowerCase(),clearTimeout(br),hr()},gr.oninput=()=>{clearTimeout(br),br=setTimeout((()=>{lr=gr.value.trim().toLowerCase(),hr()}),1e3)}}{const yr=n("item-sort");yr.value=sr=Y.get("_$so")||"n",yr.onchange=()=>{Y.set("_$so",sr=yr.value),hr()}}function ur(e,t){return e>t?1:e<t?-1:0}function hr(){dr=0,ar.length=0
;const e="all"===cr?lr.length>0?se.filter((e=>e.name.toLowerCase().indexOf(lr)>=0||e.desc.toLowerCase().indexOf(lr)>=0||e.cats.indexOf(lr)>=0)):[...se]:se.filter((e=>e.cats.split(",").indexOf(cr)>=0&&(0===lr.length||e.name.toLowerCase().indexOf(lr)>=0||e.desc.toLowerCase().indexOf(lr)>=0)));if(0===e.length)return tr.disabled=!0,nr.disabled=!0,void(Fn.innerHTML="Sorry, no matching results found :(");switch(sr){case"r":a(e);break;case"d":e.sort(((e,t)=>t.date-e.date));break;default:
e.sort(((e,t)=>ur(e.name,t.name)))}for(let t=0;t<e.length;t+=100)ar.push(e.slice(t,t+100));pr()}function pr(){rr.min="1",rr.max=or.innerHTML=ar.length+"",rr.value=dr+1+"",Fn.innerHTML="",tr.disabled=dr<1,dr>=ar.length-1?nr.disabled=!0:nr.disabled=!1;for(const e of ar[dr])e.stock>=1&&Fn.appendChild(g(e))}function fr(){null!=ce&&ce();for(const e of he)e.removeAttribute("data-current");R.scrollTo({top:0,left:0,behavior:"instant"}),W.checked=!1,ir.innerHTML="",ir.setAttribute("data-current","");{
const e=t.createElement("h2");e.textContent="Confirm Purchase",ir.appendChild(e)}let e=0;const n=[];for(const o of Kn){const i=t.createElement("div"),a=o.price,s=o.date.toString(36);{const e=t.createElement("img");e.src=o.prev[0],e.alt="Preview",e.width=50,e.height=50,e.loading="lazy",e.decoding="async",e.draggable=!1,i.appendChild(e)}{const e=t.createElement("div");e.textContent=o.name,i.appendChild(e)}{const e=t.createElement("span");e.textContent="$"+a.toFixed(2),i.appendChild(e)}{
const c=t.createElement("button");c.type="button",c.title="Remove item",c.onclick=()=>{const t=Kn.indexOf(o,0);if(t>=0){i.remove(),Kn.splice(t,1),r.textContent="Total: $"+(e-a).toFixed(2);{const e=n.indexOf(s,0);e>=0&&n.splice(e,1)}0===Kn.length&&(U.click(),er.style.display="none")}},i.appendChild(c)}e+=a,n.push(s),ir.appendChild(i)}const r=t.createElement("span");r.textContent="Total: $"+e.toFixed(2),ir.appendChild(r);const o=t.createElement("button");o.type="button",o.className="pri-button",
o.textContent="Continue",o.onclick=()=>{if(null==X)return void F.click();const e=t.createElement("form");e.action="https://secure.nettleweb.com/pay.xml",e.method="GET",e.target="_self",
e.innerHTML=`<div>Please fill in the additional information below. It is required for continuing your purchase.</div>\n\t<fieldset>\n\t\t<legend>Delivery Address</legend>\n\t\t<div>\n\t\t\t<label for="addr1">Address Line 1:</label>\n\t\t\t<input id="addr1" name="a1" type="text" required="" minlength="1" maxlength="200" autocomplete="off" />\n\t\t</div>\n\t\t<div>\n\t\t\t<label for="addr2">Address Line 2:</label>\n\t\t\t<input id="addr1" name="a2" type="text" maxlength="200" autocomplete="off" />\n\t\t</div>\n\t\t<div>\n\t\t\t<label for="city">City:</label>\n\t\t\t<input id="city" name="c" type="text" required="" minlength="1" maxlength="100" autocomplete="off" />\n\t\t</div>\n\t\t<div>\n\t\t\t<label for="region">State/Region:</label>\n\t\t\t<input id="region" name="r" type="text" required="" minlength="1" maxlength="100" autocomplete="off" />\n\t\t</div>\n\t\t<div>\n\t\t\t<label for="country">Country:</label>\n\t\t\t<select id="country" name="n">${ls.cc}</select>\n\t\t</div>\n\t\t<div>\n\t\t\t<label for="postcode">Post Code:</label>\n\t\t\t<input id="postcode" name="p" type="text" required="" minlength="3" maxlength="20" autocomplete="off" />\n\t\t</div>\n\t</fieldset>\n\t<div>Notice: Depending on your geolocation, additional delivery and processing fees may apply.</div>\n\t<button type="submit" class="pri-button">Continue</button>`
;{const r=t.createElement("input");r.type="hidden",r.name="i",r.value=n.join(";"),e.appendChild(r)}{const n=t.createElement("input");n.type="hidden",n.name="u",n.value=X,e.appendChild(n)}ir.innerHTML="",ir.appendChild(e)},ir.appendChild(o)}oe=async e=>{null!=ce&&ce();for(const e of he)e.removeAttribute("data-current");R.scrollTo({top:0,left:0,behavior:"instant"}),W.checked=!1,qn.setAttribute("data-current",""),zn.innerHTML="",Un.innerHTML="",Zn.textContent=e.date.toString(36),
Gn.textContent=e.name,Yn.textContent=e.cats.replace(/\,/g,", ")||"None",Xn.textContent=c(e.date),Qn.textContent=e.desc||"No information provided by the provider.",Vn.textContent=e.stock.toString(10),Wn.textContent="$"+e.price.toFixed(2);for(const n of e.prev){const e=t.createElement("img");e.src=n,e.alt="Preview",e.width=400,e.height=300,e.loading="lazy",e.decoding="async",e.draggable=!1,Un.appendChild(e)}e.stock>=1?Kn.indexOf(e,0)<0?(Jn.disabled=!1,$n.disabled=!1,Jn.onclick=()=>{Kn.push(e),
$n.onclick=fr,Jn.disabled=!0,er.style.display="block"},$n.onclick=()=>{Kn.push(e),fr(),er.style.display="block"}):(Jn.disabled=!0,$n.disabled=!1,$n.onclick=fr):(Jn.disabled=!0,$n.disabled=!0);{const n=await h(1,e.user||"anonymous");{const e=t.createElement("img");e.alt="Avatar",e.width=40,e.height=40,e.loading="eager",e.decoding="sync",e.draggable=!1;{const t=URL.createObjectURL(new Blob([n.avatar],{type:"image/jpeg",endings:"native"}));e.src=t,await e.decode(),URL.revokeObjectURL(t)}
zn.appendChild(e)}{const e=t.createElement("div");switch(e.className="user",e.textContent=n.id,n.vip){case 3:e.setAttribute("data-vip","gold");break;case 4:e.setAttribute("data-vip","diamond")}zn.appendChild(e)}zn.onclick=()=>{ae(n.uid).catch((e=>{o("Failed to open user profile. Message: "+e)}))}}},tr.onclick=()=>{dr--,pr(),Fn.scrollIntoView({behavior:"instant",inline:"start",block:"start"})},nr.onclick=()=>{dr++,pr(),Fn.scrollIntoView({behavior:"instant",inline:"start",block:"start"})},
rr.onblur=()=>{const e=parseInt(rr.value.trim(),10)||0;dr+1!==e&&(e<1||e>ar.length?(rr.value="1",dr=0):dr=e-1,pr(),Fn.scrollIntoView({behavior:"instant",inline:"start",block:"start"}))},rr.onchange=()=>{rr.blur()},er.onclick=fr}{const vr=n("addr"),wr=n("ub-mode");function kr(t){switch(wr.value){case"raw-embed":p(t);break;case"prq-embed":!function(t){const n=(J||e).PaymentRequest;"function"==typeof n?new n([{data:[t],supportedMethods:"https://nettleweb.com/res/pay.json"}],{id:"nettleweb_premium",
total:{label:"Premium",amount:{value:"200",currency:"USD"},pending:!0},modifiers:[],displayItems:[]}).show():o("Error: Your browser does not support this feature.")}(t);break;case"puppeteer":h(41,[t,20]).then((e=>{p(e)})).catch((e=>{o("Failed to create new session. Message: "+e)}));break;default:h(41,[t,10]).then((e=>{p(e)})).catch((e=>{o("Failed to create new session. Message: "+e)}))}}function Cr(e,t){const n=i(e=e.replace(/\s+/g," ").trim());if(null!=n)return n.href
;if(e.includes(" "))return t+encodeURIComponent(e);const r=e.indexOf("/");if(0===r)return t+encodeURIComponent(e);if(r>0){if(Er(e.substring(0,r)))return"https://"+e}else if(Er(e)&&e.includes("."))return"https://"+e;return t+encodeURIComponent(e)}function Er(e){e=e.toLowerCase();for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if((n<48||n>57)&&(n<97||n>122)&&45!==n&&46!==n)return!1}return!0}wr.value=Y.get("__unbl_mode_")||"raw-embed-v2",wr.onchange=()=>{Y.set("__unbl_mode_",wr.value)},
vr.onkeydown=e=>{if("Enter"===e.key){e.preventDefault(),e.stopPropagation();const t=vr.value.trim();t.length>0&&kr(Cr(t,"https://www.google.com/search?igu=1&q="))}},n("ub-google").onclick=()=>{kr("https://www.google.com/webhp?igu=1")},n("ub-discord").onclick=()=>{kr("https://discord.com/")},n("ub-facebook").onclick=()=>{kr("https://www.facebook.com/")},n("ub-instagram").onclick=()=>{kr("https://www.instagram.com/")}}{const xr=n("emulator"),Ar=n("core"),Tr=n("bios"),Lr=n("game-rom")
;xr.onchange=()=>{switch(xr.value){case"ps2":Ar.value="ps2",Ar.disabled=!0,Tr.disabled=!0,Lr.accept=".bin, .iso, application/octet-stream";break;case"swf":Ar.value="swf",Ar.disabled=!0,Tr.disabled=!0,Lr.accept=".swf";break;case"dos":Ar.value="dos",Ar.disabled=!0,Tr.disabled=!0,Lr.accept=".jsdos, .zip";break;default:Ar.value="nes",Ar.disabled=!1,Tr.disabled=!1,Lr.removeAttribute("accept")}},n("startemu").onclick=()=>{var e,t;const n=null===(e=Lr.files)||void 0===e?void 0:e.item(0)
;if(null==n)return void o("Please choose a valid game ROM file.");const r=xr.value;if("emu"===r){const e=null===(t=Tr.files)||void 0===t?void 0:t.item(0);return O.appendChild(f(r,[URL.createObjectURL(n),null==e?"":e,Ar.value])),void(B.style.display="block")}n.arrayBuffer().then((e=>{O.appendChild(f(r,e)),B.style.display="block"})).catch((e=>{o("Failed to read game file. Message: "+e)}))}}{
const Sr=n("upload-message"),Ir=n("game-name"),Mr=n("game-type"),jr=n("game-file"),_r=n("game-tags"),Or=n("game-desc"),Br=n("upload-test"),Nr=n("test-frame"),Pr=n("upload");let Dr=!1;async function Rr(e,t,n){if(null==X)throw Error("Invalid user context");let r;for(let o=0;o<10;o++)try{return void await h(64,[X,e,t,n])}catch(e){r=e}throw Error("Too many unsuccessful attempts. Message from the last attempt: "+r)}Sr.onclick=()=>{Sr.innerHTML="",Sr.style.display="none"},jr.onchange=()=>{Dr=!1,
Nr.innerHTML="",Br.style.display="none"},Mr.onchange=()=>{switch(Mr.value){case"html5":jr.accept=".zip";break;case"flash":jr.accept=".swf";break;case"dos":jr.accept=".jsdos";break;default:jr.removeAttribute("accept")}},Pr.onclick=()=>{var e;if(null==X)return void o("Invalid session. Please refresh this page and try again.");const t=Ir.value.replace(/\s+/g," ").trim();if(0===t.length)return void o("Game name must not be empty.")
;if(t.length>256)return void o("Game name must be less than 256 characters in length.");const n=null===(e=jr.files)||void 0===e?void 0:e.item(0);if(null==n)return void o("Please choose a valid game file.");const r=n.size;if(0===r)return void o("Uploading empty game files is not allowed.");if(r>125829120)return void o("Uploading files larger than 120MB is not supported currently.")
;const i=Mr.value,a=Or.value.replace(/\s+/g," ").trim(),s=_r.value.trim().toLowerCase().split(",").map((e=>e.replace(/\s+/g," ").trim())).join(",");if(s.length>300)o("Game tags list must be less than 300 characters long in total.");else if(a.length>5e3)o("Game description text must be less than 5000 characters in length.");else{switch(i){case"dos":case"flash":if(!Dr)return void n.arrayBuffer().then((e=>{Nr.appendChild(f(i,e)),Br.style.display="block",Dr=!0})).catch((e=>{
o("Failed to read game file. Message: "+e)}));break;case"html5":break;default:return void o("Please select a valid game type.")}Pr.disabled=!0,Sr.innerHTML="Processing...",Sr.style.color="#808080",Sr.style.display="block",(async()=>{const e=await h(13,[X,t,i,s,a]);for(let t=0;t<r;){const o=t,i=t+=10485760;if(i>=r){const t=n.slice(o,r,"application/octet-stream");await Rr(e,await t.arrayBuffer(),!0)}else{const t=n.slice(o,i,"application/octet-stream");await Rr(e,await t.arrayBuffer(),!1)}}
})().then((()=>{Sr.innerHTML="\u2713Success!",Sr.style.color="#008000",Sr.style.display="block",Dr=!1,Nr.innerHTML="",Br.style.display="none",Ir.value="",jr.value="",_r.value="",Or.value="",Pr.disabled=!1})).catch((e=>{o("Failed to upload the selected game file. Message: "+e),Sr.innerHTML="\u2715Error",Sr.style.color="#ff0000",Sr.style.display="block",Pr.disabled=!1}))}}}{
const Fr=n("item-id"),Hr=n("item-add"),Ur=n("item-name"),zr=n("item-tags"),Wr=n("item-prev"),Vr=n("item-del1"),qr=n("item-del2"),Gr=n("item-desc"),Yr=n("item-stock"),Xr=n("item-price"),Qr=n("s-orders"),Zr=n("store-manager-page");Hr.onclick=async()=>{const e=Ur.value.replace(/\s+/g," ").trim();if(0===e.length)return void o("Item name must not be empty.");if(e.length>256)return void o("Item name must be less than 256 characters in length.")
;const t=zr.value.trim().toLowerCase().split(",").map((e=>e.replace(/\s+/g," ").trim())).join(",");if(0===t.length)return void o("Item must have at least one tag.");if(t.length>300)return void o("Item tags list must be less than 300 characters long in total.");const n=Gr.value.replace(/\s+/g," ").trim();if(n.length<10)return void o("Item description must have at least 10 characters.");if(n.length>5e3)return void o("Item description text must be less than 5000 characters in length.")
;const r=parseFloat(Vr.value)||0,i=parseFloat(qr.value)||0;if(r<0||r>99.99||i<0||i>99.99)return void o("Item delivery price must be between the range: 0-99.99");const a=parseInt(Yr.value,10)||0;if(a<1||a>99999)return void o("Item stock must be between the range: 1-99999");const s=parseFloat(Xr.value)||0;if(s<.01||s>999.99)return void o("Item price must be between the range: 0.01-999.99");const c=Array.from(Wr.files||[])
;if(c.length<1)o("Please provide at least one preview image for this item.");else if(c.length>10)o("The maximum number of preview images allowed for this item is 10.");else{Hr.disabled=!0;for(let e=0;e<c.length;e++){const t=await d(c[e],400,300);if(null==t)return void o("Error: Failed to decode and resize preview images.");c[e]=await t.arrayBuffer()}try{await h(49,[X,Fr.value.trim(),e,t,n,c,a,s,r,i])}catch(e){o("Failed to add this item. Message: "+e)}Fr.value="",Ur.value="",zr.value="",
Wr.value="",Gr.value="",Yr.value="",Xr.value="",Hr.disabled=!1}},n("sm").onclick=()=>{null!=ce&&ce();for(const e of he)e.removeAttribute("data-current");R.scrollTo({top:0,left:0,behavior:"instant"}),Qr.innerHTML="Loading...",W.checked=!1,Zr.setAttribute("data-current",""),h(51,X).then((e=>{if(!Array.isArray(e)||e.length<1)return void(Qr.innerHTML="You don't have any orders yet.");const n=t.createElement("table")
;n.innerHTML='<thead><tr><th scope="col">ID</th><th scope="col">Date</th><th scope="col">Items</th><th scope="col">Price*</th><th scope="col">Contact</th><th scope="col">Address</th><th scope="col">Confirm Payment &amp; Delivery</th></tr></thead>';{const r=t.createElement("tbody");for(const n of e){const e=t.createElement("tr");{const r=t.createElement("td");r.textContent=n.id,e.appendChild(r)}{const r=t.createElement("td");r.textContent=c(n.date),e.appendChild(r)}{const r=t.createElement("td")
;for(const e of n.pros){const n=t.createElement("div");for(const t of se)if(t.date.toString(36)===e){n.textContent=t.name;break}r.appendChild(n)}e.appendChild(r)}{const r=t.createElement("td");r.textContent="$"+n.price.toFixed(2),e.appendChild(r)}{const r=t.createElement("td");r.textContent=n.buyerEmail,e.appendChild(r)}{const r=t.createElement("td");r.textContent=n.address,e.appendChild(r)}{const r=t.createElement("td");switch(n.state){case 0:{const e=t.createElement("button");e.type="button",
e.textContent="Confirm",e.onclick=()=>{h(53,[X,n.id]).then((()=>{r.innerHTML="Confirmed"})).catch((e=>{o("Failed to confirm payment. Message: "+e)}))},r.appendChild(e)}{const e=t.createElement("button");e.type="button",e.textContent="Reject",e.onclick=()=>{h(52,[X,n.id,!0]).then((()=>{r.innerHTML="Rejected"})).catch((e=>{o("Failed to reject payment. Message: "+e)}))},r.appendChild(e)}break;case 1:r.innerHTML="Aborted";break;case 2:r.innerHTML="Confirmed";break;default:r.innerHTML="Not Allowed"}
e.appendChild(r)}r.appendChild(e)}n.appendChild(r)}Qr.innerHTML="<div>* including additional delivery fee</div>",Qr.prepend(n)})).catch((e=>{o("Failed to fetch order list. Message: "+e)}))}}{const Kr=n("payu");Kr.onclick=()=>{const e=de.value.trim();e.length>1e3?o("Payment description must have more than 1000 characters in length."):(Kr.disabled=!0,h(54,[X,e,le.value]).then((()=>{Kr.disabled=!1})).catch((e=>{o("Failed to update payment description. Message: "+e)})))}}{
const Jr=n("picker"),$r=n("msglist"),eo=n("history"),to=n("channels"),no=n("ufile"),ro=n("messages"),oo=ro.children,io=n("channel-name"),ao=n("chinfo"),so=n("sendmsg"),co=n("global"),lo=n("friends"),uo=n("chatgpt"),ho=n("starter");{const po=n("chat"),fo=n("sidemenu"),mo=n("toggle");mo.onclick=()=>{"Close"===mo.title?(mo.title="Menu",po.style.width="100%",fo.style.display="none"):(mo.title="Close",po.removeAttribute("style"),fo.removeAttribute("style"))},q&&(mo.title="Menu",po.style.width="100%",
fo.style.display="none")}{const go=n("dm-un"),bo=n("dm-btn");bo.onclick=async()=>{const e=go.value.trim().toLowerCase();if(e.length<4||e.length>20||!/^[\-a-z0-9]+$/.test(e))o("Please provide a valid username.");else{bo.disabled=!0;try{const{uid:t}=await h(1,"@"+e);if("string"!=typeof t)throw Error("Failed to parse server response");await re(t)}catch(e){o("Failed to started new chat. Message: "+e)}go.value="",bo.disabled=!1}}}{
const yo=n("chat-btn"),vo=n("goto-chat"),wo=n("community-page"),ko=to.children,Co=$r.children;let Eo,xo,Ao,To,Lo,So=!1;function Io({id:e,msg:n,uid:r,vip:i,user:a,icon:c,files:l}){const d=t.createElement("div");d.setAttribute("id",e);const u=t.createElement("div");switch(u.className="user",u.textContent=a,i){case 3:u.setAttribute("data-vip","gold");break;case 4:u.setAttribute("data-vip","diamond")}{const e=t.createElement("img");if(e.alt="Avatar",e.width=32,e.height=32,e.loading="lazy",
e.decoding="async",e.draggable=!1,"string"!=typeof c){const t=URL.createObjectURL(new Blob([c],{type:"image/jpeg",endings:"native"}));e.addEventListener("load",(()=>URL.revokeObjectURL(t)),{once:!0,passive:!0}),e.src=t}else e.src=c.startsWith("https://")?s(c):c;null!=r&&(e.style.cursor=u.style.cursor="pointer",e.onclick=u.onclick=()=>{ae(r).catch((e=>{o("Failed to open user profile. Message: "+e)}))}),d.appendChild(e)}const p=t.createElement("div");if(p.appendChild(u),n.length>0){
const i=t.createElement("span");if(i.textContent=n,p.appendChild(i),null!=Q&&r===Q){{const r=t.createElement("button");r.type="button",r.title="Edit",r.className="edit",r.onclick=()=>{const a=t.createElement("div"),s=t.createElement("input");s.type="text",s.value=n,s.required=!0,s.minLength=1,s.maxLength=1e3,s.placeholder="Message",s.autocomplete="off",a.appendChild(s);const c=t.createElement("button");c.type="button",c.title="Save",c.className="tick",a.appendChild(c)
;const l=t.createElement("button");l.type="button",l.title="Cancel",l.className="cross",a.appendChild(l),c.onclick=()=>{const t=s.value.trim();t.length<1?o("Messages cannot be empty."):t.length>1e3?o("Messages cannot be longer than 1000 characters."):null!=X&&null!=To?h(62,[X,e,To,t]).then((()=>{n=t,a.remove(),r.disabled=!1})).catch((e=>{o("Failed to update message. Reason: "+e)})):o("Invalid context. Please refresh this page.")},l.onclick=()=>{a.remove(),r.disabled=!1,i.innerHTML=n},
r.disabled=!0,i.innerHTML="",i.appendChild(a)},d.appendChild(r)}{const n=t.createElement("button");n.type="button",n.title="Delete",n.className="delete",n.onclick=()=>{null!=X&&null!=To?(n.disabled=!0,h(62,[X,e,To,""]).catch((e=>{o("Failed to delete message. Reason: "+e)}))):o("Invalid context. Please refresh this page.")},d.appendChild(n)}}}for(const{name:e,type:n,url:r}of l){const o=s(r);{const n=t.createElement("a");n.rel="noopener nofollow",n.href=o,n.target="_blank",n.download="",
n.textContent=e||"file",p.appendChild(n)}switch(n.split("/",2)[0]){case"image":{const e=t.createElement("img");e.src=o,e.alt="Attachment",e.width=500,e.height=500,e.loading="lazy",e.decoding="async",e.draggable=!1,p.appendChild(e)}break;case"audio":{const e=t.createElement("audio");e.src=o,e.muted=!1,e.preload="metadata",e.controls=!0,p.appendChild(e)}break;case"video":{const e=t.createElement("video");e.src=o,e.muted=!0,e.width=500,e.height=500,e.autoplay=!0,e.controls=!0,p.appendChild(e)}}}
return d.appendChild(p),d}function Mo(e,n){const r=t.createElement("div");r.setAttribute("id",e);{const e=t.createElement("img");e.src="/res/group.svg",e.alt="Group",e.width=32,e.height=32,e.loading="lazy",e.decoding="async",e.draggable=!1,r.appendChild(e)}{const e=t.createElement("div");e.textContent=n,r.appendChild(e)}return r.onclick=()=>{So||(So=!0,ro.innerHTML="<div>Loading...</div>",h(28,[X,To=e]).then((e=>{var t;Lo=null===(t=e[e.length-1])||void 0===t?void 0:t.id,ro.innerHTML=""
;for(const t of e)ro.prepend(Io(t));ro.scrollTo({behavior:"instant",left:0,top:ro.scrollHeight});for(const e of Co)e.removeAttribute("data-current");q||(ao.style.display="block",ao.innerHTML="View channel info",ao.onclick=()=>{o("Function not implemented!")}),r.setAttribute("data-current",""),ho.style.display="none",io.textContent=n,So=!1})).catch((e=>{o("Failed to initialize channel. Message: "+e),So=!1})))},r}function jo(e,n,r,i,a){const s=t.createElement("div");s.setAttribute("id",e),
s.setAttribute("data-user",n);{const e=t.createElement("img");e.src="/res/group.svg",e.alt="Avatar",e.width=32,e.height=32,e.loading="lazy",e.decoding="async",e.draggable=!1;{const t=URL.createObjectURL(new Blob([a],{type:"image/jpeg",endings:"native"}));e.addEventListener("load",(()=>URL.revokeObjectURL(t)),{once:!0,passive:!0}),e.src=t}s.appendChild(e)}{const e=t.createElement("div");switch(e.className="user",e.textContent=i,r){case 3:e.setAttribute("data-vip","gold");break;case 4:
e.setAttribute("data-vip","diamond")}s.appendChild(e)}return s.onclick=()=>{So||(So=!0,ro.innerHTML="<div>Loading...</div>",h(28,[X,To=e]).then((e=>{var t;Lo=null===(t=e[e.length-1])||void 0===t?void 0:t.id,ro.innerHTML="";for(const t of e)ro.prepend(Io(t));ro.scrollTo({behavior:"instant",left:0,top:ro.scrollHeight});for(const e of Co)e.removeAttribute("data-current");q||(ao.style.display="block",ao.innerHTML="View user profile",ao.onclick=()=>{ae(n).catch((e=>{
o("Failed to open user profile. Message: "+e)}))}),s.setAttribute("data-current",""),ho.style.display="none",io.textContent=i,So=!1})).catch((e=>{o("Failed to initialize channel. Message: "+e),So=!1})))},s}function _o(e,t){if(To===e){const e=ro.scrollHeight-ro.clientHeight;ro.appendChild(Io(t)),e===ro.scrollTop&&ro.scrollTo({behavior:"instant",left:0,top:ro.scrollHeight})}}function Oo(e,t){if(To===e)for(const e of oo)if(e.getAttribute("id")===t){e.remove();break}}function Bo(e,t,n){
if(To===e)for(const e of oo)if(e.getAttribute("id")===t){const r=e.querySelector("div>span");null!=r?r.textContent=n:o("Failed to update message: "+t);break}}async function No(){if(co.disabled=!0,lo.disabled=!0,uo.disabled=!0,yo.disabled=!0,vo.disabled=!0,no.disabled=!0,so.disabled=!0,0===ko.length)try{const e=await h(22);for(const n of e)if("#"===n[0]){const e=t.createElement("span");e.textContent=n.slice(1),to.appendChild(e)}else{const[e,r,i]=n.split(":",3),a=t.createElement("div")
;a.textContent=e,a.onclick=()=>{So||(So=!0,ro.innerHTML="<div>Loading...</div>",h(7,[To=r]).then((t=>{var n;Lo=null===(n=t[t.length-1])||void 0===n?void 0:n.id,ro.innerHTML="";for(const e of t)ro.prepend(Io(e));ro.scrollTo({behavior:"instant",left:0,top:ro.scrollHeight});for(const e of ko)e.removeAttribute("data-current");no.style.display="f"===i?"block":"none",a.setAttribute("data-current",""),io.textContent=e,So=!1})).catch((e=>{o("Failed to initialize channel. Message: "+e),So=!1})))},
to.appendChild(a)}}catch(e){return void o("Failed to load channel list. Message: "+e)}To=void 0,ro.innerHTML="",io.innerHTML="Server",ho.style.display="none",q||(ao.innerHTML="Open chat in Discord",ao.style.display="block",ao.onclick=()=>{v("https://discord.gg/djdH3kVd4v")}),Z.removeAllListeners("msg"),Z.removeAllListeners("msgdel"),Z.removeAllListeners("msgupd"),Z.on("msg",_o),Z.on("msgdel",Oo),Z.on("msgupd",Bo);{const e=to.querySelector("div");null!=e?(ro.onscrollend=()=>{
!So&&null!=To&&ro.scrollTop<100&&(So=!0,h(7,[To,Lo]).then((e=>{if(e.length>0){const t=ro.scrollHeight;Lo=e[e.length-1].id;for(const t of e)ro.prepend(Io(t));ro.scrollTo({behavior:"instant",left:0,top:ro.scrollHeight-t})}So=!1})).catch((e=>{o("Failed to fetch messages. Reason: "+e),So=!1})))},so.onkeydown=e=>{if("Enter"===e.key){if(e.preventDefault(),e.stopPropagation(),null==X)return void F.click();const t=so.value.trim();if(t.length<1)return void o("Messages cannot be empty.")
;if(t.length>1e3)return void o("Messages cannot be longer than 1000 characters.");if(null==To)return void o("Please select a valid channel for posting messages.");so.value="",so.disabled=!0,h(8,[X,To,t]).then((()=>{so.disabled=!1})).catch((e=>{o("Failed to post text message. Message: "+e),so.disabled=!1}))}},e.click()):(to.innerHTML="No public channels are available at this moment.",so.onkeydown=ro.onscrollend=null)}so.onfocus=e=>{e.preventDefault(),e.stopPropagation(),null==X&&F.click()},
lo.removeAttribute("data-current"),uo.removeAttribute("data-current"),co.setAttribute("data-current",""),$r.removeAttribute("style"),eo.removeAttribute("style"),to.style.display="block",co.disabled=!1,lo.disabled=!1,uo.disabled=!1,yo.disabled=!1,vo.disabled=!1,no.disabled=!1,so.disabled=!1}async function Po(){if(null!=X&&null!=Q){co.disabled=!0,lo.disabled=!0,uo.disabled=!0,yo.disabled=!0,vo.disabled=!0,no.disabled=!0,so.disabled=!0,To=void 0,$r.innerHTML="",ro.innerHTML="",
io.innerHTML="Messages",ho.style.display="block",ao.style.display="none";try{for(const{id:e,name:t,mode:n,users:r}of await h(27,X))if("0"===n){const{id:t,uid:n,vip:o,avatar:i}=await h(1,r[0]);$r.appendChild(jo(e,n,o,t,i))}else $r.appendChild(Mo(e,t))}catch(e){return void o("Failed to load friends list. Message: "+e)}Z.removeAllListeners("msg"),Z.removeAllListeners("msgdel"),Z.removeAllListeners("msgupd"),Z.on("msg",_o),Z.on("msgdel",Oo),Z.on("msgupd",Bo),ro.onscrollend=()=>{
!So&&null!=To&&ro.scrollTop<100&&(So=!0,h(28,[X,To,Lo]).then((e=>{if(e.length>0){const t=ro.scrollHeight;Lo=e[e.length-1].id;for(const t of e)ro.prepend(Io(t));ro.scrollTo({behavior:"instant",left:0,top:ro.scrollHeight-t})}So=!1})).catch((e=>{o("Failed to fetch messages. Reason: "+e),So=!1})))},so.onkeydown=e=>{if("Enter"===e.key){e.preventDefault(),e.stopPropagation();const t=so.value.trim();if(t.length<1)return void o("Messages cannot be empty.")
;if(t.length>1e3)return void o("Messages cannot be longer than 1000 characters.");if(null==To)return void o("Please select a valid channel for posting messages.");so.value="",so.disabled=!0,(async()=>{if(To.startsWith("tmp$")){const e=To.slice(4);try{To=await h(30,[X,[Q,e],"dm_channel",0]);const t=jo(To,e,Ao,xo,Eo);t.setAttribute("data-current",""),$r.appendChild(t)}catch(e){return void o("Failed to create new channel. Message: "+e)}ro.innerHTML=""}try{await h(8,[X,To,t])}catch(e){
o("Failed to post text message. Reason: "+e)}})().then((()=>{so.disabled=!1}))}},co.removeAttribute("data-current"),uo.removeAttribute("data-current"),lo.setAttribute("data-current","1"),eo.removeAttribute("style"),to.removeAttribute("style"),$r.style.display="block",no.style.display="block",co.disabled=!1,lo.disabled=!1,uo.disabled=!1,yo.disabled=!1,vo.disabled=!1,no.disabled=!1,so.disabled=!1}else F.click()}{const Do=t.createElement("input");Do.type="file",Do.multiple=!0,Do.onchange=async()=>{
if(null==To)return void o("Please select a valid channel for uploading files.");const e=Do.files;if(null!=e&&e.length>0){if(e.length>10)return void o("Uploading more than 10 files at once is not supported.");no.disabled=!0,so.disabled=!0;try{const t=[];let n=0;for(const r of e){const e=r.size;if(e<1)throw Error("Empty files are not allowed.");if(e>1e7)throw Error("Files larger than 10MB are not supported.");if((n+=e)>12e6)throw Error("The total size of a single upload cannot exceed 12MB.")
;t.push({name:r.name,attachment:await r.arrayBuffer()})}await h(12,[X,To,t])}catch(e){o("Failed to upload file. Message: "+e)}Do.value="",no.disabled=!1,so.disabled=!1}},no.onclick=()=>{Do.click()}}yo.onclick=vo.onclick=()=>{null!=ce&&ce();for(const e of he)e.removeAttribute("data-current");W.checked=!1,wo.setAttribute("data-current",""),yo.setAttribute("data-current",""),R.scrollTo({top:0,left:0,behavior:"instant"}),null==To&&No()},lo.onclick=()=>{Po()},co.onclick=()=>{No()},re=async e=>{
await Po(),ho.style.display="none",null!=ce&&ce();for(const e of he)e.removeAttribute("data-current");W.checked=!1,wo.setAttribute("data-current",""),yo.setAttribute("data-current",""),R.scrollTo({top:0,left:0,behavior:"instant"});for(const t of Co)if(t.getAttribute("data-user")===e)return void t.click();const{id:t,vip:n,avatar:r}=await h(1,e);To="tmp$"+e,Ao=n,Eo=r,io.innerHTML=xo=t,ro.innerHTML="<div>Send a message to start a new chat with "+t+".</div>"
;for(const e of Co)e.removeAttribute("data-current")}}{const Ro=eo.children;let Fo=null;const Ho=JSON.parse(Y.get("__chats")||"[]");function Uo({role:e,text:n}){const r=t.createElement("div");{const n=t.createElement("img");n.width=32,n.height=32,n.loading="lazy",n.decoding="async",n.draggable=!1,"u"===e?(n.src="res/user.svg",n.alt="User"):(n.src="res/bot.svg",n.alt="Assistant"),r.appendChild(n)}{const e=t.createElement("div");e.textContent=n,r.appendChild(e)}return ro.appendChild(r),r}
function zo(e){const n=e.title;if("string"!=typeof n)throw Error("Invalid chat object");const r=t.createElement("div");r.onclick=()=>{for(const e of Ro)e.removeAttribute("data-current");r.setAttribute("data-current","1"),ro.innerHTML="",io.textContent=n;for(const t of Fo=e.msgs)Uo(t);ro.scrollTo({behavior:"instant",left:0,top:ro.scrollHeight})};{const e=t.createElement("div");e.textContent=n,r.appendChild(e)}{const n=t.createElement("button");n.type="button",n.title="Delete",n.onclick=t=>{
t.preventDefault(),t.stopPropagation();const n=Ho.indexOf(e,0);n>=0&&(Fo=null,r.remove(),Ho.splice(n,1),ro.innerHTML="",Y.set("__chats",JSON.stringify(Ho,void 0,0)))},r.appendChild(n)}eo.appendChild(r)}function Wo(){so.disabled=!1,Z.removeAllListeners("gptres"),Z.removeAllListeners("gptend"),Z.removeAllListeners("gpterr")}n("newchat").onclick=()=>{for(const e of Ro)e.removeAttribute("data-current");Fo=null,ro.innerHTML="",io.innerHTML="New chat"},uo.onclick=()=>{
for(const e of Ro)e.removeAttribute("data-current");if(Fo=null,ro.innerHTML="",io.innerHTML="New chat",ho.style.display="none",ao.style.display="none",Z.removeAllListeners("msg"),Z.removeAllListeners("msgdel"),Z.removeAllListeners("msgupd"),Ro.length<2)for(const e of Ho)zo(e);so.onfocus=ro.onscrollend=null,so.onkeydown=e=>{if("Enter"===e.key){e.preventDefault(),e.stopPropagation();const t=so.value.trim();if(t.length<1)return void o("Messages cannot be empty.")
;if(t.length>8e3)return void o("Messages cannot be longer than 8000 characters.");if(so.value="",so.disabled=!0,null==Fo){const e={title:t.slice(0,100),msgs:Fo=[]};zo(e),Ho.push(e)}const n={role:"u",text:t};Uo(n),Fo.push(n);const r={role:"a",text:"Processing..."},i=Uo(r),a=i.lastElementChild;Z.on("gptres",(e=>{a.textContent=r.text=e,a.scrollIntoView({block:"end",inline:"end",behavior:"instant"})})),Z.on("gptend",(()=>{Wo(),Fo.push(r),Y.set("__chats",JSON.stringify(Ho,void 0,0))})),
Z.on("gpterr",(e=>{Wo(),Fo.pop(),i.remove(),o("Failed to process the request. Message: "+e)})),Z.emit("gptreq",Fo)}},co.removeAttribute("data-current"),lo.removeAttribute("data-current"),uo.setAttribute("data-current","1"),$r.removeAttribute("style"),to.removeAttribute("style"),eo.style.display="block",no.style.display="none",co.disabled=!1,lo.disabled=!1,uo.disabled=!1,no.disabled=!0,so.disabled=!1}}n("emoji").onclick=()=>{if("block"!==Jr.style.display){if(null==Jr.firstElementChild){
const e=new Bi({locale:"POSIX",emojiVersion:1e3});e.addEventListener("emoji-click",(e=>{e.preventDefault(),e.stopPropagation();const t=e.detail.unicode;null!=t&&so.setRangeText(t,so.selectionStart||0,so.selectionEnd||0,"end")})),Jr.appendChild(e)}Jr.style.display="block"}else Jr.style.display="none"}}{const Vo=n("nwidget");z.onclick=()=>{if(null!=X){if(Vo.hasAttribute("data-current"))return Vo.removeAttribute("data-current"),void z.removeAttribute("data-current");Vo.innerHTML="",z.disabled=!0,
h(60,X).then((e=>{if(Array.isArray(e)&&e.length>0)for(const n of e){const e=t.createElement("div");{const r=t.createElement("div");switch(n.type){case 0:r.textContent=n.text;break;case 1:r.innerHTML="<b>"+n.user+"</b> sent a direct message to you.",e.onclick=()=>{re(n.fuid).catch((e=>{o("Failed to open chat channel. Message: "+e)}))};break;case 2:r.innerHTML="<b>"+n.user+"</b> mentioned you in a chat channel.",e.onclick=()=>{o("STUB!")};break;case 3:
r.innerHTML="<b>"+n.user+"</b> mentioned you in a game comment.",e.onclick=()=>{const e=n.game;for(const t of ee)if(t.date===e){ie(t).catch((e=>{o("Failed to launch game. Message: "+e)}));break}};break;case 4:r.innerHTML="<b>"+n.user+"</b> requested to be friend with you.",e.onclick=()=>{F.click()};break;default:r.innerHTML="Error: Failed to parse message."}e.appendChild(r)}{const r=t.createElement("span");r.textContent=c(n.date),e.appendChild(r)}Vo.appendChild(e)
}else Vo.innerHTML="<div>You don't have any notifications.</div>";z.disabled=!1,z.removeAttribute("data-unread"),Vo.setAttribute("data-current",""),z.setAttribute("data-current","")})).catch((e=>{o("Failed to fetch notifications. Message: "+e)}))}else F.click()}}const le=n("paycc"),de=n("paydesc"),ue=n("chat-profile"),he=t.querySelectorAll("#nav-bar>button, #content>div, #nmsg-btn, #accn-btn, #nwidget");{const qo=n("ff"),Go=n("accountinfo-page"),Yo=n("ac-friends"),Xo=n("ac-orders")
;function Qo(e,n){const r=n.uid;if("string"!=typeof r)throw Error("Internal Error");const i=t.createElement("img");i.alt="Avatar",i.width=48,i.height=48,i.loading="lazy",i.decoding="async",i.draggable=!1;{const e=URL.createObjectURL(new Blob([n.avatar],{type:"image/jpeg",endings:"native"}));i.addEventListener("load",(()=>URL.revokeObjectURL(e)),{once:!0,passive:!0}),i.src=e}e.appendChild(i);{const a=t.createElement("div");switch(a.className="user",a.textContent=n.id,n.vip){case 3:
a.setAttribute("data-vip","gold");break;case 4:a.setAttribute("data-vip","diamond")}i.onclick=a.onclick=()=>{ae(r).catch((e=>{o("Failed to open user profile. Message: "+e)}))},e.appendChild(a)}switch(n.state){case 1:{const n=t.createElement("button");n.type="button",n.title="Cancel request",n.className="cross",n.onclick=()=>{h(25,[X,r]).then((()=>{e.remove()})).catch((e=>{o("Failed to cancel friend request. Message: "+e)}))},e.appendChild(n)}{const n=t.createElement("span")
;n.innerHTML="Requested",e.appendChild(n)}break;case 2:{const i=t.createElement("button");i.type="button",i.title="Accept",i.className="tick",i.onclick=()=>{h(24,[X,r]).then((()=>{n.state=0,e.innerHTML="",Qo(e,n)})).catch((e=>{o("Failed to accept friend request. Message: "+e)}))},e.appendChild(i)}{const n=t.createElement("button");n.type="button",n.title="Reject",n.className="cross",n.onclick=()=>{h(25,[X,r]).then((()=>{e.remove()})).catch((e=>{o("Failed to reject friend request. Message: "+e)
}))},e.appendChild(n)}{const n=t.createElement("span");n.innerHTML="Accept friend request?",e.appendChild(n)}break;default:{const n=t.createElement("button");n.type="button",n.title="Remove friend",n.className="cross",n.onclick=()=>{h(25,[X,r]).then((()=>{e.remove()})).catch((e=>{o("Failed to remove friend. Message: "+e)}))},e.appendChild(n)}{const n=t.createElement("button");n.type="button",n.title="Message",n.className="message",n.onclick=()=>{re(r).catch((e=>{
o("Failed to open chat channel. Message: "+e)}))},e.appendChild(n)}}}ne=()=>{h(50,X).then((e=>{if(Array.isArray(e)&&e.length>0){const n=t.createElement("table");n.innerHTML='<thead><tr><th scope="col">ID</th><th scope="col">Date</th><th scope="col">Items</th><th scope="col">Price*</th><th scope="col">State</th><th scope="col">Contact</th></tr></thead>';{const r=t.createElement("tbody");for(const n of e){const e=t.createElement("tr");{const r=t.createElement("td");r.textContent=n.id,
e.appendChild(r)}{const r=t.createElement("td");r.textContent=c(n.date),e.appendChild(r)}{const r=t.createElement("td");for(const e of n.pros){const n=t.createElement("div");for(const t of se)if(t.date.toString(36)===e){n.textContent=t.name;break}r.appendChild(n)}e.appendChild(r)}{const r=t.createElement("td");r.textContent="$"+n.price.toFixed(2),e.appendChild(r)}{const r=t.createElement("td");switch(n.state){case 0:r.textContent="Pending Payment";{const e=t.createElement("button")
;e.type="button",e.textContent="Cancel",e.onclick=()=>{h(52,[X,n.id,!1]).then((()=>{r.innerHTML="Aborted"})).catch((e=>{o("Failed to cancel order. Message: "+e)}))},r.appendChild(e)}break;case 1:r.textContent="Aborted";break;case 2:r.textContent="Delivered";break;default:r.textContent="Unknown"}e.appendChild(r)}{const r=t.createElement("td");r.textContent=n.sellerEmail,e.appendChild(r)}r.appendChild(e)}n.appendChild(r)}Xo.innerHTML="<div>* including additional delivery fee</div>",Xo.prepend(n)
}else Xo.style.overflow="unset",Xo.innerHTML="You don't have any orders yet."})).catch((e=>{Xo.innerHTML="Failed to fetch the list. Message: "+e})),h(26,[X,0]).then((e=>{if(Yo.innerHTML="",Array.isArray(e)&&e.length>0){let n=0;for(const n of e){const e=t.createElement("div");Qo(e,n),Yo.appendChild(e)}Yo.onscrollend=()=>{Yo.scrollTop>=Yo.scrollHeight-Yo.clientHeight&&n>=0&&h(26,[X,n+=10]).then((e=>{e.length<10&&(n=-1);for(const n of e){const e=t.createElement("div");Qo(e,n),Yo.appendChild(e)}}))}
}})).catch((e=>{o("Failed to fetch the list. Message: "+e)}))},n("chat-login").onclick=ue.onclick=F.onclick=()=>{null!=ce&&ce();for(const e of he)e.removeAttribute("data-current");Xo.innerHTML=Yo.innerHTML="Loading...",R.scrollTo({top:0,left:0,behavior:"instant"}),F.setAttribute("data-current","1"),Go.setAttribute("data-current","1"),W.checked=!1,"string"==typeof X&&ne()},qo.onclick=()=>{const e=t.createElement("div"),n=t.createElement("input");n.type="text",n.minLength=2,n.maxLength=30,
n.spellcheck=!1,n.placeholder="Username",n.autocomplete="off",e.appendChild(n);const r=t.createElement("button");r.type="button",r.title="Save",r.className="tick",e.appendChild(r);const i=t.createElement("button");i.type="button",i.title="Cancel",i.className="cross",e.appendChild(i),n.onblur=()=>{const e=n.value.trim().toLowerCase();e.length>0&&(n.value=e)},r.onclick=()=>{const r=n.value.trim().toLowerCase()
;r.length<4||r.length>20||!/^[\-a-z0-9]+$/.test(r)?o("Please provide a valid username."):h(1,"@"+r).then((n=>{h(24,[X,n.uid]).then((()=>{const r=t.createElement("div");n.state=1,Qo(r,n),Yo.appendChild(r),e.replaceWith(qo)})).catch((e=>{o("Failed to send friend request. Message: "+e)}))})).catch((e=>{o("Failed to retrieve user information. Message: "+e)}))},i.onclick=()=>{e.replaceWith(qo)},qo.replaceWith(e)}}{
const Zo=n("home-btn"),Ko=n("game-btn"),Jo=n("unbl-btn"),$o=n("apps-btn"),ei=n("home-page"),ti=n("games-page"),ni=n("store-page"),ri=n("services-page"),oi=n("site-blocked-page"),ii=n("uploadgames-page"),ai=n("profile-page"),si=n("settings-page");n("logo").onclick=Zo.onclick=()=>{null!=ce&&ce();for(const e of he)e.removeAttribute("data-current");W.checked=!1,ei.setAttribute("data-current",""),Zo.setAttribute("data-current",""),R.scrollTo({top:0,left:0,behavior:"instant"})},
n("goto-games").onclick=Ko.onclick=()=>{null!=ce&&ce();for(const e of he)e.removeAttribute("data-current");$||(t.title="NettleWeb Games"),R.scrollTo({top:0,left:0,behavior:"instant"}),W.checked=!1,ce=y,T.replaceState(void 0,"","/games"),Ko.setAttribute("data-current",""),ti.setAttribute("data-current","")},U.onclick=()=>{null!=ce&&ce();for(const e of he)e.removeAttribute("data-current");$||(t.title="NettleWeb Store"),R.scrollTo({top:0,left:0,behavior:"instant"}),W.checked=!1,ce=y,
T.replaceState(void 0,"","/shop"),U.setAttribute("data-current",""),ni.setAttribute("data-current","")},n("goto-apps").onclick=$o.onclick=()=>{null!=ce&&ce();for(const e of he)e.removeAttribute("data-current");$||(t.title="NettleWeb Apps"),R.scrollTo({top:0,left:0,behavior:"instant"}),W.checked=!1,ce=y,T.replaceState(void 0,"","/apps"),$o.setAttribute("data-current",""),ri.setAttribute("data-current","")},Jo.onclick=()=>{null!=ce&&ce();for(const e of he)e.removeAttribute("data-current")
;R.scrollTo({top:0,left:0,behavior:"instant"}),W.checked=!1,Jo.setAttribute("data-current",""),oi.setAttribute("data-current","")},n("ug").onclick=()=>{null!=ce&&ce();for(const e of he)e.removeAttribute("data-current");W.checked=!1,ii.setAttribute("data-current",""),R.scrollTo({top:0,left:0,behavior:"instant"})},n("settings").onclick=()=>{const e=si.hasAttribute("data-current");null!=ce&&ce();for(const e of he)e.removeAttribute("data-current");e?(Zo.setAttribute("data-current","1"),
ei.setAttribute("data-current","1")):si.setAttribute("data-current","1"),W.checked=!1,R.scrollTo({top:0,left:0,behavior:"instant"})};{const ci=n("id"),li=n("bio"),di=n("af"),ui=n("dm"),hi=n("pf-games"),pi=n("pf-items"),fi=n("avatar");ae=async e=>{const t=(e=await h(1,e)).uid;if("string"!=typeof t||t.length<1)throw Error("Failed to parse server response: Missing UID");null!=ce&&ce();for(const e of he)e.removeAttribute("data-current");switch(R.scrollTo({top:0,left:0,behavior:"instant"}),
W.checked=!1,ai.setAttribute("data-current","1"),ce=y,hi.removeAttribute("style"),pi.removeAttribute("style"),hi.innerHTML=pi.innerHTML="",hi.onscrollend=pi.onscrollend=null,li.textContent=e.bio||"NettleWeb User",T.replaceState(void 0,"","/@"+(ci.textContent=e.id)),e.vip){case 3:ci.setAttribute("data-vip","gold");break;case 4:ci.setAttribute("data-vip","diamond");break;default:ci.removeAttribute("data-vip")}di.onclick=()=>{null!=X?h(24,[X,t]).then((()=>{di.disabled=!0,di.textContent="Requested"
})).catch((e=>{o("Failed to send friend request. Message: "+e)})):F.click()},ui.onclick=()=>{null!=X?re(t).catch((e=>{o("Failed to open chat channel. Message: "+e)})):F.click()};{const e=ee.filter((e=>e.user===t));if(e.length>0){let t=25;for(const t of e.slice(0,25))hi.appendChild(m(t));hi.onscrollend=()=>{if(hi.scrollTop>=hi.scrollHeight-hi.clientHeight){const n=t+25;n>=e.length&&(hi.onscrollend=null);for(const r of e.slice(t,t=n))hi.appendChild(m(r))}}}else hi.style.overflow="unset",
hi.innerHTML="This user has not uploaded any games yet."}{const e=se.filter((e=>e.user===t));if(e.length>0){let t=25;for(const t of e.slice(0,25))pi.appendChild(g(t));pi.onscrollend=()=>{if(pi.scrollTop>=pi.scrollHeight-pi.clientHeight){const n=t+25;n>=e.length&&(pi.onscrollend=null);for(const r of e.slice(t,t=n))pi.appendChild(g(r))}}}else pi.style.overflow="unset",pi.innerHTML="This user does not have a store yet."}{const t=URL.createObjectURL(new Blob([e.avatar],{type:"image/jpeg",
endings:"native"}));fi.src=t,await fi.decode(),URL.revokeObjectURL(t)}}}switch(T.scrollRestoration="manual",T.replaceState(void 0,"","/"),L){case"/":break;case"/g":case"/g/":case"/game":case"/game/":case"/games":case"/games/":Ko.click();break;case"/v":case"/v/":case"/video":case"/video/":case"/videos":case"/videos/":H.click();break;case"/s":case"/s/":case"/shop":case"/shop/":case"/store":case"/store/":U.click();break;case"/a":case"/a/":case"/apps":case"/apps/":$o.click();break;default:
if("/@"===L.slice(0,2)){const mi=L.slice(1);if(mi.length<=50)try{await ae(mi)}catch(gi){o("Failed to open user profile. Message: "+gi)}}else if("/u/"===L.slice(0,3)){const bi=L.slice(3);if(bi.length<50)try{await ae(bi)}catch(yi){o("Failed to open user profile. Message: "+yi)}}else if(L.length>4&&L.length<20){const vi=parseInt(L.slice(1),36);if(Number.isSafeInteger(vi)&&vi>0)for(const wi of ee)if(wi.date===vi){if("1"===S.get("hidegui")){const{type:ki,path:Ci}=wi;return M.innerHTML="",
Ci.startsWith("!content!")?M.appendChild(f(ki,await u(Ci.slice(9)))):M.appendChild(b(Ci)),void C()}try{await ie(wi)}catch(Ei){o("Failed to launch game. Message: "+Ei)}break}}else o("Error: Page does not exist: "+L)}n("loading").remove(),R.style.display="block"}if("1"===S.get("m")&&setTimeout((()=>{R.scrollTo({top:R.scrollHeight,left:0,behavior:"instant"})}),5e3,null),"https://nettleweb.com"===e.origin){{const Ti=t.createElement.bind(t);Object.defineProperty(t,"createElement",{value:(e,t)=>{
const n=Ti(e,t);return"iframe"===n.tagName.toLowerCase()&&n.setAttribute("credentialless","true"),n},writable:!1,enumerable:!1,configurable:!1})}{const Li=t.createElementNS.bind(t);Object.defineProperty(t,"createElementNS",{value:(e,t,n)=>{const r=Li(e,t,n);return"iframe"===r.tagName.toLowerCase()&&r.setAttribute("credentialless","true"),r},writable:!1,enumerable:!1,configurable:!1})}const xi=await l("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7505521340110301")
;if(null!=xi&&xi.length>0)try{Function("arguments","globalThis","window","frames","self","document",xi).call(e,void 0,e,e,e,e,t)}catch(Si){}else o("You are using an ad blocker. Please disable it to support this website's development.");const Ai=e.adsbygoogle||(e.adsbygoogle=[]);for(const Ii of t.querySelectorAll("ins.adsbygoogle")){Ii.setAttribute("data-ad-client","ca-pub-7505521340110301"),Ii.setAttribute("data-ad-format","auto"),Ii.setAttribute("data-full-width-responsive","true");try{
Ai.push(1)}catch(Mi){}}}else C();{async function ji(){await te,ne(),le.innerHTML=ls.cc,F.title="My Account",F.setAttribute("data-ac",""),n("ac-prof").style.display="block",n("chat-login").remove(),n("login-dialog").remove();const e=n("ac-bio"),r=n("ac-name"),i=n("ac-email"),a=n("ac-un"),s=n("ac-edit"),c=n("ac-link"),l=n("ac-bio-edit"),u=n("ac-name-edit"),p=n("ac-email-edit"),f=n("cp"),b=n("rs"),y=n("tf");"1"===Y.get("__?2fa")&&(y.setAttribute("data-enabled",""),
y.textContent="Disable Two-Factor");const v=n("ch-avatar"),w=v.firstElementChild,k=t.createElement("img");k.alt="Avatar",k.width=40,k.height=40,k.loading="eager",k.decoding="sync",k.draggable=!1,ue.appendChild(k);const C=t.createElement("div");C.className="user",ue.appendChild(C),ue.style.display="block";const E=await h(2,X),x=E.id,T=E.uid;if("string"!=typeof x||x.length<4||"string"!=typeof T||T.length<2)o("Error: Server response parse error.");else{switch(e.textContent=E.bio||"NettleWeb User",
r.textContent=E.name||"Not set",i.textContent=E.email||"Not set",a.textContent=x,C.textContent=x,n("ac-uid").textContent=T,le.value=E.paycc||"US",de.value=E.paydesc||"",E.unread&&z.setAttribute("data-unread",""),E.vip){case 3:n("ac-membership").textContent="Gold \u{1f451}",a.setAttribute("data-vip","gold"),C.setAttribute("data-vip","gold");break;case 4:n("ac-membership").textContent="Diamond \u{1f48e}",a.setAttribute("data-vip","diamond"),C.setAttribute("data-vip","diamond");break;default:
n("ac-membership").textContent="None"}{const e=URL.createObjectURL(new Blob([E.avatar],{type:"image/jpeg",endings:"native"}));w.src=k.src=e,await w.decode(),await k.decode(),URL.revokeObjectURL(e)}{const e=n("ac-games"),t=ee.filter((e=>e.user===T));let r=25;for(const n of t.slice(0,25))e.appendChild(m(n));e.onscrollend=()=>{if(r<t.length&&e.scrollTop>=e.scrollHeight-e.clientHeight)for(const n of t.slice(r,r+=25))e.appendChild(m(n))}}{const e=n("s-products"),t=se.filter((e=>e.user===T))
;if(t.length>0){let n=25;for(const n of t.slice(0,25))e.appendChild(g(n));e.onscrollend=()=>{if(n<t.length&&e.scrollTop>=e.scrollHeight-e.clientHeight)for(const r of t.slice(n,n+=25))e.appendChild(g(r))}}else e.style.overflow="unset",e.innerHTML="You have not published any products yet."}v.onclick=()=>{const e=t.createElement("input");e.type="file",e.accept="image/*",e.onchange=async()=>{var t;const n=null===(t=e.files)||void 0===t?void 0:t.item(0);if(null!=n){const e=await d(n,512,512)
;if(null==e)return void o("Error: Failed to resize image.");try{await h(4,[X,await e.arrayBuffer()])}catch(e){return void o("Failed to upload the image file. Message: "+e)}const t=URL.createObjectURL(e);w.src=k.src=t,await w.decode(),await k.decode(),URL.revokeObjectURL(t)}},e.click()},s.onclick=()=>{const e=t.createElement("div"),n=t.createElement("input");n.type="text",n.value=a.innerHTML,n.minLength=4,n.maxLength=20,n.spellcheck=!1,n.placeholder="Username",n.autocomplete="off",
e.appendChild(n);const r=t.createElement("button");r.type="button",r.title="Save",r.className="tick",e.appendChild(r);const i=t.createElement("button");i.type="button",i.title="Cancel",i.className="cross",e.appendChild(i),n.onblur=()=>{const e=n.value.trim().toLowerCase();e.length>0&&(n.value=e)},r.onclick=()=>{const t=n.value.trim().toLowerCase();t.length<4||t.length>20?o("Username must be between 4 and 20 characters long."):/^[\-a-z0-9]+$/.test(t)?h(3,[X,t]).then((()=>{e.replaceWith(a),
a.textContent=t,C.textContent=t,s.removeAttribute("style")})).catch((e=>{o("Failed to change username. Message: "+e)})):o("Username must contain only hyphens, 0-9, lowercase a-z")},i.onclick=()=>{e.replaceWith(a),s.removeAttribute("style")},s.style.display="none",a.replaceWith(e),n.select()},c.onclick=()=>{const e="https://nettleweb.com/@"+x,n=t.createElement("span");n.textContent=e,c.replaceWith(n),navigator.clipboard.writeText(e).catch((e=>{o("Failed to copy link to clipboard. Message: "+e)}))
},l.onclick=()=>{const n=t.createElement("div"),r=t.createElement("input");r.type="text",r.value=e.innerHTML,r.minLength=1,r.maxLength=500,r.spellcheck=!1,r.placeholder="Bio",r.autocomplete="off",n.appendChild(r);const i=t.createElement("button");i.type="button",i.title="Save",i.className="tick",n.appendChild(i);const a=t.createElement("button");a.type="button",a.title="Cancel",a.className="cross",n.appendChild(a),r.onblur=()=>{const e=r.value.trim();e.length>0&&(r.value=e)},i.onclick=()=>{
const t=r.value.trim();t.length>500?o("Bio cannot have more than 500 characters in length."):h(55,[X,t]).then((()=>{n.replaceWith(e),l.removeAttribute("style"),e.textContent=t||"NettleWeb User"})).catch((e=>{o("Failed to update bio. Message: "+e)}))},a.onclick=()=>{n.replaceWith(e),l.removeAttribute("style")},l.style.display="none",e.replaceWith(n),r.select()},u.onclick=()=>{const e=t.createElement("div"),n=t.createElement("input");n.type="text",n.value=r.innerHTML,n.minLength=2,n.maxLength=30,
n.spellcheck=!1,n.placeholder="Name",n.autocomplete="off",e.appendChild(n);const i=t.createElement("button");i.type="button",i.title="Save",i.className="tick",e.appendChild(i);const a=t.createElement("button");a.type="button",a.title="Cancel",a.className="cross",e.appendChild(a),n.onblur=()=>{const e=n.value.trim();e.length>0&&(n.value=e)},i.onclick=()=>{const t=n.value.trim();t.length>30?o("Name cannot have more than 30 characters in length."):h(20,[X,t]).then((()=>{e.replaceWith(r),
r.textContent=t,u.removeAttribute("style")})).catch((e=>{o("Failed to update name. Message: "+e)}))},a.onclick=()=>{e.replaceWith(r),u.removeAttribute("style")},u.style.display="none",r.replaceWith(e),n.select()},p.onclick=()=>{const e=t.createElement("div"),n=t.createElement("input");n.type="email",n.value=i.innerHTML,n.minLength=6,n.maxLength=320,n.spellcheck=!1,n.placeholder="Email",n.autocomplete="off",e.appendChild(n);const r=t.createElement("button");r.type="button",r.title="Save",
r.className="tick",e.appendChild(r);const a=t.createElement("button");a.type="button",a.title="Cancel",a.className="cross",e.appendChild(a),n.onblur=()=>{const e=n.value.trim().toLowerCase();e.length>0&&(n.value=e)},r.onclick=()=>{const a=n.value.trim().toLowerCase();a.length<6||a.length>320||a.indexOf("@",1)<0?o("Please provide a valid email address."):h(19,[X,a]).then((()=>{{const n=t.createElement("div")
;n.textContent="Please check your inbox and fill in the 6-digit verification code below to verify your email address.",e.prepend(n)}n.type="text",n.value="",n.minLength=6,n.maxLength=6,n.placeholder="6-digit verification code",n.onblur=()=>{const e=n.value.trim();e.length>0&&(n.value=e)},r.onclick=()=>{const t=n.value.trim();6===t.length&&/^\d+$/.test(t)?h(18,[X,t]).then((()=>{e.replaceWith(i),i.textContent=a,p.removeAttribute("style")})).catch((e=>{o("Failed to verify your email. Message: "+e)
})):o("The code provided must have exactly 6 digits.")}})).catch((e=>{o("Failed to update your email address. Message: "+e)}))},a.onclick=()=>{e.replaceWith(i),p.removeAttribute("style")},p.style.display="none",i.replaceWith(e),n.select()},f.onclick=()=>{const e=t.createElement("div");{const n=t.createElement("div");n.setAttribute("style","position:relative;display:block;width:fit-content;height:fit-content;margin:10px 0px;padding:5px;line-height:18px;"),
n.innerHTML="Notice: If your account was created with your Google account and does not have a password, set the current password field to 'CHANGEME!'. After changing your password, previously logged-in sessions will still have access to your account. To revoke the access, click the 'logout all sessions' button down below.",e.appendChild(n)}const n=t.createElement("input");n.type="password",n.minLength=8,n.maxLength=30,n.spellcheck=!1,n.placeholder="Current password",n.autocomplete="off",
e.appendChild(n);const r=t.createElement("input");r.type="password",r.minLength=8,r.maxLength=30,r.spellcheck=!1,r.placeholder="New password",r.autocomplete="off",e.appendChild(r);const i=t.createElement("input");i.type="password",i.minLength=8,i.maxLength=30,i.spellcheck=!1,i.placeholder="Confirm password",i.autocomplete="off",e.appendChild(i);const a=t.createElement("button");a.type="button",a.title="Change",a.className="tick",e.appendChild(a);const s=t.createElement("button");s.type="button",
s.title="Cancel",s.className="cross",e.appendChild(s),a.onclick=()=>{const t=n.value;if(t.length<8||t.length>30)return void o("The current password must have 8 to 30 characters.");const a=r.value;a.length<8||a.length>30?o("The new password must have 8 to 30 characters."):t!==a?a===i.value?h(9,[X,t,a]).then((()=>{e.replaceWith(f)})).catch((e=>{o("Failed to change password. Message: "+e)
})):o("The confirm password does not match the new password."):o("The new password must be different from the current password.")},s.onclick=()=>{e.replaceWith(f)},f.replaceWith(e)},b.onclick=()=>{h(43,X).then((e=>{"string"==typeof e&&2048===e.length?(Y.set("__secrets_",X=e),b.disabled=!0,Z.emit("login",X)):o("Error: Remote returned invalid token.")})).catch((e=>{o("Failed to revoke login tokens. Message: "+e)}))},y.onclick=()=>{const e=t.createElement("div");if(y.hasAttribute("data-enabled")){
const n=t.createElement("input");n.type="text",n.minLength=6,n.maxLength=6,n.spellcheck=!1,n.placeholder="6-digit verification code",n.autocomplete="off",e.appendChild(n);const r=t.createElement("button");r.type="button",r.title="Change",r.className="tick",e.appendChild(r),r.onclick=()=>{const t=n.value.trim();6===t.length&&/^\d+$/.test(t)?h(46,[X,t]).then((()=>{Y.set("__?2fa","0"),e.replaceWith(y),y.removeAttribute("data-enabled"),y.textContent="Enable Two-Factor"})).catch((e=>{
o("Failed to enable two-factor authentication. Message: "+e)})):o("The code provided must have exactly 6 digits.")}}else{{const n=t.createElement("div");n.setAttribute("style","position:relative;display:block;width:fit-content;height:fit-content;margin:15px 0px;line-height:18px;white-space:pre-wrap;"),
n.innerHTML='In order to enable two-factor authentication (2FA), please follow the steps below:\n1. Install an <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2" target="_blank" rel="noopener">authenticator app</a> if you don\'t have one already.\n2. Scan the QR code below or manually input the secret to save your account onto the authenticator.\n3. Input the 6-digit verification code generated below to verify.\n\nAfter enabling 2FA, you will be required to input the generated 6-digit verification code everytime as you login for enhanced account security.\n\nTo avoid being locked out, save the secret or a screenshot of the QR code across multiple devices, so that it could be restored back into the authenticator in case you lost your data.',
e.appendChild(n)}const n=Ta.encode(crypto.getRandomValues(new Uint8Array(new ArrayBuffer(32),0,32)));{const r=t.createElement("img");r.src="data:image/gif;base64,"+Ma.encode(aa("otpauth://totp/NettleWeb:"+x+"?secret="+n+"&issuer=NettleWeb&algorithm=SHA1","gif",{ecc:"low",mask:1,scale:4,border:1})),r.alt="QR Code",r.width=172,r.height=172,r.loading="eager",r.decoding="sync",r.draggable=!1,e.appendChild(r)}{const r=t.createElement("div")
;r.setAttribute("style","position:relative;display:block;width:fit-content;height:fit-content;margin:15px 0px;line-height:18px;"),r.textContent="Secret: "+n,e.appendChild(r)}const r=t.createElement("input");r.type="text",r.minLength=6,r.maxLength=6,r.spellcheck=!1,r.placeholder="6-digit verification code",r.autocomplete="off",e.appendChild(r);const i=t.createElement("button");i.type="button",i.title="Change",i.className="tick",e.appendChild(i),i.onclick=()=>{const t=r.value.trim()
;6===t.length&&/^\d+$/.test(t)?h(44,[X,n,t]).then((()=>{Y.set("__?2fa","1"),e.replaceWith(y),y.setAttribute("data-enabled",""),y.textContent="Disable Two-Factor"})).catch((e=>{o("Failed to enable two-factor authentication. Message: "+e)})):o("The code provided must have exactly 6 digits.")}}const n=t.createElement("button");n.type="button",n.title="Cancel",n.className="cross",e.appendChild(n),n.onclick=()=>{e.replaceWith(y)},y.replaceWith(e)},n("so").onclick=()=>{Y.delete("__secrets_"),
setTimeout((()=>A.reload()),200)},n("da").onclick=()=>{o("Error: Operation not permitted.")},n("account-settings").style.display="block"}}if(null!=X){const zi=await new Promise((e=>{const t=r=>{Z.off("lr",t),Z.off("le",n),e(null),Q=r},n=r=>{Z.off("lr",t),Z.off("le",n),e(r)};Z.on("lr",t),Z.on("le",n),Z.emit("login",X)}));if(null==zi)return void await ji();o("Failed to validate login token. Please login again. Message: "+zi),X=null}const _i=n("login-dialog");let Oi,Ni,Pi;function Di(){
_i.style.display="none",_i.innerHTML="";{const e=t.createElement("h3");e.textContent="Login",_i.appendChild(e)}const e=t.createElement("input");e.type="text",e.value=Ni||"",e.required=!0,e.minLength=4,e.maxLength=320,e.spellcheck=!1,e.placeholder="Username/Email",e.autocomplete="off",_i.appendChild(e);const n=t.createElement("input");n.type="password",n.value=Pi||"",n.required=!0,n.minLength=8,n.maxLength=30,n.spellcheck=!1,n.placeholder="Password",n.autocomplete="off",_i.appendChild(n)
;const r=t.createElement("button");r.type="button",r.className="pri-button",r.textContent="Login",_i.appendChild(r);const i=t.createElement("div");i.tabIndex=0,i.textContent="Register",_i.appendChild(i);const a=t.createElement("div");a.tabIndex=0,a.textContent="Forgot password",_i.appendChild(a);const s=t.createElement("div");s.tabIndex=0,s.textContent="Sign in with Google",_i.appendChild(s),e.onblur=()=>{const t=e.value.trim().toLowerCase();t.length>0&&(Ni=e.value=t)},n.onblur=()=>{
const e=n.value;e.length>0&&(Pi=e)},r.onclick=()=>{const t=Ni=e.value.trim().toLowerCase();if(t.indexOf("@",1)<0){if(t.length<4||t.length>20)return void o("Username must be between 4 and 20 characters long.");if(!/^[\-a-z0-9]+$/.test(t))return void o("Username must contain only hyphens, 0-9, lowercase a-z.")}else if(t.length<6||t.length>320)return void o("Invalid email address. (Usernames should not contain a '@' symbol)");const r=Pi=n.value
;r.length<8||r.length>30?o("Password must be between 8 and 30 characters long."):h(10,[t,r]).then((e=>{"string"==typeof e?Hi(e):o("Error: Remote returned invalid token data.")})).catch((e=>{o("Failed to retrieve login token. Message: "+e)}))},i.onclick=Ri,a.onclick=Fi,s.onclick=Ui,_i.style.display="block"}function Ri(){_i.style.display="none",_i.innerHTML="";{const e=t.createElement("h3");e.textContent="Register",_i.appendChild(e)}const e=t.createElement("input");e.type="text",e.value=Ni||"",
e.required=!0,e.minLength=4,e.maxLength=20,e.spellcheck=!1,e.placeholder="Username",e.autocomplete="off",_i.appendChild(e);const n=t.createElement("input");n.type="email",n.value=Oi||"",n.required=!0,n.minLength=6,n.maxLength=320,n.spellcheck=!1,n.placeholder="Email",n.autocomplete="off",_i.appendChild(n);const r=t.createElement("input");r.type="password",r.value=Pi||"",r.required=!0,r.minLength=8,r.maxLength=30,r.spellcheck=!1,r.placeholder="Password",r.autocomplete="off",_i.appendChild(r)
;const i=t.createElement("input");i.type="password",i.value="",i.required=!0,i.minLength=8,i.maxLength=30,i.spellcheck=!1,i.placeholder="Confirm password",i.autocomplete="off",_i.appendChild(i);const a=t.createElement("button");a.type="button",a.className="pri-button",a.textContent="Register",_i.appendChild(a);const s=t.createElement("div");s.tabIndex=0,s.textContent="Login",_i.appendChild(s);const c=t.createElement("div");c.tabIndex=0,c.textContent="Sign in with Google",_i.appendChild(c),
e.onblur=()=>{const t=e.value.trim().toLowerCase();t.length>0&&(Ni=e.value=t)},n.onblur=()=>{const e=n.value.trim().toLowerCase();e.length>0&&(Oi=n.value=e)},r.onblur=()=>{const e=r.value;e.length>0&&(Pi=e)},a.onclick=()=>{const a=Ni=e.value.trim().toLowerCase();if(a.length<4||a.length>20)return void o("The username must be between 4 and 20 characters long.");if(!/^[\-a-z0-9]+$/.test(a))return void o("The username must contain only hyphens, lowercase a-z and 0-9.")
;const s=Oi=n.value.trim().toLowerCase();if(s.length<6||s.length>320||s.indexOf("@",1)<0)return void o("Please provide a valid email.");const l=Pi=r.value;l.length<8||l.length>30?o("The password must be between 8 and 30 characters long."):l===i.value?h(11,[a,l,s]).then((()=>{_i.style.display="none",_i.innerHTML="";{const e=t.createElement("h3");e.textContent="Verify Email",_i.appendChild(e)}{const e=t.createElement("span")
;e.textContent="Please check your inbox and fill in the 6-digit verification code below to verify your email address.",_i.appendChild(e)}const e=t.createElement("input");e.type="text",e.value="",e.required=!0,e.minLength=6,e.maxLength=6,e.spellcheck=!1,e.placeholder="6-digit verification code",e.autocomplete="off",_i.appendChild(e);const n=t.createElement("button");n.type="button",n.className="pri-button",n.textContent="Verify",_i.appendChild(n);{const e=t.createElement("span")
;e.textContent="Notice: If you are using a managed email address (ie. school or work) and did not receive a code in your inbox after several attempts, the code is likely to be blocked by your administrator. In this case, using a personal account could help.",_i.appendChild(e)}_i.appendChild(c),e.onblur=()=>{const t=e.value.trim();t.length>0&&(e.value=t)},n.onclick=()=>{const t=e.value.trim();6===t.length&&/^\d+$/.test(t)?h(17,[a,t]).then((e=>{
"string"==typeof e&&2048===e.length?(Y.set("__secrets_",X=e),Z.emit("login",X),ji()):o("Error: Remote returned invalid token data.")})).catch((e=>{o("Failed to verify your email address. Message: "+e)})):o("The code provided must have exactly 6 digits.")},_i.style.display="block"})).catch((e=>{o("Failed to send request. Message: "+e)})):o("The confirm password does not match.")},s.onclick=Di,c.onclick=Ui,_i.style.display="block"}function Fi(){_i.style.display="none",_i.innerHTML="";{
const e=t.createElement("h3");e.textContent="Reset Password",_i.appendChild(e)}const e=t.createElement("input");e.type="email",e.value=Oi||"",e.required=!0,e.minLength=6,e.maxLength=320,e.spellcheck=!1,e.placeholder="Email",e.autocomplete="off",_i.appendChild(e);const n=t.createElement("button");n.type="button",n.className="pri-button",n.textContent="Continue",_i.appendChild(n);const r=t.createElement("div");r.tabIndex=0,r.textContent="Login",_i.appendChild(r);const i=t.createElement("div")
;i.tabIndex=0,i.textContent="Register",_i.appendChild(i);const a=t.createElement("div");a.tabIndex=0,a.textContent="Sign in with Google",_i.appendChild(a),e.onblur=()=>{const t=e.value.trim().toLowerCase();t.length>0&&(Oi=e.value=t)},n.onclick=()=>{const n=Oi=e.value.trim().toLowerCase();n.length<6||n.length>320||n.indexOf("@",1)<0?o("Please provide a valid email."):h(21,n).then((()=>{_i.style.display="none",_i.innerHTML="";{const e=t.createElement("h3");e.textContent="Reset Password",
_i.appendChild(e)}{const e=t.createElement("span");e.textContent="Please check your inbox and follow the instructions on the email.",_i.appendChild(e)}_i.appendChild(r),_i.appendChild(i),_i.appendChild(a),_i.style.display="block"})).catch((e=>{o("Failed to send request. Message: "+e)}))},r.onclick=Di,i.onclick=Ri,a.onclick=Ui,_i.style.display="block"}function Hi(e){if(2048===e.length)return Y.set("__secrets_",X=e),Y.set("__?2fa","0"),Z.emit("login",X),void ji();_i.style.display="none",
_i.innerHTML="";{const e=t.createElement("h3");e.textContent="Two-Factor Authentication",_i.appendChild(e)}{const e=t.createElement("span");e.textContent="Please open your authenticator app and fill in the generated 6-digit verification code below.",_i.appendChild(e)}const n=t.createElement("input");n.type="text",n.value="",n.minLength=6,n.maxLength=6,n.spellcheck=!1,n.placeholder="6-digit verification code",n.autocomplete="off",_i.appendChild(n);const r=t.createElement("button")
;r.type="button",r.className="pri-button",r.textContent="Verify",_i.appendChild(r),n.onblur=()=>{const e=n.value.trim();e.length>0&&(n.value=e)},r.onclick=()=>{const t=n.value.trim();6===t.length&&/^\d+$/.test(t)?h(45,[e,t]).then((e=>{"string"==typeof e&&2048===e.length?(Y.set("__secrets_",X=e),Y.set("__?2fa","1"),Z.emit("login",X),ji()):o("Error: Remote returned invalid token data.")})).catch((e=>{o("Failed to login with OTP. Message: "+e)})):o("The code provided must have exactly 6 digits.")},
_i.style.display="block"}function Ui(){const t=new URL("https://accounts.google.com/o/oauth2/v2/auth");{const n=t.searchParams;n.set("client_id","176227430389-qkdboctmfhe9jnvnk2vmarafc5p8amuf.apps.googleusercontent.com"),n.set("redirect_uri",e.origin+"/auth.html"),n.set("response_type","token"),n.set("state","12"),n.set("scope","email profile"),n.set("include_granted_scopes","true"),n.set("enable_granular_consent","true")}A.replace(t)}{const Wi=Y.get("_cre_")||"";if(Wi.length>0){try{
const Vi=await h(0,Wi);if("string"!=typeof Vi)return void o("Error: Remote returned invalid token data.");F.click(),Hi(Vi)}catch(qi){o("Failed to retrieve login token. Message: "+qi)}Y.delete("_cre_")}else Di()}}})(window)})();