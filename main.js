/*! For license information please see out.js.LICENSE.txt */
https://nettleweb.com/


/*! Copyright (C) 2024 nettleweb.com; All rights reserved. !*/
"use strict";

(()=>{function e(){try{return"object"==typeof indexedDB}catch(e){return!1}}function t(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}function n(e,t){if(e===t)return!0;const o=Object.keys(e),a=Object.keys(t)
;for(const i of o){if(!a.includes(i))return!1;const o=e[i],s=t[i];if(r(o)&&r(s)){if(!n(o,s))return!1}else if(o!==s)return!1}for(const e of a)if(!o.includes(e))return!1;return!0}function r(e){return null!==e&&"object"==typeof e}function o(e,t=1e3,n=2){const r=t*Math.pow(n,e),o=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+o)}function a(e){return e&&e._delegate?e._delegate:e}function i(e){
return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Pt||(Pt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(zt(this),t),c(Ft.get(this))}:function(...t){return c(e.apply(zt(this),t))}:function(t,...n){const r=e.call(zt(this),t,...n);return Ht.set(r,t.sort?t.sort():[t]),c(r)}}function s(e){return"function"==typeof e?i(e):(e instanceof IDBTransaction&&function(e){
if(Nt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",a),e.removeEventListener("abort",a)},o=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",a),e.addEventListener("abort",a)}));Nt.set(e,t)}(e),t=e,(Dt||(Dt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Rt):e);var t}
function c(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",a)},o=()=>{t(c(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&Ft.set(t,e)})).catch((()=>{})),Bt.set(t,e),t}(e);if(Ut.has(e))return Ut.get(e);const t=s(e);return t!==e&&(Ut.set(e,t),Bt.set(t,e)),t}
function l(e,t,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){const i=indexedDB.open(e,t),s=c(i);return r&&i.addEventListener("upgradeneeded",(e=>{r(c(i.result),e.oldVersion,e.newVersion,c(i.transaction),e)})),n&&i.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{a&&e.addEventListener("close",(()=>a())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}function d(e,t){
if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Vt.get(t))return Vt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=qt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!Wt.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,o?"readwrite":"readonly");let i=a.store;return r&&(i=i.index(t.shift())),(await Promise.all([i[n](...t),o&&a.done]))[0]};return Vt.set(t,a),a}function u(e,t){try{e.container.addComponent(t)}catch(n){
Xt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function h(e){const t=e.name;if(Ln.has(t))return Xt.debug(`There were multiple attempts to register component ${t}.`),!1;Ln.set(t,e);for(const t of An.values())u(t,e);for(const t of In.values())u(t,e);return!0}function p(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function f(e,t={}){let r=e;"object"!=typeof t&&(t={name:t})
;const o=Object.assign({name:xn,automaticDataCollectionEnabled:!1},t),a=o.name;if("string"!=typeof a||!a)throw Sn.create("bad-app-name",{appName:a+""});if(r||(r=yt()),!r)throw Sn.create("no-options");const i=An.get(a);if(i){if(n(r,i.options)&&n(o,i.config))return i;throw Sn.create("duplicate-app",{appName:a})}const s=new At(a);for(const e of Ln.values())s.addComponent(e);const c=new jn(r,o,s);return An.set(a,c),c}function m(e,t,n){var r;let o=null!==(r=Tn[e])&&void 0!==r?r:e;n&&(o+="-"+n)
;const a=o.match(/\s|\//),i=t.match(/\s|\//);if(a||i){const e=[`Unable to register library "${o}" with version "${t}":`];return a&&e.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&i&&e.push("and"),i&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Xt.warn(e.join(" "))}h(new Et(o+"-version",(()=>({library:o,version:t})),"VERSION"))}function g(){return _n||(_n=l("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{
e.createObjectStore(Mn)}catch(e){}}}).catch((e=>{throw Sn.create("idb-open",{originalErrorMessage:e.message})}))),_n}async function b(e,t){try{const n=(await g()).transaction(Mn,"readwrite"),r=n.objectStore(Mn);await r.put(t,y(e)),await n.done}catch(e){if(e instanceof wt)Xt.warn(e.message);else{const t=Sn.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});Xt.warn(t.message)}}}function y(e){return`${e.name}!${e.options.appId}`}function v(){
return(new Date).toISOString().substring(0,10)}function w(e){return ft(JSON.stringify({version:2,heartbeats:e})).length}function k(e){return e instanceof wt&&e.code.includes("request-failed")}function C({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function E(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function x(e,t){const n=(await t.json()).error
;return Rn.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function T({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function A(e,{refreshToken:t}){const n=T(e);return n.append("Authorization",function(e){return`${Bn} ${e}`}(t)),n}async function I(e){const t=await e();return t.status>=500&&t.status<600?e():t}function L(e){return new Promise((t=>{setTimeout(t,e)}))}
function S(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return zn.test(t)?t:""}catch(e){return""}}function j(e){return`${e.appName}!${e.appId}`}function M(e,t){const n=j(e);_(n,t),function(e,t){const n=O();n&&n.postMessage({key:e,fid:t}),D()}(n,t)}function _(e,t){const n=Wn.get(e);if(n)for(const e of n)e(t)}
function O(){return!qn&&"BroadcastChannel"in self&&(qn=new BroadcastChannel("[Firebase] FID Change"),qn.onmessage=e=>{_(e.data.key,e.data.fid)}),qn}function D(){0===Wn.size&&qn&&(qn.close(),qn=null)}function P(){return Gn||(Gn=l("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Vn)}})),Gn}async function F(e,t){const n=j(e),r=(await P()).transaction(Vn,"readwrite"),o=r.objectStore(Vn),a=await o.get(n);return await o.put(t,n),await r.done,a&&a.fid===t.fid||M(e,t.fid),
t}async function N(e){const t=j(e),n=(await P()).transaction(Vn,"readwrite");await n.objectStore(Vn).delete(t),await n.done}async function H(e,t){const n=j(e),r=(await P()).transaction(Vn,"readwrite"),o=r.objectStore(Vn),a=await o.get(n),i=t(a);return void 0===i?await o.delete(n):await o.put(i,n),await r.done,!i||a&&a.fid===i.fid||M(e,i.fid),i}async function U(e){let t;const n=await H(e.appConfig,(n=>{const r=function(e){const t=e||{fid:S(),registrationStatus:0};return z(t)}(n),o=function(e,t){
if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Rn.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=C(e),o=T(e),a=t.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const i={fid:n,authVersion:Bn,appId:e.appId,
sdkVersion:Un},s={method:"POST",headers:o,body:JSON.stringify(i)},c=await I((()=>fetch(r,s)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:E(e.authToken)}}throw await x("Create Installation",c)}(e,t);return F(e.appConfig,n)}catch(n){throw k(n)&&409===n.customData.serverCode?await N(e.appConfig):await F(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}
return 1===t.registrationStatus?{installationEntry:t,registrationPromise:B(e)}:{installationEntry:t}}(e,r);return t=o.registrationPromise,o.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function B(e){let t=await R(e.appConfig);for(;1===t.registrationStatus;)await L(100),t=await R(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await U(e);return n||t}return t}function R(e){
return H(e,(e=>{if(!e)throw Rn.create("installation-not-found");return z(e)}))}function z(e){return 1===(t=e).registrationStatus&&t.registrationTime+Hn<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function W({appConfig:e,heartbeatServiceProvider:t},n){const r=function(e,{fid:t}){return`${C(e)}/${t}/authTokens:generate`}(e,n),o=A(e,n),a=t.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const i={installation:{sdkVersion:Un,
appId:e.appId}},s={method:"POST",headers:o,body:JSON.stringify(i)},c=await I((()=>fetch(r,s)));if(c.ok)return E(await c.json());throw await x("Generate Auth Token",c)}async function q(e,t=!1){let n;const r=await H(e.appConfig,(r=>{if(!G(r))throw Rn.create("not-registered");const o=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}(o))return r
;if(1===o.requestStatus)return n=async function(e,t){let n=await V(e.appConfig);for(;1===n.authToken.requestStatus;)await L(100),n=await V(e.appConfig);const r=n.authToken;return 0===r.requestStatus?q(e,t):r}(e,t),r;{if(!navigator.onLine)throw Rn.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await W(e,t),r=Object.assign(Object.assign({},t),{authToken:n
});return await F(e.appConfig,r),n}catch(n){if(!k(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await F(e.appConfig,n)}else await N(e.appConfig);throw n}}(e,t),t}}));return n?await n:r.authToken}function V(e){return H(e,(e=>{if(!G(e))throw Rn.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Hn<Date.now()?Object.assign(Object.assign({},e),{authToken:{
requestStatus:0}}):e;var n}))}function G(e){return void 0!==e&&2===e.registrationStatus}async function J(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await U(e);t&&await t}(n),(await q(n,t)).token}function Y(e){return Rn.create("missing-app-config-values",{valueName:e})}function K(e){if(!e.startsWith(Xn)){const t=Zn.create("invalid-gtag-resource",{gtagURL:e});return Qn.warn(t.message),""}return e}function X(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}
function Q(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:K}),r=document.createElement("script"),o=`${Xn}?l=${e}&id=${t}`;r.src=n?null==n?void 0:n.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function Z(e,t,n,r){return async function(o,...a){try{if("event"===o){const[r,o]=a;await async function(e,t,n,r,o){try{let a=[];if(o&&o.send_to){let e=o.send_to;Array.isArray(e)||(e=[e])
;const r=await X(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),o=e&&t[e.appId];if(!o){a=[];break}a.push(o)}}0===a.length&&(a=Object.values(t)),await Promise.all(a),e("event",r,o||{})}catch(e){Qn.error(e)}}(e,t,n,r,o)}else if("config"===o){const[o,i]=a;await async function(e,t,n,r,o,a){const i=r[o];try{if(i)await t[i];else{const e=(await X(n)).find((e=>e.measurementId===o));e&&await t[e.appId]}}catch(e){Qn.error(e)}e("config",o,a)}(e,t,n,r,o,i)}else if("consent"===o){const[t,n]=a
;e("consent",t,n)}else if("get"===o){const[t,n,r]=a;e("get",t,n,r)}else if("set"===o){const[t]=a;e("set",t)}else e(o,...a)}catch(e){Qn.error(e)}}}function $(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function ee(e,t=$n,n){const{appId:r,apiKey:o,measurementId:a}=e.options;if(!r)throw Zn.create("no-app-id");if(!o){if(a)return{measurementId:a,appId:r};throw Zn.create("no-api-key")}const i=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()
},s=new er;return setTimeout((async()=>{s.abort()}),void 0!==n?n:6e4),te({appId:r,apiKey:o,measurementId:a},i,s,t)}async function te(e,{throttleEndTimeMillis:t,backoffCount:n},r,a=$n){var i;const{appId:s,measurementId:c}=e;try{await function(e,t){return new Promise(((n,r)=>{const o=Math.max(t-Date.now(),0),a=setTimeout(n,o);e.addEventListener((()=>{clearTimeout(a),r(Zn.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(r,t)}catch(e){
if(c)return Qn.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+c+` provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:s,measurementId:c};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,o={method:"GET",headers:$(r)},a="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),i=await fetch(a,o)
;if(200!==i.status&&304!==i.status){let e="";try{const n=await i.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw Zn.create("config-fetch-failed",{httpStatus:i.status,responseMessage:e})}return i.json()}(e);return a.deleteThrottleMetadata(s),t}catch(t){const l=t;if(!function(e){if(!(e instanceof wt&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(l)){if(a.deleteThrottleMetadata(s),
c)return Qn.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+c+` provided in the "measurementId" field in the local Firebase config. [${null==l?void 0:l.message}]`),{appId:s,measurementId:c};throw t}const d=503===Number(null===(i=null==l?void 0:l.customData)||void 0===i?void 0:i.httpStatus)?o(n,a.intervalMillis,30):o(n,a.intervalMillis),u={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return a.setThrottleMetadata(s,u),
Qn.debug(`Calling attemptFetch again in ${d} millis`),te(e,u,r,a)}}function ne(e){nr=e}function re(e){tr=e}async function oe(n,r,o,a,i,s,c){var l;const d=ee(n);d.then((e=>{o[e.measurementId]=e.appId,
n.options.measurementId&&e.measurementId!==n.options.measurementId&&Qn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>Qn.error(e))),r.push(d);const u=async function(){
if(!e())return Qn.warn(Zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await t()}catch(e){return Qn.warn(Zn.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?a.getId():void 0)),[h,p]=await Promise.all([d,u]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Xn)&&n.src.includes(e))return n;return null
})(s)||Q(s,h.measurementId),nr&&(i("consent","default",nr),ne(void 0)),i("js",new Date);const f=null!==(l=null==c?void 0:c.config)&&void 0!==l?l:{};return f.origin="firebase",f.update=!0,null!=p&&(f.firebase_id=p),i("config",h.measurementId,f),tr&&(i("set",tr),re(void 0)),h.measurementId}function ae(){const e=[];if(function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id
}()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=Zn.create("invalid-analytics-context",{errorInfo:t});Qn.warn(n.message)}}function ie(e,t,n){ae();const r=e.options.appId;if(!r)throw Zn.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Zn.create("no-api-key")
;Qn.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=or[r])throw Zn.create("already-exists",{id:r});if(!ur){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(lr);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,o){let a=function(){
window[r].push(arguments)};return window[o]&&"function"==typeof window[o]&&(a=window[o]),window[o]=Z(a,e,t,n),{gtagCore:a,wrappedGtag:window[o]}}(or,ar,ir,lr,dr);cr=e,sr=t,ur=!0}return or[r]=oe(e,ar,ir,t,sr,lr,n),new rr(e)}function se(e=function(e=xn){const t=An.get(e);if(!t&&e===xn&&yt())return f();if(!t)throw Sn.create("no-app",{appName:e});return t}()){const t=p(e=a(e),Kn);return t.isInitialized()?t.getImmediate():function(e,t={}){const r=p(e,Kn);if(r.isInitialized()){const e=r.getImmediate()
;if(n(t,r.getOptions()))return e;throw Zn.create("already-initialized")}const o=r.initialize({options:t});return o}(e)}function ce(e,t,n,r){e=a(e),async function(e,t,n,r,o){if(o&&o.global)e("event",n,r);else{const o=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:o}))}}(cr,or[e.app.options.appId],t,n,r).catch((e=>Qn.error(e)))}function le(e){if("string"!=typeof e||!e)throw Error("expected a non-empty string, got: "+e)}function de(e){
if("number"!=typeof e)throw Error("expected a number, got: "+e)}function ue(e){return function(e,t){const n=new Set,r=[];for(const o of e){const e=t(o);n.has(e)||(n.add(e),r.push(o))}return r}(e,(e=>e.unicode))}function he(e,t,n){n.onerror=()=>t(n.error),n.onblocked=()=>t(Error("IDB blocked")),n.onsuccess=()=>e(n.result)}async function pe(e){const t=await new Promise(((t,n)=>{const r=indexedDB.open(e,1);Ar[e]=r,r.onupgradeneeded=e=>{e.oldVersion<1&&function(e){function t(t,n,r){
const o=n?e.createObjectStore(t,{keyPath:n}):e.createObjectStore(t);if(r)for(const[e,[t,n]]of Object.entries(r))o.createIndex(e,t,{multiEntry:n});return o}t(mr),t(fr,"unicode",{[br]:["tokens",!0],[vr]:[["group","order"]],[Tr]:["skinUnicodes",!0]}),t(gr,void 0,{[yr]:[""]})}(r.result)},he(t,n,r)}));return t.onclose=()=>me(e),t}function fe(e,t,n,r){return new Promise(((o,a)=>{const i=e.transaction(t,n,{durability:"relaxed"}),s="string"==typeof t?i.objectStore(t):t.map((e=>i.objectStore(e)));let c
;r(s,i,(e=>{c=e})),i.oncomplete=()=>o(c),i.onerror=()=>a(i.error)}))}function me(e){const t=Ar[e],n=t&&t.result;if(n){n.close();const t=Lr[e];if(t)for(const e of t)e()}delete Ar[e],delete Ir[e],delete Lr[e]}function ge(e){return e.split(/[\s_]+/).map((e=>!e.match(/\w/)||Sr.has(e)?e.toLowerCase():e.replace(/[)(:,]/g,"").replace(/\u2019/g,"'").toLowerCase())).filter(Boolean)}function be(e){return e.filter(Boolean).map((e=>e.toLowerCase())).filter((e=>e.length>=2))}function ye(e,t,n,r){
e[t](n).onsuccess=e=>r&&r(e.target.result)}function ve(e,t,n){ye(e,"get",t,n)}function we(e,t,n){ye(e,"getAll",t,n)}function ke(e){e.commit&&e.commit()}function Ce(e,t){const n=function(e,t){let n=e[0];for(let r=1;r<e.length;r++){const o=e[r];t(n)>t(o)&&(n=o)}return n}(e,(e=>e.length)),r=[];for(const o of n)e.some((e=>-1===e.findIndex((e=>t(e)===t(o)))))||r.push(o);return r}async function Ee(e,t,n,r){try{const o=function(e){
const t=e.map((({annotation:e,emoticon:t,group:n,order:r,shortcodes:o,skins:a,tags:i,emoji:s,version:c})=>{const l={annotation:e,group:n,order:r,tags:i,tokens:[...new Set(be([...(o||[]).map(ge).flat(),...(i||[]).map(ge).flat(),...ge(e),t]))].sort(),unicode:s,version:c};if(t&&(l.emoticon=t),o&&(l.shortcodes=o),a){l.skinTones=[],l.skinUnicodes=[],l.skinVersions=[];for(const{tone:e,emoji:t,version:n}of a)l.skinTones.push(e),l.skinUnicodes.push(t),l.skinVersions.push(n)}return l}));return t}(t)
;await fe(e,[fr,mr],xr,(([e,t],a)=>{function i(){2==++l&&function(){if(s!==r||c!==n){e.clear();for(const t of o)e.put(t);t.put(r,wr),t.put(n,kr),ke(a)}}()}let s,c,l=0;ve(t,wr,(e=>{s=e,i()})),ve(t,kr,(e=>{c=e,i()}))}))}finally{}}async function xe(e,t){const n=be(ge(t));return n.length?fe(e,fr,Er,((e,t,r)=>{const o=[],a=()=>{const e=Ce(o,(e=>e.unicode));r(e.sort(((e,t)=>e.order<t.order?-1:1)))};for(let t=0;t<n.length;t++){
const r=n[t],i=t===n.length-1?IDBKeyRange.bound(r,r+"\uffff",!1,!0):IDBKeyRange.only(r);we(e.index(br),i,(e=>{o.push(e),o.length===n.length&&a()}))}})):[]}async function Te(e,t){const n=await xe(e,t);if(!n.length){const n=e=>(e.shortcodes||[]).includes(t.toLowerCase());return await async function(e,t){return fe(e,fr,Er,((e,n,r)=>{let o;const a=()=>{e.getAll(o&&IDBKeyRange.lowerBound(o,!0),50).onsuccess=e=>{const n=e.target.result;for(const e of n)if(o=e.unicode,t(e))return r(e)
;if(n.length<50)return r();a()}};a()}))}(e,n)||null}return n.filter((e=>{const n=(e.shortcodes||[]).map((e=>e.toLowerCase()));return n.includes(t.toLowerCase())}))[0]||null}function Ae(e,t,n){return fe(e,t,Er,((e,t,r)=>ve(e,n,r)))}function Ie(e){!function(e){const t=e&&Array.isArray(e),n=t&&e.length&&(!e[0]||jr.some((t=>!(t in e[0]))));if(!t||n)throw Error("Custom emojis are in the wrong format")}(e);const t=(e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:1,n=e.sort(t),r=function(e,t){
const n=new Map;for(const r of e){const e=t(r);for(const t of e){let e=n;for(let n=0;n<t.length;n++){const r=t.charAt(n);let o=e.get(r);o||(o=new Map,e.set(r,o)),e=o}let o=e.get("");o||(o=[],e.set("",o)),o.push(r)}}return(e,t)=>{let r=n;for(let t=0;t<e.length;t++){const n=e.charAt(t),o=r.get(n);if(!o)return[];r=o}if(t)return r.get("")||[];const o=[],a=[r];for(;a.length;){const e=[...a.shift().entries()].sort(((e,t)=>e[0]<t[0]?-1:1));for(const[t,n]of e)""===t?o.push(...n):a.push(n)}return o}
}(e,(e=>{const t=new Set;if(e.shortcodes)for(const n of e.shortcodes)for(const e of ge(n))t.add(e);return t})),o=e=>r(e,!0),a=e=>r(e,!1),i=new Map,s=new Map;for(const t of e){s.set(t.name.toLowerCase(),t);for(const e of t.shortcodes||[])i.set(e.toLowerCase(),t)}return{all:n,search:e=>{const n=ge(e),r=n.map(((e,t)=>(t<n.length-1?o:a)(e)));return Ce(r,(e=>e.name)).sort(t)},byShortcode:e=>i.get(e.toLowerCase()),byName:e=>s.get(e.toLowerCase())}}function Le(e){if(!e)return e
;if(Mr&&(e=structuredClone(e)),delete e.tokens,e.skinTones){const t=e.skinTones.length;e.skins=Array(t);for(let n=0;n<t;n++)e.skins[n]={tone:e.skinTones[n],unicode:e.skinUnicodes[n],version:e.skinVersions[n]};delete e.skinTones,delete e.skinUnicodes,delete e.skinVersions}return e}function Se(e,t){if(2!==Math.floor(e.status/100))throw Error("Failed to fetch: "+t+":  "+e.status)}async function je(e){const t=await fetch(e);Se(t,e);const n=t.headers.get("etag"),r=await t.json();return function(e){
if(!e||!Array.isArray(e)||!e[0]||"object"!=typeof e[0]||_r.some((t=>!(t in e[0]))))throw Error("Emoji data is in the wrong format")}(r),[n,r]}async function Me(e){let t=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=-1;++o<t;)r[o]=e.charCodeAt(o);return n}(JSON.stringify(e));const n=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=-1;++o<r;)t+=String.fromCharCode(n[o]);return t}(await crypto.subtle.digest("SHA-1",t));return btoa(n)}async function _e(e,t){
let n,r=await async function(e){const t=await fetch(e,{method:"HEAD"});Se(t,e);const n=t.headers.get("etag");return n}(t);if(!r){const e=await je(t);r=e[0],n=e[1],r||(r=await Me(n))}await async function(e,t,n){const[r,o]=await Promise.all([wr,kr].map((t=>Ae(e,mr,t))));return r===n&&o===t}(e,t,r)||(n||(n=(await je(t))[1]),await Ee(e,n,t,r))}function Oe(e){return e.unicode.includes("\u200d")}function De(e){const t=Rr(e,"#000"),n=Rr(e,"#fff");return t&&n&&((e,t)=>{
const n=[...e].join(","),r=[...t].join(",");return n===r&&!n.startsWith("0,0,0,")})(t,n)}function Pe(e){e.preventDefault(),e.stopPropagation()}function Fe(e,t,n){return(t+=e?-1:1)<0?t=n.length-1:t>=n.length&&(t=0),t}function Ne(e,t){const n=new Set,r=[];for(const o of e){const e=t(o);n.has(e)||(n.add(e),r.push(o))}return r}function He(e){{const t=document.createRange();return t.selectNode(e.firstChild),t.getBoundingClientRect().width}}function Ue(e,t,n){let r=e.get(t);return r||(r=n(),
e.set(t,r)),r}function Be(e){return""+e}function Re(e,t){const{targetNode:n}=t;let{targetParentNode:r}=t,o=!1;r?o=function(e,t){let n=e.firstChild,r=0;for(;n;){if(t[r]!==n)return!0;n=n.nextSibling,r++}return r!==t.length}(r,e):(o=!0,t.targetNode=void 0,t.targetParentNode=r=n.parentNode),o&&function(e,t){Qr?e.replaceChildren(...t):(e.innerHTML="",e.append(...t))}(r,e)}function ze(e){let t="",n=!1,r=!1,o=-1;const a=new Map,i=[];for(let s=0,c=e.length;s<c;s++){const l=e[s];if(t+=l,s===c-1)break
;for(let e=0;e<l.length;e++)switch(l.charAt(e)){case"<":"/"===l.charAt(e+1)?i.pop():(n=!0,i.push(++o));break;case">":n=!1,r=!1;break;case"=":r=!0}const d=Ue(a,i[i.length-1],(()=>[]));let u,h,p;if(r){const t=/(\S+)="?([^"=]*)$/.exec(l);u=t[1],h=t[2],p=/^[^">]*/.exec(e[s+1])[0]}const f={attributeName:u,attributeValuePre:h,attributeValuePost:p,expressionIndex:s};d.push(f),n||r||(t+=" ")}const s=function(e){const t=document.createElement("template");return t.innerHTML=e,t}(t);return{template:s,
elementsToBindings:a}}function We(e,t,n){for(let r=0;r<e.length;r++){const o=e[r],a={binding:o,targetNode:o.attributeName?t:t.firstChild,targetParentNode:void 0,currentExpression:void 0};n.push(a)}}function qe(e){const{template:t,elementsToBindings:n}=Ue(Yr,e,(()=>ze(e))),r=t.cloneNode(!0).content.firstElementChild,o=function(e,t){const n=[];let r;if(1===t.size&&(r=t.get(0)))We(r,e,n);else{const r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);let o=e,a=-1;do{const e=t.get(++a)
;e&&We(e,o,n)}while(o=r.nextNode())}return n}(r,n);return function(e){return function(e,t){for(const n of t){const{targetNode:t,currentExpression:r,binding:{expressionIndex:o,attributeName:a,attributeValuePre:i,attributeValuePost:s}}=n,c=e[o];if(r!==c)if(n.currentExpression=c,a)t.setAttribute(a,i+Be(c)+s);else{let e;Array.isArray(c)?Re(c,n):c instanceof Element?(e=c,t.replaceWith(e)):t.nodeValue=Be(c),e&&(n.targetNode=e)}}}(e,o),r}}function Ve(e,t,n,r,o,a,i,s,c){function l(e,n,r){
return f(e,((e,o)=>p`<button role="${n?"option":"menuitem"}" aria-selected="${n?o===t.activeSearchItem:""}" aria-label="${d(e,t.currentSkinTone)}" title="${u(e)}" class="${"emoji"+(n&&o===t.activeSearchItem?" active":"")+(e.unicode?"":" custom-emoji")}" id="${`${r}-${e.id}`}" style="${e.unicode?"":`--custom-emoji-background: url(${JSON.stringify(e.url)})`}">${e.unicode?h(e,t.currentSkinTone):""}</button>`),(e=>`${r}-${e.id}`))}
const{labelWithSkin:d,titleForEmoji:u,unicodeWithSkin:h}=n,{html:p,map:f}=function(e){const t=Ue(Kr,e,(()=>new Map));let n=Xr;return{map:function(e,t,r){return e.map(((e,o)=>{const a=n;n=r(e);try{return t(e,o)}finally{n=a}}))},html:function(e,...r){const o=Ue(t,e,(()=>new Map));return Ue(o,n,(()=>qe(e)))(r)}}
}(t),m=p`<section data-ref="rootElement" class="picker" aria-label="${t.i18n.regionLabel}" style="${t.pickerStyle||""}"><div class="pad-top"></div><div class="search-row"><div class="search-wrapper"><input id="search" class="search" type="search" role="combobox" enterkeyhint="search" placeholder="${t.i18n.searchLabel}" autocapitalize="none" autocomplete="off" spellcheck="true" aria-expanded="${!(!t.searchMode||!t.currentEmojis.length)}" aria-controls="search-results" aria-describedby="search-description" aria-autocomplete="list" aria-activedescendant="${t.activeSearchItemId?"emo-"+t.activeSearchItemId:""}" data-ref="searchElement" data-on-input="onSearchInput" data-on-keydown="onSearchKeydown"><label class="sr-only" for="search">${t.i18n.searchLabel}</label> <span id="search-description" class="sr-only">${t.i18n.searchDescription}</span></div><div class="skintone-button-wrapper ${t.skinTonePickerExpandedAfterAnimation?"expanded":""}"><button id="skintone-button" class="emoji ${t.skinTonePickerExpanded?"hide-focus":""}" aria-label="${t.skinToneButtonLabel}" title="${t.skinToneButtonLabel}" aria-describedby="skintone-description" aria-haspopup="listbox" aria-expanded="${t.skinTonePickerExpanded}" aria-controls="skintone-list" data-on-click="onClickSkinToneButton">${t.skinToneButtonText||""}</button></div><span id="skintone-description" class="sr-only">${t.i18n.skinToneDescription}</span><div data-ref="skinToneDropdown" id="skintone-list" class="skintone-list hide-focus ${t.skinTonePickerExpanded?"":"hidden no-animate"}" style="transform:translateY(${t.skinTonePickerExpanded?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))"})" role="listbox" aria-label="${t.i18n.skinTonesLabel}" aria-activedescendant="skintone-${t.activeSkinTone}" aria-hidden="${!t.skinTonePickerExpanded}" tabIndex="-1" data-on-focusout="onSkinToneOptionsFocusOut" data-on-click="onSkinToneOptionsClick" data-on-keydown="onSkinToneOptionsKeydown" data-on-keyup="onSkinToneOptionsKeyup">${f(t.skinTones,((e,n)=>p`<div id="skintone-${n}" class="emoji ${n===t.activeSkinTone?"active":""}" aria-selected="${n===t.activeSkinTone}" role="option" title="${t.i18n.skinTones[n]}" aria-label="${t.i18n.skinTones[n]}">${e}</div>`),(e=>e))}</div></div><div class="nav" role="tablist" style="grid-template-columns:repeat(${t.groups.length},1fr)" aria-label="${t.i18n.categoriesLabel}" data-on-keydown="onNavKeydown" data-on-click="onNavClick">${f(t.groups,(e=>p`<button role="tab" class="nav-button" aria-controls="tab-${e.id}" aria-label="${t.i18n.categories[e.name]}" aria-selected="${!t.searchMode&&t.currentGroup.id===e.id}" title="${t.i18n.categories[e.name]}" data-group-id="${e.id}"><div class="nav-emoji emoji">${e.emoji}</div></button>`),(e=>e.id))}</div><div class="indicator-wrapper"><div class="indicator" style="transform:translateX(${(t.isRtl?-1:1)*t.currentGroupIndex*100}%)"></div></div><div class="message ${t.message?"":"gone"}" role="alert" aria-live="polite">${t.message||""}</div><div data-ref="tabpanelElement" class="tabpanel ${!t.databaseLoaded||t.message?"gone":""}" role="${t.searchMode?"region":"tabpanel"}" aria-label="${t.searchMode?t.i18n.searchResultsLabel:t.i18n.categories[t.currentGroup.name]}" id="${t.searchMode?"":"tab-"+t.currentGroup.id}" tabIndex="0" data-on-click="onEmojiClick"><div data-action="calculateEmojiGridStyle">${f(t.currentEmojisWithCategories,((e,n)=>p`<div><div id="menu-label-${n}" class="category ${1===t.currentEmojisWithCategories.length&&""===t.currentEmojisWithCategories[0].category?"gone":""}" aria-hidden="true">${t.searchMode?t.i18n.searchResultsLabel:e.category?e.category:t.currentEmojisWithCategories.length>1?t.i18n.categories.custom:t.i18n.categories[t.currentGroup.name]}</div><div class="emoji-menu ${0===n||t.searchMode||-1!==t.currentGroup.id?"":"visibility-auto"}" style="${"--num-rows: "+Math.ceil(e.emojis.length/t.numColumns)}" data-action="updateOnIntersection" role="${t.searchMode?"listbox":"menu"}" aria-labelledby="menu-label-${n}" id="${t.searchMode?"search-results":""}">${l(e.emojis,t.searchMode,"emo")}</div></div>`),(e=>e.category))}</div></div><div class="favorites onscreen emoji-menu ${t.message?"gone":""}" role="menu" aria-label="${t.i18n.favoritesLabel}" data-on-click="onEmojiClick">${l(t.currentFavorites,!1,"fav")}</div><button data-ref="baselineEmoji" aria-hidden="true" tabindex="-1" class="abs-pos hidden emoji baseline-emoji">😀</button></section>`,g=(t,n)=>{
for(const r of e.querySelectorAll(`[${t}]`))n(r,r.getAttribute(t))};if(c){e.appendChild(m);for(const e of["click","focusout","input","keydown","keyup"])g("data-on-"+e,((t,n)=>{t.addEventListener(e,r[n])}));g("data-ref",((e,t)=>{a[t]=e})),i.addEventListener("abort",(()=>{e.removeChild(m)}))}g("data-action",((e,t)=>{let n=s.get(t);n||s.set(t,n=new WeakSet),n.has(e)||(n.add(e),o[t](e))}))}function Ge(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1
;return!0}function Je(e,t){function n(){const{customEmoji:e,database:t}=h,n=e||eo;t.customEmoji!==n&&(t.customEmoji=n)}function r(e){const t=function(e,t,n){let r=!0;for(const o of e){const e=He(n(o));void 0===Gr&&(Gr=He(t));const a=e/1.8<Gr;qr.set(o.unicode,a),a||(r=!1)}return r}(e,l.baselineEmoji,g);t?I():h.currentEmojis=[...h.currentEmojis]}function o(e){return!e.unicode||!Oe(e)||qr.get(e.unicode)}async function a(e){const t=h.emojiVersion||await Wr()
;return e.filter((({version:e})=>!e||e<=t))}async function i(e){return function(e,t){const n=e=>{const n={};for(const r of e)"number"==typeof r.tone&&r.version<=t&&(n[r.tone]=r.unicode);return n};return e.map((({unicode:e,skins:t,shortcodes:r,url:o,name:a,category:i,annotation:s})=>({unicode:e,name:a,shortcodes:r,url:o,category:i,annotation:s,id:e||a,skins:t&&n(t)})))}(e,h.emojiVersion||await Wr())}async function s(e){
const t=await h.database.getEmojiByUnicodeOrName(e),n=[...h.currentEmojis,...h.currentFavorites].find((t=>t.id===e)),r=n.unicode&&C(n,h.currentSkinTone);await h.database.incrementFavoriteEmojiCount(e),b("emoji-click",{emoji:t,skinTone:h.currentSkinTone,...r&&{unicode:r},...n.name&&{name:n.name}})}function c(e){h.currentSkinTone=e,h.skinTonePickerExpanded=!1,m("skintone-button"),b("skin-tone-change",{skinTone:e}),h.database.setPreferredSkinTone(e)}
const l={},d=new AbortController,u=d.signal,{state:h,createEffect:p}=function(e){let t,n=!1;const r=new Map,o=new Set;let a;const i=()=>{if(n)return;const e=[...o];o.clear();try{for(const t of e)t()}finally{a=!1,o.size&&(a=!0,Zr(i))}},s=new Proxy({},{get(e,n){if(t){let e=r.get(n);e||(e=new Set,r.set(n,e)),e.add(t)}return e[n]},set(e,t,n){if(e[t]!==n){e[t]=n;const s=r.get(t);if(s){for(const e of s)o.add(e);a||(a=!0,Zr(i))}}return!0}});return e.addEventListener("abort",(()=>{n=!0})),{state:s,
createEffect:e=>{const n=()=>{const r=t;t=n;try{return e()}finally{t=r}};return n()}}}(u),f=new Map;to(h,{skinToneEmoji:void 0,i18n:void 0,database:void 0,customEmoji:void 0,customCategorySorting:void 0,emojiVersion:void 0}),to(h,t),to(h,{initialLoad:!0,currentEmojis:[],currentEmojisWithCategories:[],rawSearchText:"",searchText:"",searchMode:!1,activeSearchItem:-1,message:void 0,skinTonePickerExpanded:!1,skinTonePickerExpandedAfterAnimation:!1,currentSkinTone:0,activeSkinTone:0,
skinToneButtonText:void 0,pickerStyle:void 0,skinToneButtonLabel:"",skinTones:[],currentFavorites:[],defaultFavoriteEmojis:void 0,numColumns:8,isRtl:!1,currentGroupIndex:0,groups:Pr,databaseLoaded:!1,activeSearchItemId:void 0}),p((()=>{h.currentGroup!==h.groups[h.currentGroupIndex]&&(h.currentGroup=h.groups[h.currentGroupIndex])}));const m=t=>{e.getElementById(t).focus()},g=t=>e.getElementById("emo-"+t.id),b=(e,t)=>{l.rootElement.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0
}))},y=(e,t)=>e.id===t.id,v=(e,t)=>{const{category:n,emojis:r}=e,{category:o,emojis:a}=t;return n===o&&Ge(r,a,y)},w=e=>{Ge(h.currentEmojis,e,y)||(h.currentEmojis=e)},k=e=>{h.searchMode!==e&&(h.searchMode=e)},C=(e,t)=>t&&e.skins&&e.skins[t]||e.unicode,E={labelWithSkin:(e,t)=>{return(n=[e.name||C(e,t),e.annotation,...e.shortcodes||eo].filter(Boolean),Ne(n,(e=>e))).join(", ");var n},titleForEmoji:e=>e.annotation||(e.shortcodes||eo).join(", "),unicodeWithSkin:C},x={onClickSkinToneButton:function(e){
h.skinTonePickerExpanded=!h.skinTonePickerExpanded,h.activeSkinTone=h.currentSkinTone,h.skinTonePickerExpanded&&(Pe(e),Vr((()=>m("skintone-list"))))},onEmojiClick:async function(e){const{target:t}=e;t.classList.contains("emoji")&&(Pe(e),s(t.id.substring(4)))},onNavClick:function(e){const{target:t}=e,n=t.closest(".nav-button");if(!n)return;const r=parseInt(n.dataset.groupId,10);l.searchElement.value="",h.rawSearchText="",h.searchText="",h.activeSearchItem=-1,
h.currentGroupIndex=h.groups.findIndex((e=>e.id===r))},onNavKeydown:function(e){const{target:t,key:n}=e,r=t=>{t&&(Pe(e),t.focus())};switch(n){case"ArrowLeft":return r(t.previousElementSibling);case"ArrowRight":return r(t.nextElementSibling);case"Home":return r(t.parentElement.firstElementChild);case"End":return r(t.parentElement.lastElementChild)}},onSearchKeydown:function(e){if(!h.searchMode||!h.currentEmojis.length)return;const t=t=>{Pe(e),
h.activeSearchItem=Fe(t,h.activeSearchItem,h.currentEmojis)};switch(e.key){case"ArrowDown":return t(!1);case"ArrowUp":return t(!0);case"Enter":if(-1!==h.activeSearchItem)return Pe(e),s(h.currentEmojis[h.activeSearchItem].id);h.activeSearchItem=0}},onSkinToneOptionsClick:function(e){const{target:{id:t}}=e,n=t&&t.match(/^skintone-(\d)/);n&&(Pe(e),c(parseInt(n[1],10)))},onSkinToneOptionsFocusOut:async function(e){const{relatedTarget:t}=e;t&&"skintone-list"===t.id||(h.skinTonePickerExpanded=!1)},
onSkinToneOptionsKeydown:function(e){if(!h.skinTonePickerExpanded)return;const t=async t=>{Pe(e),h.activeSkinTone=t};switch(e.key){case"ArrowUp":return t(Fe(!0,h.activeSkinTone,h.skinTones));case"ArrowDown":return t(Fe(!1,h.activeSkinTone,h.skinTones));case"Home":return t(0);case"End":return t(h.skinTones.length-1);case"Enter":return Pe(e),c(h.activeSkinTone);case"Escape":return Pe(e),h.skinTonePickerExpanded=!1,m("skintone-button")}},onSkinToneOptionsKeyup:function(e){
if(h.skinTonePickerExpanded)return" "===e.key?(Pe(e),c(h.activeSkinTone)):void 0},onSearchInput:function(e){h.rawSearchText=e.target.value}},T={calculateEmojiGridStyle:function(e){!function(e,t,n){let r;Jr?(r=new ResizeObserver(n),r.observe(e)):Vr(n),t.addEventListener("abort",(()=>{r&&r.disconnect()}))}(e,u,(()=>{{const e=getComputedStyle(l.rootElement),t=parseInt(e.getPropertyValue("--num-columns"),10),n="rtl"===e.getPropertyValue("direction");h.numColumns=t,h.isRtl=n}}))},
updateOnIntersection:function(e){!function(e,t,n){{const r=e.closest(".tabpanel");let o=$r.get(r);o||(o=new IntersectionObserver(n,{root:r,rootMargin:"50% 0px 50% 0px",threshold:0}),$r.set(r,o),t.addEventListener("abort",(()=>{o.disconnect()}))),o.observe(e)}}(e,u,(e=>{for(const{target:t,isIntersecting:n}of e)t.classList.toggle("onscreen",n)}))}};let A=!0;p((()=>{Ve(e,h,E,x,T,l,u,f,A),A=!1})),h.emojiVersion||Wr().then((e=>{e||(h.message=h.i18n.emojiUnsupportedMessage)})),p((()=>{
h.database&&async function(){let e=!1;const t=setTimeout((()=>{e=!0,h.message=h.i18n.loadingMessage}),1e3);try{await h.database.ready(),h.databaseLoaded=!0}catch(e){h.message=h.i18n.networkErrorMessage}finally{clearTimeout(t),e&&(e=!1,h.message="")}}()})),p((()=>{h.pickerStyle=`\n      --num-groups: ${h.groups.length}; \n      --indicator-opacity: ${h.searchMode?0:1}; \n      --num-skintones: 6;`})),p((()=>{h.customEmoji&&h.database&&n()})),p((()=>{
h.customEmoji&&h.customEmoji.length?h.groups!==Dr&&(h.groups=Dr):h.groups!==Pr&&(h.currentGroupIndex&&h.currentGroupIndex--,h.groups=Pr)})),p((()=>{!async function(){h.databaseLoaded&&(h.currentSkinTone=await h.database.getPreferredSkinTone())}()})),p((()=>{h.skinTones=[,,,,,,].fill().map(((e,t)=>function(e,t){if(0===t)return e;const n=e.indexOf("\u200d");return-1!==n?e.substring(0,n)+String.fromCodePoint(127995+t-1)+e.substring(n):(e.endsWith("\ufe0f")&&(e=e.substring(0,e.length-1)),
e+"\ud83c"+String.fromCodePoint(57339+t-1))}(h.skinToneEmoji,t)))})),p((()=>{h.skinToneButtonText=h.skinTones[h.currentSkinTone]})),p((()=>{h.skinToneButtonLabel=h.i18n.skinToneLabel.replace("{skinTone}",h.i18n.skinTones[h.currentSkinTone])})),p((()=>{h.databaseLoaded&&async function(){const{database:e}=h,t=(await Promise.all(Hr.map((t=>e.getEmojiByUnicodeOrName(t))))).filter(Boolean);h.defaultFavoriteEmojis=t}()})),p((()=>{h.databaseLoaded&&h.defaultFavoriteEmojis&&async function(){n()
;const{database:e,defaultFavoriteEmojis:t,numColumns:r}=h,o=await e.getTopFavoriteEmoji(r),a=await i(Ne([...o,...t],(e=>e.unicode||e.name)).slice(0,r));h.currentFavorites=a}()})),p((()=>{!async function(){const{searchText:e,currentGroup:t,databaseLoaded:n,customEmoji:r}=h;if(n)if(e.length>=2){const t=await async function(e){return i(await a(await h.database.getEmojiBySearchQuery(e)))}(e);h.searchText===e&&(w(t),k(!0))}else{const{id:e}=t;if(-1!==e||r&&r.length){const t=await async function(e){
const t=-1===e?h.customEmoji:await h.database.getEmojiByGroup(e);return i(await a(t))}(e);h.currentGroup.id===e&&(w(t),k(!1))}}else h.currentEmojis=[],h.searchMode=!1}()}));const I=()=>{Vr((()=>{var e;(e=l.tabpanelElement)&&(e.scrollTop=0)}))};return p((()=>{const{currentEmojis:e,emojiVersion:t}=h,n=e.filter((e=>e.unicode)).filter((e=>Oe(e)&&!qr.has(e.unicode)));if(!t&&n.length)w(e),Vr((()=>r(n)));else{const n=t?e:e.filter(o);w(n),I()}})),p((()=>{})),p((()=>{const e=function(){
const{searchMode:e,currentEmojis:t}=h;if(e)return[{category:"",emojis:t}];const n=new Map;for(const e of t){const t=e.category||"";let r=n.get(t);r||(r=[],n.set(t,r)),r.push(e)}return[...n.entries()].map((([e,t])=>({category:e,emojis:t}))).sort(((e,t)=>h.customCategorySorting(e.category,t.category)))}();(e=>{Ge(h.currentEmojisWithCategories,e,v)||(h.currentEmojisWithCategories=e)})(e)})),p((()=>{h.activeSearchItemId=-1!==h.activeSearchItem&&h.currentEmojis[h.activeSearchItem].id})),p((()=>{
const{rawSearchText:e}=h;Fr((()=>{h.searchText=(e||"").trim(),h.activeSearchItem=-1}))})),p((()=>{h.skinTonePickerExpanded?l.skinToneDropdown.addEventListener("transitionend",(()=>{h.skinTonePickerExpandedAfterAnimation=!0}),{once:!0}):h.skinTonePickerExpandedAfterAnimation=!1})),{$set(e){to(h,e)},$destroy(){d.abort()}}}function Ye(e){try{return new DataView(e,0,0),!0}catch(e){return!1}}function Ke(e){return ArrayBuffer.isView(e)&&"Uint8Array"===e[Symbol.toStringTag]}function Xe(){
return Math.floor(4294967296*Math.random())}function Qe(e,t){return yi(e,{i:2},t&&t.out,t&&t.dictionary)}function Ze(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function $e(){return new TransformStream({transform(e,t){!function(e,t){Pi&&e.data instanceof Blob?e.data.arrayBuffer().then(Ze).then(t):Fi&&(e.data instanceof ArrayBuffer||Ni(e.data))?t(Ze(e.data)):Hi(e,!1,(e=>{Bi||(Bi=new TextEncoder),t(Bi.encode(e))
}))}(e,(n=>{const r=n.length;let o;if(r<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,r);else if(r<65536){o=new Uint8Array(3);const e=new DataView(o.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{o=new Uint8Array(9);const e=new DataView(o.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&"string"!=typeof e.data&&(o[0]|=128),t.enqueue(o),t.enqueue(n)}))}})}function et(e){return e.reduce(((e,t)=>e+t.length),0)}function tt(e,t){if(e[0].length===t)return e.shift()
;const n=new Uint8Array(t);let r=0;for(let o=0;o<t;o++)n[o]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function nt(e){if(e)return function(e){for(var t in nt.prototype)e[t]=nt.prototype[t];return e}(e)}function rt(e,...t){return t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}function ot(e,t){t.useNativeTimers?(e.setTimeoutFn=Xi.bind(Ki),e.clearTimeoutFn=Qi.bind(Ki)):(e.setTimeoutFn=Ki.setTimeout.bind(Ki),
e.clearTimeoutFn=Ki.clearTimeout.bind(Ki))}function at(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function it(){}function st(){for(let e in os.requests)os.requests.hasOwnProperty(e)&&os.requests[e].abort()}function ct(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||ns))return new XMLHttpRequest}catch(e){}if(!t)try{return new(Ki[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}function lt(e){
if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let o=ds.exec(e||""),a={},i=14;for(;i--;)a[us[i]]=o[i]||"";return-1!=n&&-1!=r&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/")
;return"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}(0,a.path),a.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,a.query),a}var dt={};dt.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}();const ut=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r)
;o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296==(64512&o)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},ht={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",
get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const o=e[t],a=t+1<e.length,i=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=o>>2,d=(3&o)<<4|i>>4;let u=(15&i)<<2|c>>6,h=63&c;s||(h=64,
a||(u=64)),r.push(n[l],n[d],n[u],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ut(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&a)}else if(o>239&&o<365){const a=((7&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536
;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],i=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&a)<<6|63&i)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const o=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;const i=t<e.length?n[e.charAt(t)]:64;++t;const s=t<e.length?n[e.charAt(t)]:64;if(++t,
null==o||null==a||null==i||null==s)throw new pt;const c=o<<2|a>>4;if(r.push(c),64!==i){const e=a<<4&240|i>>2;if(r.push(e),64!==s){const e=i<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,
this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class pt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ft=function(e){return function(e){const t=ut(e);return ht.encodeByteArray(t,!0)}(e).replace(/\./g,"")},mt=function(e){
try{return ht.decodeString(e,!0)}catch(e){}return null},gt=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==dt.g)return dt.g;throw Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,bt=()=>{try{return gt()||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{
e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&mt(e[1]);return t&&JSON.parse(t)})()}catch(e){return}},yt=()=>{var e;return null===(e=bt())||void 0===e?void 0:e.config};class vt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}class wt extends Error{
constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,wt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kt.prototype.create)}}class kt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?function(e,t){return e.replace(Ct,((e,n)=>{const r=t[n];return null!=r?r+"":`<${n}?>`}))}(o,n):"Error",i=`${this.serviceName}: ${a} (${r}).`
;return new wt(r,i,n)}}const Ct=/\{\$([^}]+)}/g;class Et{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const xt="[DEFAULT]";class Tt{
constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new vt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}
return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){
if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:xt})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({
instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=xt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=xt){return this.instances.has(e)}getOptions(e=xt){
return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}
onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),o=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);const a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{
instanceIdentifier:(r=e,r===xt?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=xt){return this.component?this.component.multipleInstances?e:xt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class At{constructor(e){this.name=e,
this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Tt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
const It=[];var Lt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Lt||(Lt={}));const St={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},jt=Lt.INFO,Mt={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},_t=(e,t)=>{if(!(t<e.logLevel||((new Date).toISOString(),
Mt[t])))throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ot{constructor(e){this.name=e,this._logLevel=jt,this._logHandler=_t,this._userLogHandler=null,It.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?St[e]:e}get logHandler(){return this._logHandler}set logHandler(e){
if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...e),this._logHandler(this,Lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...e),this._logHandler(this,Lt.VERBOSE,...e)}info(...e){
this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...e),this._logHandler(this,Lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...e),this._logHandler(this,Lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...e),this._logHandler(this,Lt.ERROR,...e)}}let Dt,Pt;const Ft=new WeakMap,Nt=new WeakMap,Ht=new WeakMap,Ut=new WeakMap,Bt=new WeakMap;let Rt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Nt.get(e)
;if("objectStoreNames"===t)return e.objectStoreNames||Ht.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return c(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};const zt=e=>Bt.get(e),Wt=["get","getKey","getAll","getAllKeys","count"],qt=["put","add","delete","clear"],Vt=new Map;var Gt;Gt=Rt,Rt={...Gt,get:(e,t,n)=>d(e,t)||Gt.get(e,t,n),has:(e,t)=>!!d(e,t)||Gt.has(e,t)};class Jt{
constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}
const Yt="@firebase/app",Kt="0.10.18",Xt=new Ot("@firebase/app"),Qt="@firebase/app-compat",Zt="@firebase/analytics-compat",$t="@firebase/analytics",en="@firebase/app-check-compat",tn="@firebase/app-check",nn="@firebase/auth",rn="@firebase/auth-compat",on="@firebase/database",an="@firebase/data-connect",sn="@firebase/database-compat",cn="@firebase/functions",ln="@firebase/functions-compat",dn="@firebase/installations",un="@firebase/installations-compat",hn="@firebase/messaging",pn="@firebase/messaging-compat",fn="@firebase/performance",mn="@firebase/performance-compat",gn="@firebase/remote-config",bn="@firebase/remote-config-compat",yn="@firebase/storage",vn="@firebase/storage-compat",wn="@firebase/firestore",kn="@firebase/vertexai",Cn="@firebase/firestore-compat",En="firebase",xn="[DEFAULT]",Tn={
[Yt]:"fire-core",[Qt]:"fire-core-compat",[$t]:"fire-analytics",[Zt]:"fire-analytics-compat",[tn]:"fire-app-check",[en]:"fire-app-check-compat",[nn]:"fire-auth",[rn]:"fire-auth-compat",[on]:"fire-rtdb",[an]:"fire-data-connect",[sn]:"fire-rtdb-compat",[cn]:"fire-fn",[ln]:"fire-fn-compat",[dn]:"fire-iid",[un]:"fire-iid-compat",[hn]:"fire-fcm",[pn]:"fire-fcm-compat",[fn]:"fire-perf",[mn]:"fire-perf-compat",[gn]:"fire-rc",[bn]:"fire-rc-compat",[yn]:"fire-gcs",[vn]:"fire-gcs-compat",[wn]:"fire-fst",
[Cn]:"fire-fst-compat",[kn]:"fire-vertex","fire-js":"fire-js",[En]:"fire-js-all"},An=new Map,In=new Map,Ln=new Map,Sn=new kt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted",
"no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",
"idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class jn{constructor(e,t,n){this._isDeleted=!1,
this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Et("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}
get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}const Mn="firebase-heartbeat-store";let _n=null;class On{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate()
;this._storage=new Dn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=v();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return
;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(e){Xt.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,
null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=v(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const o of e){const e=n.find((e=>e.agent===o.agent));if(e){if(e.dates.push(o.date),w(n)>t){e.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),w(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}
}(this._heartbeatsCache.heartbeats),o=ft(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Xt.warn(e),""}}}class Dn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){
return!!e()&&t().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await g()).transaction(Mn),n=await t.objectStore(Mn).get(y(e));return await t.done,n}catch(e){if(e instanceof wt)Xt.warn(e.message);else{const t=Sn.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Xt.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t
;if(await this._canUseIndexedDBPromise){const n=await this.read();return b(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return b(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}var Pn;Pn="",
h(new Et("platform-logger",(e=>new Jt(e)),"PRIVATE")),h(new Et("heartbeat",(e=>new On(e)),"PRIVATE")),m(Yt,Kt,Pn),m(Yt,Kt,"esm2017"),m("fire-js",""),m("firebase","11.2.0","app");const Fn="@firebase/installations",Nn="0.6.12",Hn=1e4,Un="w:"+Nn,Bn="FIS_v2",Rn=new kt("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.",
"request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."}),zn=/^[cdef][\w-]{21}$/,Wn=new Map;let qn=null;const Vn="firebase-installations-store";let Gn=null;const Jn="installations",Yn=e=>{const t=p(e.getProvider("app").getImmediate(),Jn).getImmediate();return{
getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await U(t);return r?r.catch(console.error):q(t).catch(console.error),n.fid}(t),getToken:e=>J(t,e)}};h(new Et(Jn,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Y("App Configuration");if(!e.name)throw Y("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Y(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,
appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:p(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),h(new Et("installations-internal",Yn,"PRIVATE")),m(Fn,Nn),m(Fn,Nn,"esm2017");const Kn="analytics",Xn="https://www.googletagmanager.com/gtag/js",Qn=new Ot("@firebase/analytics"),Zn=new kt("analytics","Analytics",{
"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.",
"already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}",
"invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",
"fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',
"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."}),$n=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){
delete this.throttleMetadata[e]}};class er{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let tr,nr;class rr{constructor(e){this.app=e}_delete(){return delete or[this.app.options.appId],Promise.resolve()}}let or={},ar=[];const ir={};let sr,cr,lr="dataLayer",dr="gtag",ur=!1;const hr="@firebase/analytics",pr="0.10.11"
;h(new Et(Kn,((e,{options:t})=>ie(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),h(new Et("analytics-internal",(function(e){try{const t=e.getProvider(Kn).getImmediate();return{logEvent:(e,n,r)=>ce(t,e,n,r)}}catch(e){throw Zn.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),m(hr,pr),m(hr,pr,"esm2017")
;const fr="emoji",mr="keyvalue",gr="favorites",br="tokens",yr="count",vr="group-order",wr="eTag",kr="url",Cr="skinTone",Er="readonly",xr="readwrite",Tr="skinUnicodes",Ar={},Ir={},Lr={},Sr=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]),jr=["name","url"],Mr="undefined"!=typeof wrappedJSObject,_r=["annotation","emoji","group","order","version"];class Or{
constructor({dataSource:e="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",locale:t="en",customEmoji:n=[]}={}){this.dataSource=e,this.locale=t,this._dbName="emoji-picker-element-"+this.locale,this._db=void 0,this._lazyUpdate=void 0,this._custom=Ie(n),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const e=this._db=await(t=this._dbName,Ir[t]||(Ir[t]=pe(t)),Ir[t]);var t;!function(e,t){let n=Lr[e];n||(n=Lr[e]=[]),n.push(t)
}(this._dbName,this._clear);const n=this.dataSource,r=await async function(e){return!await Ae(e,mr,kr)}(e);r?await async function(e,t){let[n,r]=await je(t);n||(n=await Me(r)),await Ee(e,r,t,n)}(e,n):this._lazyUpdate=_e(e,n)}async ready(){const e=async()=>(this._ready||(this._ready=this._init()),this._ready);await e(),this._db||await e()}async getEmojiByGroup(e){return de(e),await this.ready(),ue(await async function(e,t){return fe(e,fr,Er,((e,n,r)=>{const o=IDBKeyRange.bound([t,0],[t+1,0],!1,!0)
;we(e.index(vr),o,r)}))}(this._db,e)).map(Le)}async getEmojiBySearchQuery(e){return le(e),await this.ready(),[...this._custom.search(e),...ue(await xe(this._db,e)).map(Le)]}async getEmojiByShortcode(e){le(e),await this.ready();const t=this._custom.byShortcode(e);return t||Le(await Te(this._db,e))}async getEmojiByUnicodeOrName(e){le(e),await this.ready();const t=this._custom.byName(e);return t||Le(await async function(e,t){return fe(e,fr,Er,((e,n,r)=>ve(e,t,(n=>{if(n)return r(n)
;ve(e.index(Tr),t,(e=>r(e||null)))}))))}(this._db,e))}async getPreferredSkinTone(){return await this.ready(),await Ae(this._db,mr,Cr)||0}async setPreferredSkinTone(e){return de(e),await this.ready(),function(e,t,n,r){return fe(e,t,xr,((e,t)=>{e.put(r,n),ke(t)}))}(this._db,mr,Cr,e)}async incrementFavoriteEmojiCount(e){return le(e),await this.ready(),t=this._db,n=e,fe(t,gr,xr,((e,t)=>ve(e,n,(r=>{e.put((r||0)+1,n),ke(t)}))));var t,n}async getTopFavoriteEmoji(e){return de(e),await this.ready(),
(await function(e,t,n){return 0===n?[]:fe(e,[gr,fr],Er,(([e,r],o,a)=>{const i=[];e.index(yr).openCursor(void 0,"prev").onsuccess=e=>{function o(e){if(i.push(e),i.length===n)return a(i);s.continue()}const s=e.target.result;if(!s)return a(i);const c=s.primaryKey,l=t.byName(c);if(l)return o(l);ve(r,c,(e=>{if(e)return o(e);s.continue()}))}}))}(this._db,this._custom,e)).map(Le)}set customEmoji(e){this._custom=Ie(e)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{
await this._lazyUpdate}catch(e){}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await me(this._dbName)}async delete(){var e;await this._shutdown(),await(e=this._dbName,new Promise(((t,n)=>{me(e),he(t,n,indexedDB.deleteDatabase(e))})))}}
const Dr=[[-1,"\u2728","custom"],[0,"\u{1f600}","smileys-emotion"],[1,"\u{1f44b}","people-body"],[3,"\u{1f431}","animals-nature"],[4,"\u{1f34e}","food-drink"],[5,"\u{1f3e0}\ufe0f","travel-places"],[6,"\u26bd","activities"],[7,"\u{1f4dd}","objects"],[8,"\u26d4\ufe0f","symbols"],[9,"\u{1f3c1}","flags"]].map((([e,t,n])=>({id:e,emoji:t,name:n}))),Pr=Dr.slice(1),Fr="function"==typeof requestIdleCallback?requestIdleCallback:setTimeout,Nr={"\u{1fae9}":16,"\u{1fae8}":15.1,"\u{1fae0}":14,
"\u{1f972}":13.1,"\u{1f97b}":12.1,"\u{1f970}":11,"\u{1f929}":5,"\u{1f471}\u200d\u2640\ufe0f":4,"\u{1f923}":3,"\u{1f441}\ufe0f\u200d\u{1f5e8}\ufe0f":2,"\u{1f600}":1,"\u{1f610}\ufe0f":.7,"\u{1f603}":.6
},Hr=["\u{1f60a}","\u{1f612}","\u2764\ufe0f","\u{1f44d}\ufe0f","\u{1f60d}","\u{1f602}","\u{1f62d}","\u263a\ufe0f","\u{1f614}","\u{1f629}","\u{1f60f}","\u{1f495}","\u{1f64c}","\u{1f618}"],Ur='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',Br=(e,t)=>e<t?-1:e>t?1:0,Rr=(e,t)=>{const n=document.createElement("canvas");n.width=n.height=1;const r=n.getContext("2d",{willReadFrequently:!0})
;return r.textBaseline="top",r.font="100px "+Ur,r.fillStyle=t,r.scale(.01,.01),r.fillText(e,0,0),r.getImageData(0,0,1,1).data};let zr;const Wr=()=>(zr||(zr=new Promise((e=>Fr((()=>e(function(){const e=Object.entries(Nr);try{for(const[t,n]of e)if(De(t))return n}catch(e){}return e[0][1]}())))))),zr),qr=new Map,Vr=requestAnimationFrame;let Gr,Jr="function"==typeof ResizeObserver
;const Yr=new WeakMap,Kr=new WeakMap,Xr=Symbol("un-keyed"),Qr="replaceChildren"in Element.prototype,Zr="function"==typeof queueMicrotask?queueMicrotask:e=>Promise.resolve().then(e),$r=new WeakMap,eo=[],{assign:to}=Object;var no={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading\u2026",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",
searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons",
"people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const ro=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji","emojiVersion"],oo=`:host{--emoji-font-family:${Ur}}`;class ao extends HTMLElement{constructor(e){super(),this.attachShadow({mode:"open"});const t=document.createElement("style")
;t.textContent=':host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--border-radius:0;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){color-scheme:light;--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);border-radius:var(--border-radius);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;scrollbar-gutter:stable;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.emoji-menu.visibility-auto{content-visibility:auto;contain-intrinsic-size:calc(var(--num-columns)*var(--total-emoji-size)) calc(var(--num-rows)*var(--total-emoji-size))}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;height:var(--total-emoji-size);width:var(--total-emoji-size);line-height:1;overflow:hidden;font-family:var(--emoji-font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.onscreen .custom-emoji::after{content:"";width:var(--emoji-size);height:var(--emoji-size);background-repeat:no-repeat;background-position:center center;background-size:contain;background-image:var(--custom-emoji-background)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{overflow-y:auto;scrollbar-gutter:stable;display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}'+oo,
this.shadowRoot.appendChild(t),this._ctx={locale:"en",dataSource:"https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",skinToneEmoji:"\u{1f590}\ufe0f",customCategorySorting:Br,customEmoji:null,i18n:no,emojiVersion:null,...e};for(const e of ro)"database"!==e&&Object.prototype.hasOwnProperty.call(this,e)&&(this._ctx[e]=this[e],delete this[e]);this._dbFlush()}connectedCallback(){this._cmp||(this._cmp=Je(this.shadowRoot,this._ctx))}disconnectedCallback(){Zr((()=>{
if(!this.isConnected&&this._cmp){this._cmp.$destroy(),this._cmp=void 0;const{database:e}=this._ctx;e.close().catch((()=>{}))}}))}static get observedAttributes(){return["locale","data-source","skin-tone-emoji","emoji-version"]}attributeChangedCallback(e,t,n){this._set(e.replace(/-([a-z])/g,((e,t)=>t.toUpperCase())),"emoji-version"===e?parseFloat(n):n)}_set(e,t){this._ctx[e]=t,this._cmp&&this._cmp.$set({[e]:t}),["locale","dataSource"].includes(e)&&this._dbFlush()}_dbCreate(){
const{locale:e,dataSource:t,database:n}=this._ctx;n&&n.locale===e&&n.dataSource===t||this._set("database",new Or({locale:e,dataSource:t}))}_dbFlush(){Zr((()=>this._dbCreate()))}}const io={};for(const e of ro)io[e]={get(){return"database"===e&&this._dbCreate(),this._ctx[e]},set(t){if("database"===e)throw Error("database is read-only");this._set(e,t)}};Object.defineProperties(ao.prototype,io),customElements.get("emoji-picker")||customElements.define("emoji-picker",ao)
;const so=Object.freeze(Object.setPrototypeOf((()=>{throw so}),null)),co=new Uint8Array(new ArrayBuffer(0),0,0),lo=Object.setPrototypeOf((function(){return Reflect.construct(Uint8Array,arguments,lo)}),null),uo=Object.freeze(Object.create(null,{[Symbol.toStringTag]:{value:"Buffer",writable:!1,enumerable:!1,configurable:!1}}));Object.defineProperty(lo,"from",{value:e=>{if(null==e||"object"!=typeof e)throw Error("Invalid buffer source")
;return Ke(e)?e:Ye(e)?new Uint8Array(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Uint8Array.from(e)},writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(lo,"concat",{value:(e,t)=>{if(null==e||"object"!=typeof e)throw Error("Invalid sources");if(Array.isArray(e)||(e=Array.from(e)),"number"!=typeof t){t=0;for(const{byteLength:n}of e){if(!Number.isSafeInteger(n)||n<0)throw Error("Invalid buffer object");t+=n}}const n=new Uint8Array(t);let r=0
;for(const t of e){const e=t.byteLength;n.set("length"in t?t:new Uint8Array("buffer"in t?t.buffer:t,0,e),r+=e)}return n}}),Object.defineProperty(lo,"prototype",{value:uo,writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(lo,"emptyBuffer",{value:co,writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(lo,"isArrayBuffer",{value:Ye,writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(lo,Symbol.hasInstance,{value:Ke,writable:!1,enumerable:!1,configurable:!1})
;const ho=Object.freeze(lo),po=Object.setPrototypeOf((function(){if("function"!=typeof new.target)return Object.create(fo);for(let e=Object.getPrototypeOf(this);null!=e;e=Object.getPrototypeOf(e))try{delete e.constructor}catch(e){}}),null),fo=Object.freeze(Object.create(null));Object.defineProperty(po,"prototype",{value:fo,writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(po,Symbol.hasInstance,{value:()=>!1,writable:!1,enumerable:!1,configurable:!1});const mo=Object.freeze(po)
;class go extends mo{#e;#t;#n;get closed(){return this.#n}get canRead(){return this.#e}get canWrite(){return this.#t}constructor(e,t){super(),this.#e=e??!1,this.#t=t??!1,this.#n=!1}close(){this.#n=!0}}class bo extends go{constructor(){super(!0,!1)}read(){return-1}readBuf(e){const t=e.byteLength;for(let n=0;n<t;n++){const t=this.read();if(!(t>=0))return n;e[n]=t}return t}readNBytes(e){const t=new Uint8Array(e),n=this.readBuf(t);return n<e?t.slice(0,n):t}}class yo extends go{constructor(){
super(!1,!0)}write(e){}flush(){}}const vo="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",wo={encode:e=>{let t="",n=0,r=0;for(let o=0;o<e.length;o++)for(n=n<<8|e[o],r+=8;r>=5;)t+=vo[n>>r-5&31],r-=5;for(r>0&&(t+=vo[n<<5-r&31]);t.length%8!=0;)t+="=";return t},decode:e=>{e=e.replace(/=+$/,"");const t=[];let n=0,r=0;for(let o=0;o<e.length;o++){const a=vo.indexOf(e[o].toUpperCase());if(a<0)throw Error("Invalid character found in Base32 string.");n=n<<5|a,r+=5,r>=8&&(t.push(n>>r-8&255),r-=8)}
return Uint8Array.from(t)}},ko=Object.freeze(Object.setPrototypeOf(wo,null)),Co="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Eo=new Uint8Array(new ArrayBuffer(256),0,256);for(let e=0;e<64;e++)Eo[Co.charCodeAt(e)]=e;const xo={encode:e=>{const t=e.byteLength;let n="";for(let r=0;r<t;r+=3){const t=e[r]<<16|e[r+1]<<8|e[r+2];n+=Co[t>>18&63]+Co[t>>12&63]+Co[t>>6&63]+Co[63&t]}switch(t%3){case 1:return n.slice(0,-2)+"==";case 2:return n.slice(0,-1)+"=";default:return n}},
decode:e=>{const t=e.length,n=new Uint8Array(.75*t-("=="===e.slice(t-2)?2:"="===e[t-1]?1:0));let r=0;for(let o=0;o<t;o+=4){const t=Eo[e.charCodeAt(o)]<<18|Eo[e.charCodeAt(o+1)]<<12|Eo[e.charCodeAt(o+2)]<<6|Eo[e.charCodeAt(o+3)];n[r++]=t>>16&255,n[r++]=t>>8&255,n[r++]=255&t}return n}},To=Object.freeze(Object.setPrototypeOf(xo,null)),Ao="0123456789abcdef",Io=e=>{let t="";for(let n=0;n<=3;n++)t+=Ao.charAt(e>>8*n+4&15)+Ao.charAt(e>>8*n&15);return t},Lo=(e,t)=>{let n=(65535&e)+(65535&t)
;return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},So=(e,t,n,r,o,a)=>Lo(((e,t)=>e<<t|e>>>32-t)(Lo(Lo(t,e),Lo(r,a)),o),n),jo=(e,t,n,r,o,a,i)=>So(t&n|~t&r,e,t,o,a,i),Mo=(e,t,n,r,o,a,i)=>So(t&r|n&~r,e,t,o,a,i),_o=(e,t,n,r,o,a,i)=>So(t^n^r,e,t,o,a,i),Oo=(e,t,n,r,o,a,i)=>So(n^(t|~r),e,t,o,a,i),Do={encode:e=>{const t=[]
;for(const n of Array.from(e,(e=>e.codePointAt(0)||65533)))n<128?t.push(n):n<2048?t.push(n>>6|192,63&n|128):n<65536?t.push(n>>12|224,n>>6&63|128,63&n|128):t.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128);return Uint8Array.from(t)},decode:e=>{const t=e.byteLength;let n="";for(let r=0;r<t;){const t=e[r++];if(128&t)if(192==(224&t))n+=String.fromCharCode((31&t)<<6|63&e[r++]);else if(224==(240&t))n+=String.fromCharCode((15&t)<<12|(63&e[r++])<<6|63&e[r++]);else if(240==(248&t)){
const o=(7&t)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++];n+=o>1114111?"\ufffd":String.fromCodePoint(o)}else n+="\ufffd";else n+=String.fromCharCode(t)}return n}},Po=Object.freeze(Object.setPrototypeOf(Do,null)),Fo={encode:e=>Uint8Array.from(e,(e=>e.charCodeAt(0))),decode:e=>Array.from(e,(e=>String.fromCharCode(e))).join("")},No=Object.freeze(Object.setPrototypeOf(Fo,null)),Ho={encode:e=>{const t=2*e.length,n=new ArrayBuffer(t),r=new DataView(n,0,t);for(let n=0,o=0;n<t;n+=2,
o++)r.setUint16(n,e.charCodeAt(o)||65533,!1);return new Uint8Array(n,0,t)},decode:e=>{const t=Math.floor(e.byteLength/2),n=Array(t),r=new DataView(e.buffer,e.byteOffset,2*t);for(let e=0,o=0;o<t;e+=2,o++)n[o]=String.fromCharCode(r.getUint16(e,!1));return n.join("")}},Uo=Object.freeze(Object.setPrototypeOf(Ho,null)),Bo={encode:e=>{const t=2*e.length,n=new ArrayBuffer(t),r=new DataView(n,0,t);for(let n=0,o=0;n<t;n+=2,o++)r.setUint16(n,e.charCodeAt(o)||65533,!0);return new Uint8Array(n,0,t)},
decode:e=>{const t=Math.floor(e.byteLength/2),n=Array(t),r=new DataView(e.buffer,e.byteOffset,2*t);for(let e=0,o=0;o<t;e+=2,o++)n[o]=String.fromCharCode(r.getUint16(e,!0));return n.join("")}},Ro=Object.freeze(Object.setPrototypeOf(Bo,null)),zo={encode:e=>{const t=Array.from(e,(e=>e.codePointAt(0)||65533)),n=4*t.length,r=new ArrayBuffer(n),o=new DataView(r,0,n);for(let e=0,r=0;e<n;e+=4,r++)o.setUint32(e,t[r],!1);return new Uint8Array(r,0,n)},decode:e=>{
const t=Math.floor(e.byteLength/4),n=Array(t),r=new DataView(e.buffer,e.byteOffset,4*t);for(let e=0,o=0;o<t;e+=4,o++){const t=r.getUint32(e,!1);n[o]=t>1114111?"\ufffd":String.fromCodePoint(t)}return n.join("")}},Wo=Object.freeze(Object.setPrototypeOf(zo,null)),qo={encode:e=>Array.from(e,(e=>{const t=(255&e).toString(16);return 1===t.length?"0"+t:t})).join(""),decode:e=>{const t=Math.floor(e.length/2),n=new Uint8Array(new ArrayBuffer(t),0,t)
;for(let r=0,o=0;r<t;r++)n[r]=parseInt(e.slice(o,o+=2),16);return n}},Vo=Object.freeze(Object.setPrototypeOf(qo,null));class Go extends bo{#r;constructor(e){super(),this.#r=e}read(){return 255&Math.floor(256*this.#r.rand())}readBuf(e){return this.#r.randbuf(e),e.byteLength}readNBytes(e){return this.#r.randbuf(new Uint8Array(new ArrayBuffer(e),0,e))}get closed(){return!1}close(){}}class Jo extends mo{#o;get seed(){return this.#o}static[Symbol.hasInstance](e){try{return e.#o,!0}catch(e){return!1}}
constructor(e){super(),this.#o=e||null}rand(){throw Error("Function not implemented")}randbuf(e){const t=e.byteLength;for(let n=0;n<t;n++)e[n]=255&Math.floor(256*this.rand());return e}randint(e,t){return(t||=0)+Math.floor(this.rand()*((e||4294967295)-t))}setSeed(e){this.#o=e||null}createStream(){return new Go(this)}}class Yo extends Jo{#a;#i;#s;#c;constructor(e){if(super(e||=[Xe(),Xe(),Xe(),Xe()]),!Array.isArray(e)||4!==e.length)throw Error("Invalid seed value");this.#a=e[0],this.#i=e[1],
this.#s=e[2],this.#c=e[3]}rand(){let e=this.#a|=0,t=this.#i|=0,n=this.#s|=0,r=this.#c|=0,o=(e+t|0)+r|0;return r=r+1|0,e=t^t>>>9,t=n+(n<<3)|0,n=n<<21|n>>>11,n=n+o|0,this.#a=e,this.#i=t,this.#s=n,this.#c=r,(o>>>0)/4294967296}setSeed(e){if(!Array.isArray(e)||4!==e.length)throw Error("Invalid seed value");this.#a=e[0],this.#i=e[1],this.#s=e[2],this.#c=e[3],super.setSeed(e)}}class Ko extends Jo{#l;constructor(e){super(e||=Xe()),this.#l=e}rand(){const e=this.#l=2654435769+(0|this.#l)|0;let t=e^e>>>16
;return t=Math.imul(t,569420461),t^=t>>>15,t=Math.imul(t,1935289751),((t^=t>>>15)>>>0)/4294967296}setSeed(e){this.#l=e,super.setSeed(e)}}class Xo extends Jo{#l;constructor(e){super(e||=Xe()),this.#l=e}rand(){let e=this.#l=1831565813+(0|this.#l);return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296}setSeed(e){this.#l=e,super.setSeed(e)}}class Qo extends Jo{#a;#i;#s;#c;constructor(e){if(super(e||=[Xe(),Xe(),Xe(),Xe()]),
!Array.isArray(e)||4!==e.length)throw Error("Invalid seed value");this.#a=e[0],this.#i=e[1],this.#s=e[2],this.#c=e[3]}rand(){let e=this.#a|=0,t=this.#i|=0,n=this.#s|=0,r=this.#c|=0,o=t<<9,a=5*t;return a=9*(a<<7|a>>>25),n^=e,r^=t,t^=n,e^=r,n^=o,r=r<<11|r>>>21,this.#a=e,this.#i=t,this.#s=n,this.#c=r,(a>>>0)/4294967296}setSeed(e){if(!Array.isArray(e)||4!==e.length)throw Error("Invalid seed value");this.#a=e[0],this.#i=e[1],this.#s=e[2],this.#c=e[3],super.setSeed(e)}}class Zo extends Jo{
static[Symbol.hasInstance](e){return Jo[Symbol.hasInstance](e)}constructor(e,t){switch(super(t),e||"mulberry32"){case"sfc32":return new Yo(t);case"splitmix32":return new Ko(t);case"mulberry32":return new Xo(t);case"xoshiro128":return new Qo(t);default:if(new.target===Zo)throw Error("Unsupported algorithm: "+e)}}}const $o={encode:e=>{const t=[Uint8Array.of(128,99,98,106,102,2)];let n=6;const r=e=>{switch(typeof e){case"undefined":t.push(0),n++;break;case"boolean":t.push(e?1:2),n++;break
;case"string":{const r=Po.encode(e),o=r.byteLength;t.push(Uint8Array.of(101,255&o,o>>8&255,o>>16&255,o>>24&255),r),n+=o+5}break;case"number":{if(Number.isSafeInteger(e))if(e>=0){if(e<256)return t.push(Uint8Array.of(10,e)),void(n+=2);if(e<65536)return t.push(Uint8Array.of(11,255&e,e>>8&255)),void(n+=3);if(e<4294967296)return t.push(Uint8Array.of(12,255&e,e>>8&255,e>>16&255,e>>24&255)),void(n+=5)}else{if(e>=-128&&e<128)return t.push(Uint8Array.of(20,e)),void(n+=2)
;if(e>=-32768&&e<32768)return t.push(Uint8Array.of(21,255&e,e>>8&255)),void(n+=3);if(e>=-2147483648&&e<2147483648)return t.push(Uint8Array.of(22,255&e,e>>8&255,e>>16&255,e>>24&255)),void(n+=5)}const r=new ArrayBuffer(9);{const t=new DataView(r,0,9);t.setUint8(0,33),t.setFloat64(1,e,!0)}t.push(new Uint8Array(r,0,9)),n+=9}break;case"bigint":{const r=new ArrayBuffer(9);{const t=new DataView(r,0,9);e>=0n?(t.setUint8(0,13),t.setBigUint64(1,e,!0)):(t.setUint8(0,23),t.setBigInt64(1,e,!0))}
t.push(new Uint8Array(r,0,9)),n+=9}break;case"object":if(null===e)t.push(255),n++;else if(Array.isArray(e)){const o=e.length;t.push(Uint8Array.of(99,255&o,o>>8&255,o>>16&255,o>>24&255)),n+=5;for(const t of e)r(t)}else if(Ye(e)){const r=new Uint8Array(e,0,e.byteLength),o=r.byteLength;t.push(Uint8Array.of(102,255&o,o>>8&255,o>>16&255,o>>24&255),r),n+=o+5}else if(ArrayBuffer.isView(e)){const r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o=r.byteLength
;t.push(Uint8Array.of(102,255&o,o>>8&255,o>>16&255,o>>24&255),r),n+=o+5}else{const o=Object.keys(e),a=o.length;t.push(Uint8Array.of(100,255&a,a>>8&255,a>>16&255,a>>24&255)),n+=5;for(const a of o){const o=e[a];switch(typeof o){case"bigint":case"number":case"object":case"string":case"boolean":case"undefined":{const e=Po.encode(a),r=e.byteLength;t.push(Uint8Array.of(255&r,r>>8&255,r>>16&255,r>>24&255),e),n+=r+4}r(o)}}}}};r(e);const o=new Uint8Array(n);let a=0
;for(const e of t)"number"!=typeof e?(o.set(e,a),a+=e.byteLength):o[a++]=e;return o},decode:e=>{if(!ArrayBuffer.isView(e))throw Error("invalid input value");if(128!==e[0]||99!==e[1]||98!==e[2]||106!==e[3]||102!==e[4]||2!==e[5])throw Error("Parse Error: Invalid magic value");const t=new DataView(e.buffer,e.byteOffset,e.byteLength);let n=6;const r=()=>(255&e[n++]|(255&e[n++])<<8|(255&e[n++])<<16|(255&e[n++])<<24)>>>0,o=()=>{const a=e[n++];switch(a){case 0:return;case 255:return null;case 1:
return!0;case 2:return!1;case 10:return e[n++];case 11:return 255&e[n++]|(255&e[n++])<<8;case 12:return r();case 13:return t.getBigUint64((n+=8)-8,!0);case 20:return e[n++]<<24>>24;case 21:return(255&e[n++]|(255&e[n++])<<8)<<16>>16;case 22:return 255&e[n++]|(255&e[n++])<<8|(255&e[n++])<<16|(255&e[n++])<<24;case 23:return t.getBigInt64((n+=8)-8,!0);case 32:return t.getFloat32((n+=4)-4,!0);case 33:return t.getFloat64((n+=8)-8,!0);case 99:{const e=r(),t=Array(e);for(let n=0;n<e;n++)t[n]=o()
;return t}case 100:{const t=r(),a=Object.create(null);for(let i=0;i<t;i++){const t=r();a[Po.decode(e.subarray(n,n+=t))]=o()}return a}case 102:{const t=r();return e.subarray(n,n+=t)}case 101:{const t=r();return Po.decode(e.subarray(n,n+=t))}default:throw Error("Parse Error: Invalid data ID: "+a)}};return o()}},ea=Object.freeze(Object.setPrototypeOf($o,null)),ta={md5:function(e){let t,n,r,o,a,i=1732584193,s=-271733879,c=-1732584194,l=271733878;const d=16*(1+(e.length+8>>6)),u=Array(d).fill(0)
;for(t=0;t<e.length;t++)u[t>>2]|=e.charCodeAt(t)<<t%4*8;for(u[t>>2]|=128<<t%4*8,u[d-2]=8*e.length,t=0;t<d;t+=16)n=i,r=s,o=c,a=l,i=jo(i,s,c,l,u[t+0],7,-680876936),l=jo(l,i,s,c,u[t+1],12,-389564586),c=jo(c,l,i,s,u[t+2],17,606105819),s=jo(s,c,l,i,u[t+3],22,-1044525330),i=jo(i,s,c,l,u[t+4],7,-176418897),l=jo(l,i,s,c,u[t+5],12,1200080426),c=jo(c,l,i,s,u[t+6],17,-1473231341),s=jo(s,c,l,i,u[t+7],22,-45705983),i=jo(i,s,c,l,u[t+8],7,1770035416),l=jo(l,i,s,c,u[t+9],12,-1958414417),
c=jo(c,l,i,s,u[t+10],17,-42063),s=jo(s,c,l,i,u[t+11],22,-1990404162),i=jo(i,s,c,l,u[t+12],7,1804603682),l=jo(l,i,s,c,u[t+13],12,-40341101),c=jo(c,l,i,s,u[t+14],17,-1502002290),s=jo(s,c,l,i,u[t+15],22,1236535329),i=Mo(i,s,c,l,u[t+1],5,-165796510),l=Mo(l,i,s,c,u[t+6],9,-1069501632),c=Mo(c,l,i,s,u[t+11],14,643717713),s=Mo(s,c,l,i,u[t+0],20,-373897302),i=Mo(i,s,c,l,u[t+5],5,-701558691),l=Mo(l,i,s,c,u[t+10],9,38016083),c=Mo(c,l,i,s,u[t+15],14,-660478335),s=Mo(s,c,l,i,u[t+4],20,-405537848),
i=Mo(i,s,c,l,u[t+9],5,568446438),l=Mo(l,i,s,c,u[t+14],9,-1019803690),c=Mo(c,l,i,s,u[t+3],14,-187363961),s=Mo(s,c,l,i,u[t+8],20,1163531501),i=Mo(i,s,c,l,u[t+13],5,-1444681467),l=Mo(l,i,s,c,u[t+2],9,-51403784),c=Mo(c,l,i,s,u[t+7],14,1735328473),s=Mo(s,c,l,i,u[t+12],20,-1926607734),i=_o(i,s,c,l,u[t+5],4,-378558),l=_o(l,i,s,c,u[t+8],11,-2022574463),c=_o(c,l,i,s,u[t+11],16,1839030562),s=_o(s,c,l,i,u[t+14],23,-35309556),i=_o(i,s,c,l,u[t+1],4,-1530992060),l=_o(l,i,s,c,u[t+4],11,1272893353),
c=_o(c,l,i,s,u[t+7],16,-155497632),s=_o(s,c,l,i,u[t+10],23,-1094730640),i=_o(i,s,c,l,u[t+13],4,681279174),l=_o(l,i,s,c,u[t+0],11,-358537222),c=_o(c,l,i,s,u[t+3],16,-722521979),s=_o(s,c,l,i,u[t+6],23,76029189),i=_o(i,s,c,l,u[t+9],4,-640364487),l=_o(l,i,s,c,u[t+12],11,-421815835),c=_o(c,l,i,s,u[t+15],16,530742520),s=_o(s,c,l,i,u[t+2],23,-995338651),i=Oo(i,s,c,l,u[t+0],6,-198630844),l=Oo(l,i,s,c,u[t+7],10,1126891415),c=Oo(c,l,i,s,u[t+14],15,-1416354905),s=Oo(s,c,l,i,u[t+5],21,-57434055),
i=Oo(i,s,c,l,u[t+12],6,1700485571),l=Oo(l,i,s,c,u[t+3],10,-1894986606),c=Oo(c,l,i,s,u[t+10],15,-1051523),s=Oo(s,c,l,i,u[t+1],21,-2054922799),i=Oo(i,s,c,l,u[t+8],6,1873313359),l=Oo(l,i,s,c,u[t+15],10,-30611744),c=Oo(c,l,i,s,u[t+6],15,-1560198380),s=Oo(s,c,l,i,u[t+13],21,1309151649),i=Oo(i,s,c,l,u[t+4],6,-145523070),l=Oo(l,i,s,c,u[t+11],10,-1120210379),c=Oo(c,l,i,s,u[t+2],15,718787259),s=Oo(s,c,l,i,u[t+9],21,-343485551),i=Lo(i,n),s=Lo(s,r),c=Lo(c,o),l=Lo(l,a);return Io(i)+Io(s)+Io(c)+Io(l)},
Hex:Vo,Null:mo,NTON:ea,ASCII:No,UTF_8:Po,Base32:ko,Base64:To,Buffer:ho,Random:Zo,Stream:go,UTF16BE:Uo,UTF16LE:Ro,UTF32BE:Wo,UTF32LE:Ro,cyrb128:function(e){let t=1779033703,n=3144134277,r=1013904242,o=2773480762;for(let a=0;a<e.length;a++){let i=e.charCodeAt(a);t=n^Math.imul(t^i,597399067),n=r^Math.imul(n^i,2869860233),r=o^Math.imul(r^i,951274213),o=t^Math.imul(o^i,2716044179)}return t=Math.imul(r^t>>>18,597399067),n=Math.imul(o^n>>>22,2869860233),r=Math.imul(t^r>>>17,951274213),
o=Math.imul(n^o>>>19,2716044179),t^=n^r^o,n^=t,r^=t,o^=t,[t>>>0,n>>>0,r>>>0,o>>>0]},AsyncLock:class extends mo{#d=!1;#u=[];get locked(){return this.#d}then(e){"function"==typeof e&&(this.#d?this.#u.push(e):e())}lock(){this.#d=!0}unlock(){const e=this.#u;for(const t of e)t();e.length=0,this.#d=!1}},ReadStream:bo,WriteStream:yo,EventEmitter:class extends mo{#h=Object.create(null);on(e,t){const n=this.#h[e]||=[];for(const e of n)if(e.$===t)return void(e.m=!1);n.push({$:t,m:!1})}once(e,t){
const n=this.#h[e]||=[];for(const e of n)if(e.$===t)return void(e.m=!0);n.push({$:t,m:!0})}off(e,t){const n=this.#h;if(null!=e){const r=n[e];if(null!=r&&r.length>0){if(null!=t){for(let e=0;e<r.length;e++)if(r[e].$===t)return r.splice(e,1),!0;return!1}return delete n[e]}return!1}if(null!=t){let e=!1;for(const r of Reflect.ownKeys(n)){const o=n[r];if(null!=o)e:for(let n=0;n<o.length;n++)if(o[n].$===t){o.splice(n,1),e=!0;break e}}return e}let r=!1;for(const e of Object.keys(n))delete n[e]&&(r=!0)
;return r}emit(e,...t){const n=this.#h[e];if(null!=n){let e=!1;for(let r=0;r<n.length;r++){const o=n[r];e=!0,o.m&&n.splice(r--,1),Reflect.apply(o.$,this,t)}return e}return!1}getListeners(e){if(null!=e)return this.#h[e]?.map((e=>e.$))||[];const t=this.#h,n=new Set;for(const e of Reflect.ownKeys(t)){const r=t[e];if(null!=r)for(const e of r)n.add(e.$)}return Array.from(n)}},SecureRandom:class extends Jo{constructor(e){super("number"==typeof(e||=Xe())?e=[e]:e),this.setSeed(e)}#p=Array(256)
;#f=Array(256);#m=0;#g=0;#b=0;#y=0;#v(e,t){const n=(65535&e)+(65535&t);return(e>>>16)+(t>>>16)+(n>>>16)<<16|65535&n}#w(e){let t,n;for(e="number"==typeof e?Math.abs(Math.floor(e)):1;e--;){this.#b=this.#v(this.#b,1),this.#g=this.#v(this.#g,this.#b);for(let e=0;e<256;e++){switch(3&e){case 0:this.#m^=this.#m<<13;break;case 1:this.#m^=this.#m>>>6;break;case 2:this.#m^=this.#m<<2;break;case 3:this.#m^=this.#m>>>16}this.#m=this.#v(this.#p[e+128&255],this.#m),t=this.#p[e],
this.#p[e]=n=this.#v(this.#p[t>>>2&255],this.#v(this.#m,this.#g)),this.#f[e]=this.#g=this.#v(this.#p[n>>>10&255],t)}}}rand(){return this.#y--||(this.#w(),this.#y=255),(this.#f[this.#y]>>>0)/4294967296}reset(){this.#m=this.#g=this.#b=this.#y=0,this.#p.fill(0,0,256),this.#f.fill(0,0,256)}setSeed(e){let t,n,r,o,a,i,s,c;t=n=r=o=a=i=s=c=2654435769,"number"==typeof e&&(e=[e]),Array.isArray(e)||(e=[0]),this.reset();const l=this.#f,d=this.#p
;for(let t=0;t<e.length;t++)l[255&t]+="number"==typeof e[t]?e[t]:0;const u=()=>{t^=n<<11,o=this.#v(o,t),n=this.#v(n,r),n^=r>>>2,a=this.#v(a,n),r=this.#v(r,o),r^=o<<8,i=this.#v(i,r),o=this.#v(o,a),o^=a>>>16,s=this.#v(s,o),a=this.#v(a,i),a^=i<<10,c=this.#v(c,a),i=this.#v(i,s),i^=s>>>4,t=this.#v(t,i),s=this.#v(s,c),s^=c<<8,n=this.#v(n,s),c=this.#v(c,t),c^=t>>>9,r=this.#v(r,c),t=this.#v(t,n)};for(let e=0;e<4;e++)u();for(let e=0;e<256;e+=8)t=this.#v(t,l[e+0]),n=this.#v(n,l[e+1]),r=this.#v(r,l[e+2]),
o=this.#v(o,l[e+3]),a=this.#v(a,l[e+4]),i=this.#v(i,l[e+5]),s=this.#v(s,l[e+6]),c=this.#v(c,l[e+7]),u(),d[e+0]=t,d[e+1]=n,d[e+2]=r,d[e+3]=o,d[e+4]=a,d[e+5]=i,d[e+6]=s,d[e+7]=c;for(let e=0;e<256;e+=8)t=this.#v(t,d[e+0]),n=this.#v(n,d[e+1]),r=this.#v(r,d[e+2]),o=this.#v(o,d[e+3]),a=this.#v(a,d[e+4]),i=this.#v(i,d[e+5]),s=this.#v(s,d[e+6]),c=this.#v(c,d[e+7]),u(),d[e+0]=t,d[e+1]=n,d[e+2]=r,d[e+3]=o,d[e+4]=a,d[e+5]=i,d[e+6]=s,d[e+7]=c;this.#w(),this.#y=256}},BufferReadStream:class extends bo{#k;#C
;constructor(e,t){super(),this.#k=t||0,this.#C=e}read(){return this.#C[this.#k++]}readBuf(e){const t=this.#C.subarray(this.#k,this.#k+=e.byteLength);return e.set(t,0),t.byteLength}readNBytes(e){return this.#C.subarray(this.#k,this.#k+=e)}setIndex(e){this.#k=e}setBuffer(e){this.#C=e}get closed(){return!1}close(){}},BufferWriteStream:class extends yo{#E=[];#x=0;write(e){"number"==typeof e?(this.#E.push(e),this.#x++):(this.#E.push(e),this.#x+=e.byteLength)}toBuffer(){const e=new Uint8Array(this.#x)
;let t=0;for(const n of this.#E)"number"!=typeof n?(e.set(n,t),t+=n.byteLength):e[t++]=n;return e}get closed(){return!1}flush(){}close(){}}};Object.setPrototypeOf(ta,null),Object.defineProperty(ta,"NettleWeb",{value:ta,writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(ta,Symbol.toStringTag,{value:"NettleWeb",writable:!1,enumerable:!1,configurable:!1})
;const na=Object.freeze(ta),ra="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof global?global:"object"==typeof self?self:Function("return this;")();if(null==ra||"object"!=typeof ra)throw Error("Failed to resolve global object");"NettleWeb"in ra||Object.defineProperty(ra,"NettleWeb",{value:na,writable:!1,enumerable:!1,configurable:!1});const oa=na,aa=[.2,3/8,5/9,2/3],ia=(e,t)=>n=>{
const r=4*e+n-4,o="*-04-39?2$%%$%%'$%''%'''%')(%'))%(++'(++'(+.'+-.',/3',33)-/5)-43).36)058*18<+37<+4:<,4:E,5<A-7>C/8@F/:EH/<EK0=FM1?IP2@KS3BNV4DPY5FS\\6HV_6IXb7K[e8N^i9Pam;Rdp<Tgt".charCodeAt(r)-35,a=r>8?o:1,i=t/a|0,s=t%a,c=a-s,l=r>8?i*aa[n]+(e>5)&-2:o,d=i-l;return{t:8*(c*d+s*(d+1)),o:s?[[c,d],[s,d+1]]:[[c,d]],i:l}},sa=0,ca=3,la=e=>new Uint8Array(e),da=e=>{const t=Error("lean-qr error "+e);throw t.code=e,t
},ua=e=>"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:".indexOf(e),ha=e=>e.charCodeAt(0),pa=(...e)=>(t,n)=>e.forEach((e=>e(t,n))),fa=e=>t=>{t.eci!==e&&(t.push(7,4),t.push(e,8),t.eci=e)},ma=e=>(t,n)=>{t.push(4,4),t.push(e.length,8+8*(n>9)),e.forEach((e=>t.push(e,8)))},ga=(e,t,n,r,o=(e,t)=>n(e.length,t),a=(r?t=>pa(fa(r),e(t)):e))=>(a.test=t,a.l=n,a.est=o,a.eci=r&&[r],a),ba=ga((e=>(t,n)=>{t.push(1,4),t.push(e.length,10+2*(n>26)+2*(n>9));let r=0;for(;r<e.length-2;r+=3)t.push(+e.slice(r,r+3),10)
;r<e.length-1?t.push(+e.slice(r,r+2),7):r<e.length&&t.push(+e[r],4)}),/./.test.bind(/[0-9]/),((e,t)=>14+2*(t>26)+2*(t>9)+10*e/3)),ya=ga((e=>(t,n)=>{t.push(2,4),t.push(e.length,9+2*(n>26)+2*(n>9));let r=0;for(;r<e.length-1;r+=2)t.push(45*ua(e[r])+ua(e[r+1]),11);r<e.length&&t.push(ua(e[r]),6)}),(e=>ua(e)>=0),((e,t)=>13+2*(t>26)+2*(t>9)+5.5*e)),va=ga((e=>ma([...e].map(ha))),(e=>ha(e)<128),((e,t)=>12+8*(t>9)+8*e));va.u=!0;const wa=ga(va,(e=>ha(e)<256),va.l,3);wa.u=!0
;const ka=new TextEncoder,Ca=ga((e=>ma(ka.encode(e))),(()=>1),0,26,((e,t)=>12+8*(t>9)+8*ka.encode(e).length));Ca.u=!0;let Ea=()=>{const e=new Map,t=new TextDecoder("sjis"),n=la(2);for(let r=0;r<7973;++r)n[0]=r/192+129+64*(r>5951),n[1]=r%192+64,e.set(t.decode(n),r);return e.delete("\ufffd"),Ea=()=>e,e};const xa=ga((e=>(t,n)=>{t.push(8,4),t.push(e.length,8+2*(n>26)+2*(n>9));for(const n of e)t.push(Ea().get(n),13)}),(e=>Ea().has(e)),((e,t)=>12+2*(t>26)+2*(t>9)+13*e));xa.u=!0
;const Ta=[ba,ya,va,wa,xa,Ca],Aa=(e,{modes:t=Ta}={})=>(n,r)=>{let o=1;for(const n of t){const t=new Map;n._=o<<=1,n.m=n.est("",r),n.h=n.l?(e,o)=>{const a=o-e,i=t.get(a)??n.l(a,r);return t.set(a,i),i}:(o,a)=>{const i=e.slice(o,a),s=t.get(i)??n.est(i,r);return t.set(i,s),s}}let a=[{S:0}],i=0,s=0,c=-1;for(const n of[...e,""]){let e=0;if(n)for(const r of t)r.test(n)&&(e|=r._);if(!n||e!==c){if(-1!==c){const e=new Set(a.map((e=>e.v))),n=[];for(const r of t.filter((e=>c&e._))){const t=r.h(i,s)
;for(const o of r.eci??e){if(r===va&&o)continue;let e;for(const n of a)if(n.v===o||r.eci){const a=n.C===r&&n.v===o,c=a?n.D:n,l=a?n.V:i;let d;d=r.u&&a?n.S+t-r.m:c.S+12*(c.v!==o)+(l===i?t:r.h(l,s)),(!e||d<e.S)&&(e={V:l,D:c,C:r,v:o,$:s,S:d})}e&&n.push(e)}}n.length||da(5),a=n}c=e,i=s}s+=n.length}const l=[];for(let t=a.reduce(((e,t)=>t.S<e.S?t:e));t.C;t=t.D)l.unshift(t.C(e.slice(t.V,t.$)));l.forEach((e=>e(n,r)))},Ia=()=>({A:la(2956),F:0,push(e,t){for(let n=t,r=8-(7&this.F);n>0;n-=r,
r=8)this.A[this.F>>3]|=e<<r>>n,this.F+=n<r?n:r}}),La=(e,t=e*e,n=la(t))=>({size:e,I:n,get:(t,r)=>t>=0&&t<e&&!!(1&n[r*e+t]),K(t,r,o){n[r*e+t]=o},toString({on:t="##",off:n="  ",lf:r="\n",padX:o=4,padY:a=4}={}){let i="";for(let s=-a;s<e+a;++s){for(let r=-o;r<e+o;++r)i+=this.get(r,s)?t:n;i+=r}return i},toImageData(t,{on:n=[0,0,0],off:r=[0,0,0,0],padX:o=4,padY:a=4}={}){const i=e+2*o,s=e+2*a,c=t.createImageData(i,s),l=new Uint32Array(c.data.buffer);c.data.set([...n,255]);const d=l[0]
;c.data.set([...r,255]);const u=l[0];for(let e=0;e<s;++e)for(let t=0;t<i;++t)l[e*i+t]=this.get(t-o,e-a)?d:u;return c},toCanvas(e,t){const n=e.getContext("2d"),r=this.toImageData(n,t);e.width=r.width,e.height=r.height,n.putImageData(r,0,0)},toDataURL({type:e="image/png",scale:t=1,...n}={}){const r=document.createElement("canvas"),o=r.getContext("2d"),a=this.toImageData(o,n);return r.width=a.width*t,r.height=a.height*t,o.putImageData(a,0,0),o.imageSmoothingEnabled=!1,
o.globalCompositeOperation="copy",o.drawImage(r,0,0,a.width,a.height,0,0,r.width,r.height),r.toDataURL(e,1)}}),Sa=[(e,t)=>!(1&(e^t)),(e,t)=>!(1&t),e=>!(e%3),(e,t)=>!((e+t)%3),(e,t)=>!(1&(e/3^t>>1)),(e,t)=>!((e&t&1)+e*t%3),(e,t)=>!((e&t&1)+e*t%3&1),(e,t)=>!((1&(e^t))+e*t%3&1)],ja=la(512);ja[0]=1;for(let e=0,t=1;e<255;ja[++e]=t)ja[t+256]=e,t*=2,256&t&&(t^=285);const Ma=e=>ja[e%255],_a=e=>ja[e+256],Oa=(e,t)=>{const n=la(e.length+t.length-1)
;for(let r=0;r<e.length;++r)for(let o=0;o<t.length;++o)n[r+o]^=Ma(e[r]+t[o]);return n.map(_a)},Da=(e,t)=>{const n=la(e.length+t.length-1);n.set(e,0);for(let r=0;r<e.length;++r)if(n[r]){const e=_a(n[r]);for(let o=0;o<t.length;++o)n[r+o]^=Ma(t[o]+e)}return n.slice(e.length)},Pa=[[0],[0,0]];for(let e=1,t=Pa[1];e<30;++e){const n=Oa(t,[0,e]);Pa.push(n),t=n}const Fa=(e,t)=>{const n=[[],[]];let r=0,o=0;for(const[a,i]of t.o)for(let s=0;s<a;++s,r+=i){const a=e.slice(r,r+i);n[0].push(a),
n[1].push(Da(a,Pa[t.i])),o+=i+t.i}const a=la(o);let i=0;for(const e of n)for(let t,n=0;i!==t;++n){t=i;for(const t of e)n<t.length&&(a[i++]=t[n])}return a},Na=(e,t,n)=>{let r=e<<n-1;for(let e=134217728;e;e>>=1)r&e&&(r^=t*(e>>n-1));return r},Ha=({size:e,I:t,K:n},r)=>{const o=(n,r,o,a,i)=>{for(;a-- >0;){const s=(r+a)*e+n;t.fill(i,s,s+o)}},a=(e,t)=>{o(e-3,t-3,7,7,3),o(e-2,t-2,5,5,2),o(e-1,t-1,3,3,3)},i=(e,t)=>{o(e-2,t-2,5,5,3),o(e-1,t-1,3,3,2),n(e,t,3)};o(7,0,2,9,2),o(e-8,0,8,9,2)
;for(let t=0;t<e;++t)n(t,6,3^1&t);if(a(3,3),a(e-4,3),r>1){const t=1+(r/7|0),n=2*((e-13)/t/2+.75|0);for(let r=0;r<t;++r){const o=e-7-r*n;r&&i(o,6);for(let r=0;r<t;++r)i(o,e-7-r*n)}}if(r>6)for(let t=r<<12|Na(r,7973,13),o=0;o<6;++o)for(let r=12;r-- >9;t>>=1)n(e-r,o,2|1&t);for(let n=0;n<e;++n)for(let r=n;r<e;++r)t[r*e+n]=t[n*e+r];n(8,e-8,3)},Ua=({size:e,I:t})=>{const n=[];for(let r=e-2,o=e,a=-1;r>=0;r-=2){for(5===r&&(r=4);o+=a,-1!==o&&o!==e;){const a=o*e+r;t[a+1]<2&&n.push(a+1),t[a]<2&&n.push(a)}
a*=-1}return n},Ba=({I:e},t,n)=>t.forEach(((t,r)=>e[t]=n[r>>3]>>7-(7&r)&1)),Ra=({size:e,I:t,K:n},r,o,a)=>{for(let n=0;n<e;++n)for(let o=0;o<e;++o){const a=n*e+o;t[a]^=r(o,n)&(t[a]>>1^1)}const i=(1^a)<<3|o;let s=21522^(i<<10|Na(i,1335,11));for(let t=8;t-- >0;s>>=1)n(8,(t>1?7:8)-t,s),n(e-8+t,8,s);for(let t=7;t-- >0;s>>=1)n(t>5?7:t,8,s),n(8,e-t-1,s)},za=({size:e,I:t},n=0,r=0)=>{for(let o=0;o<e;++o){for(let a=0;a<2;++a)for(let i,s=0,c=0,l=0;s<e;++s){const d=1&t[a?o*e+s:s*e+o];r+=d,
c=(c>>1|2098176)&(3047517^d-1),2049&c&&(n+=40),d!==i?(l=1,i=d):++l>4&&(n+=l<6?3:1)}if(o)for(let r=1,a=1&t[o-1],i=(1&t[o])===a;r<e;++r){const s=1&t[r*e+o-1],c=(1&t[r*e+o])===s;n+=3*(i&&c&&a===s),a=s,i=c}}return n+10*(20*Math.abs(r/(e*e*2)-.5)|0)},Wa=[],qa=(e=da(1),{minCorrectionLevel:t=sa,maxCorrectionLevel:n=ca,minVersion:r=1,maxVersion:o=40,mask:a,trailer:i=60433,...s}={})=>{n<t&&da(3),o<r&&da(2),"string"==typeof e&&(e=Aa(e,s));for(let s=r,c=0;s<=o;++s){let r=Wa[s];r||(Wa[s]=r=La(4*s+17),
Ha(r,s),r.p=Ua(r));const o=ia(s,r.p.length>>3);if(o(t).t<c)continue;const l=Ia();e(l,s),c=l.F;for(let e=n;e>=t;--e){const t=o(e);if(t.t<c)continue;for(l.push(0,4),l.F=l.F+7&-8;l.F<t.t;)l.push(i,16);const n=La(r.size,r.I);return Ba(n,r.p,Fa(l.A,t)),(Sa[a??-1]?[Sa[a]]:Sa).map(((t,r)=>{const o=La(n.size,n.I);return Ra(o,t,a??r,e),o.s=za(o),o})).reduce(((e,t)=>t.s<e.s?t:e))}}da(4)};qa.with=(...e)=>(t,n)=>qa(t,{modes:[...Ta,...e],...n})
;var Va=Uint8Array,Ga=Uint16Array,Ja=Int32Array,Ya=new Va([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ka=new Va([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Xa=new Va([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Qa=function(e,t){for(var n=new Ga(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var o=new Ja(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)o[a]=a-n[r]<<5|r;return{b:n,r:o}},Za=Qa(Ya,2),$a=Za.b,ei=Za.r;$a[28]=258,ei[258]=28
;for(var ti=Qa(Ka,0),ni=ti.b,ri=(ti.r,new Ga(32768)),oi=0;oi<32768;++oi){var ai=(43690&oi)>>1|(21845&oi)<<1;ai=(61680&(ai=(52428&ai)>>2|(13107&ai)<<2))>>4|(3855&ai)<<4,ri[oi]=((65280&ai)>>8|(255&ai)<<8)>>1}var ii=function(e,t,n){for(var r=e.length,o=0,a=new Ga(t);o<r;++o)e[o]&&++a[e[o]-1];var i,s=new Ga(t);for(o=1;o<t;++o)s[o]=s[o-1]+a[o-1]<<1;if(n){i=new Ga(1<<t);var c=15-t;for(o=0;o<r;++o)if(e[o])for(var l=o<<4|e[o],d=t-e[o],u=s[e[o]-1]++<<d,h=u|(1<<d)-1;u<=h;++u)i[ri[u]>>c]=l
}else for(i=new Ga(r),o=0;o<r;++o)e[o]&&(i[o]=ri[s[e[o]-1]++]>>15-e[o]);return i},si=new Va(288);for(oi=0;oi<144;++oi)si[oi]=8;for(oi=144;oi<256;++oi)si[oi]=9;for(oi=256;oi<280;++oi)si[oi]=7;for(oi=280;oi<288;++oi)si[oi]=8;var ci=new Va(32);for(oi=0;oi<32;++oi)ci[oi]=5;var li=ii(si,9,1),di=ii(ci,5,1),ui=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},hi=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},pi=function(e,t){var n=t/8|0
;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},fi=function(e){return(e+7)/8|0},mi=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new Va(e.subarray(t,n))},gi=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],bi=function(e,t,n){var r=Error(t||gi[e])
;if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,bi),!n)throw r;return r},yi=function(e,t,n,r){var o=e.length,a=r?r.length:0;if(!o||t.f&&!t.l)return n||new Va(0);var i=!n,s=i||2!=t.i,c=t.i;i&&(n=new Va(3*o));var l=function(e){var t=n.length;if(e>t){var r=new Va(Math.max(2*t,e));r.set(n),n=r}},d=t.f||0,u=t.p||0,h=t.b||0,p=t.l,f=t.d,m=t.m,g=t.n,b=8*o;do{if(!p){d=hi(e,u,1);var y=hi(e,u+1,3);if(u+=3,!y){var v=e[(j=fi(u)+4)-4]|e[j-3]<<8,w=j+v;if(w>o){c&&bi(0);break}s&&l(h+v),
n.set(e.subarray(j,w),h),t.b=h+=v,t.p=u=8*w,t.f=d;continue}if(1==y)p=li,f=di,m=9,g=5;else if(2==y){var k=hi(e,u,31)+257,C=hi(e,u+10,15)+4,E=k+hi(e,u+5,31)+1;u+=14;for(var x=new Va(E),T=new Va(19),A=0;A<C;++A)T[Xa[A]]=hi(e,u+3*A,7);u+=3*C;var I=ui(T),L=(1<<I)-1,S=ii(T,I,1);for(A=0;A<E;){var j,M=S[hi(e,u,L)];if(u+=15&M,(j=M>>4)<16)x[A++]=j;else{var _=0,O=0;for(16==j?(O=3+hi(e,u,3),u+=2,_=x[A-1]):17==j?(O=3+hi(e,u,7),u+=3):18==j&&(O=11+hi(e,u,127),u+=7);O--;)x[A++]=_}}
var D=x.subarray(0,k),P=x.subarray(k);m=ui(D),g=ui(P),p=ii(D,m,1),f=ii(P,g,1)}else bi(1);if(u>b){c&&bi(0);break}}s&&l(h+131072);for(var F=(1<<m)-1,N=(1<<g)-1,H=u;;H=u){var U=(_=p[pi(e,u)&F])>>4;if((u+=15&_)>b){c&&bi(0);break}if(_||bi(2),U<256)n[h++]=U;else{if(256==U){H=u,p=null;break}var B=U-254;if(U>264){var R=Ya[A=U-257];B=hi(e,u,(1<<R)-1)+$a[A],u+=R}var z=f[pi(e,u)&N],W=z>>4;if(z||bi(3),u+=15&z,P=ni[W],W>3&&(R=Ka[W],P+=pi(e,u)&(1<<R)-1,u+=R),u>b){c&&bi(0);break}s&&l(h+131072);var q=h+B
;if(h<P){var V=a-P,G=Math.min(P,q);for(V+h<0&&bi(3);h<G;++h)n[h]=r[V+h]}for(;h<q;++h)n[h]=n[h-P]}}t.l=p,t.p=H,t.b=h,t.f=d,p&&(d=1,t.m=m,t.d=f,t.n=g)}while(!d);return h!=n.length&&i?mi(n,0,h):n.subarray(0,h)},vi=new Va(0),wi="undefined"!=typeof TextDecoder&&new TextDecoder;try{wi.decode(vi,{stream:!0})}catch(e){}"function"==typeof queueMicrotask&&queueMicrotask
;const ki=Object.freeze(oa.NTON.decode(Qe(oa.Base64.decode("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"))))
;let Ci="whitespider";const{p:Ei,s:xi,y:Ti,e:Ai}=ki.x;Ei&&xi&&Ti&&(Ci=xi+Ai+"3.sha"+Ti+Ei+"/",Ci.length<10&&(Ci=""));const Ii=Ci;let Li;const Si=Object.freeze(Object.setPrototypeOf({_:({console:e})=>{if(null==e||"object"!=typeof e)throw Error("Invalid interface");const t=Reflect.get(e,"log",void 0);if("function"!=typeof t)throw Error("Invalid instance impl");Li=(...e)=>(Reflect.apply(t,null,e),!0)},get $(){return Li}},null)),ji=Si,Mi=Object.freeze(Object.setPrototypeOf({length:0,clear:()=>{},
setItem:()=>{},getItem:()=>null,removeItem:()=>{}},null)),_i=Object.create(null);_i.open="0",_i.close="1",_i.ping="2",_i.pong="3",_i.message="4",_i.upgrade="5",_i.noop="6";const Oi=Object.create(null);Object.keys(_i).forEach((e=>{Oi[_i[e]]=e}));const Di={type:"error",data:"parser error"
},Pi="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Fi="function"==typeof ArrayBuffer,Ni=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Hi=({type:e,data:t},n,r)=>Pi&&t instanceof Blob?n?r(t):Ui(t,r):Fi&&(t instanceof ArrayBuffer||Ni(t))?n?r(t):Ui(new Blob([t]),r):r(_i[e]+(t||"")),Ui=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1]
;t("b"+(e||""))},n.readAsDataURL(e)};let Bi;const Ri="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zi="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<64;e++)zi[Ri.charCodeAt(e)]=e;const Wi="function"==typeof ArrayBuffer,qi=(e,t)=>{if("string"!=typeof e)return{type:"message",data:Gi(e,t)};const n=e.charAt(0);return"b"===n?{type:"message",data:Vi(e.substring(1),t)}:Oi[n]?e.length>1?{type:Oi[n],data:e.substring(1)}:{type:Oi[n]}:Di},Vi=(e,t)=>{if(Wi){
const n=(e=>{let t,n,r,o,a,i=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);const l=new ArrayBuffer(i),d=new Uint8Array(l);for(t=0;t<s;t+=4)n=zi[e.charCodeAt(t)],r=zi[e.charCodeAt(t+1)],o=zi[e.charCodeAt(t+2)],a=zi[e.charCodeAt(t+3)],d[c++]=n<<2|r>>4,d[c++]=(15&r)<<4|o>>2,d[c++]=(3&o)<<6|63&a;return l})(e);return Gi(n,t)}return{base64:!0,data:e}},Gi=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer;let Ji
;nt.prototype.on=nt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},nt.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},nt.prototype.off=nt.prototype.removeListener=nt.prototype.removeAllListeners=nt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this
;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},nt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t)}return this
},nt.prototype.emitReserved=nt.prototype.emit,nt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},nt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Yi="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Ki="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),Xi=Ki.setTimeout,Qi=Ki.clearTimeout;class Zi extends Error{
constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class $i extends nt{constructor(e){super(),this.writable=!1,ot(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new Zi(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){
"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=qi(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){
return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class es extends $i{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{
this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split("\x1e"),r=[];for(let e=0;e<n.length;e++){const o=qi(n[e],t);if(r.push(o),"error"===o.type)break}return r})(e,this.socket.binaryType).forEach((e=>{
if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=Array(n);let o=0;e.forEach(((e,a)=>{Hi(e,!1,(e=>{
r[a]=e,++o===n&&t(r.join("\x1e"))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=at()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let ts=!1;try{ts="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(bi){}const ns=ts;class rs extends es{constructor(e){if(super(e),
"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class os extends nt{
constructor(e,t,n){super(),this.createRequest=e,ot(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=rt(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0)
;for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(e){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),
n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"==typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(e){return void this.setTimeoutFn((()=>{this._onError(e)}),0)}"undefined"!=typeof document&&(this._index=os.requestsCount++,os.requests[this._index]=this)}_onError(e){
this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=it,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete os.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}os.requestsCount=0,os.requests={},
"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",st):"function"==typeof addEventListener&&addEventListener("onpagehide"in Ki?"pagehide":"unload",st,!1));const as=function(){const e=ct({xdomain:!1});return e&&null!==e.responseType}(),is="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class ss extends $i{get name(){return"websocket"}doOpen(){
const e=this.uri(),t=this.opts.protocols,n=is?{}:rt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{
this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;Hi(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(e){}r&&Yi((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){
void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=at()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const cs=Ki.WebSocket||Ki.MozWebSocket,ls={websocket:class extends ss{createSocket(e,t,n){return is?new cs(e,t,n):t?new cs(e,t):new cs(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends $i{get name(){return"webtransport"}doOpen(){try{
this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=function(e,t){Ji||(Ji=new TextDecoder);const n=[];let r=0,o=-1,a=!1;return new TransformStream({transform(i,s){for(n.push(i);;){if(0===r){if(et(n)<1)break
;const e=tt(n,1);a=!(128&~e[0]),o=127&e[0],r=o<126?3:126===o?1:2}else if(1===r){if(et(n)<2)break;const e=tt(n,2);o=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(et(n)<8)break;const e=tt(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),a=t.getUint32(0);if(a>2097151){s.enqueue(Di);break}o=4294967296*a+t.getUint32(4),r=3}else{if(et(n)<o)break;const e=tt(n,o);s.enqueue(qi(a?e:Ji.decode(e),t)),r=0}if(0===o||o>e){s.enqueue(Di);break}}}})
}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=$e();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const o=()=>{n.read().then((({done:e,value:t})=>{e||(this.onPacket(t),o())})).catch((()=>{}))};o();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1
;this._writer.write(n).then((()=>{r&&Yi((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends rs{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=as&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new os(ct,this.uri(),e)}}
},ds=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,us=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],hs="function"==typeof addEventListener&&"function"==typeof removeEventListener,ps=[]
;hs&&addEventListener("offline",(()=>{ps.forEach((e=>e()))}),!1);class fs extends nt{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const n=lt(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=lt(t.host).host);ot(this,t),
this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),
this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let e=0,r=n.length;e<r;e++){let r=n[e].split("=")
;t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}(this.opts.query)),hs&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ps.push(this._offlineEventListener))),
this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0)
;const e=this.opts.rememberUpgrade&&fs.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){
this.readyState="open",fs.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":
const t=Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer)
;const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){
const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(e+="string"==typeof(t=r)?function(e){let t=0,n=0;for(let r=0,o=e.length;r<o;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n
}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Yi((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,
t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const o={type:e,data:t,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)}
;return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(fs.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){
if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),hs&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=ps.indexOf(this._offlineEventListener);-1!==e&&ps.splice(e,1)}this.readyState="closed",this.id=null,
this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}fs.protocol=4;class ms extends fs{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){function t(){i||(i=!0,l(),a.close(),a=null)}function n(){c("transport closed")}function r(){c("socket closed")}function o(e){a&&e.name!==a.name&&t()}let a=this.createTransport(e),i=!1
;fs.priorWebsocketSuccess=!1;const s=()=>{i||(a.send([{type:"ping",data:"probe"}]),a.once("packet",(e=>{if(!i)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",a),!a)return;fs.priorWebsocketSuccess="websocket"===a.name,this.transport.pause((()=>{i||"closed"!==this.readyState&&(l(),this.setTransport(a),a.send([{type:"upgrade"}]),this.emitReserved("upgrade",a),a=null,this.upgrading=!1,this.flush())}))}else{const e=Error("probe error");e.transport=a.name,
this.emitReserved("upgradeError",e)}})))},c=e=>{const n=Error("probe error: "+e);n.transport=a.name,t(),this.emitReserved("upgradeError",n)},l=()=>{a.removeListener("open",s),a.removeListener("error",c),a.removeListener("close",n),this.off("close",r),this.off("upgrading",o)};a.once("open",s),a.once("error",c),a.once("close",n),this.once("close",r),this.once("upgrading",o),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{i||a.open()}),200):a.open()}
onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class gs extends ms{constructor(e,t={}){const n="object"==typeof e?e:t;(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map((e=>ls[e])).filter((e=>!!e))),super(e,n)}}(async({window:e,document:t})=>{function n(e){
const n=t.getElementById(e);if(null==n)throw Error("Element does not exist: "+e);return n}function r(e){const n=t.querySelector(e);if(n instanceof HTMLElement)return n;throw Error("Failed to query selector: "+e)}function o(e){null!=e?(j.textContent=e,j.style.display="block"):j.style.display="none"}function a(e){try{return new URL(e)}catch(e){return null}}function i(e){for(let t=e.length-1;t>=0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function s(e){
return"https://"+ki.b+"/"+ki.c+"?OO0O0OO0="+encodeURIComponent(oa.Base64.encode(oa.UTF_8.encode(e)))}function c(e){return new Date(e).toLocaleString("POSIX",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}async function l(t,n){try{const r=await e.fetch(t,{cache:n||"force-cache",method:"GET"});return r.ok?await r.text():null}catch(e){return null}}async function d(e,t,n){try{const r=new Image(512,512);r.loading="eager",r.decoding="sync",
r.draggable=!1;{const t=URL.createObjectURL(e);r.src=t,await r.decode(),URL.revokeObjectURL(t)}let o=r.naturalWidth,a=r.naturalHeight;{const e=null==n?a/o:n/t;a>=o*e?a=Math.floor(o*e):o=Math.floor(a/e)}if((t=Math.min(t,o))<10||(n=null==n?a:Math.min(n,a))<10)throw Error("Image must have at least 100 pixels.");const i=new OffscreenCanvas(t,n),s=i.getContext("2d",{alpha:!1});if(null==s)throw Error("Failed to initialize canvas context.");return s.imageSmoothingEnabled=!0,
s.imageSmoothingQuality="high",s.drawImage(r,0,0,o,a,0,0,t,n),await i.convertToBlob({type:"image/jpeg",quality:100})}catch(e){return null}}async function u(t){let n=0,r=0;const o=[];for(const e of t.split(",")){const t=e.split(";",3);if(3!==t.length)throw Error("Invalid entry value");const n=parseInt(t[1],10),a=parseInt(t[2],10),i=a-n;if(n<0||a<0||i<=0)throw Error("Invalid entry data length");r+=i,o.push({id:t[0],s:n,e:a,l:i})}const a=new Uint8Array(new ArrayBuffer(r),0,r)
;for(const{id:t,s:r,e:i,l:s}of o){const o=await e.fetch("/r/"+t,{cache:"force-cache",method:"GET",headers:{Range:"bytes="+r+"-"+(i-1)}});if(!o.ok)throw Error("Failed to fetch resources: Remote returned error status code: "+o.status);206===o.status&&o.headers.has("content-range")?a.set(new Uint8Array(await o.arrayBuffer(),0,s),n):a.set(new Uint8Array(await o.arrayBuffer(),r,s),n),n+=s}return a.buffer}function h(e,t){return new Promise(((n,r)=>{
const o=new ArrayBuffer((t=oa.NTON.encode(t)).byteLength+10),a=performance.now();{const n=new Uint8Array(o);n[0]=3,n[9]=e,n.set(t,10)}new DataView(o,1,8).setFloat64(0,a,!0),Y.send(o,{compress:!0}),W.set(a,[n,r])}))}function p(e){M.appendChild(y(e)),_.style.display="block"}function m(n,r){const o=performance.now().toString(36),a=t.createElement("embed");a.src="/player.html?s="+o,a.type="text/html",a.width="1024",a.height="768";const i=t=>{if(t.origin===e.origin&&t.data===o){const o=t.source
;null!=o&&o.postMessage({id:n,buf:r},{targetOrigin:origin,transfer:Array.isArray(r)?[]:[r]}),e.removeEventListener("message",i)}};return e.addEventListener("message",i,{passive:!0}),a}function g(e){const{name:n,prev:r,date:a}=e,i=t.createElement("a");i.href=a>0?"/"+a.toString(36):"#",i.title="Play "+n,i.target="_self",i.className="game",i.onclick=t=>{t.ctrlKey||(t.preventDefault(),t.stopPropagation(),re(e).catch((e=>{S(e),o("Failed to launch game. Message: "+e)})))},
i.style.backgroundImage=null!=r?'url("'+r+'"), url("/res/preview.svg")':'url("/d/'+encodeURIComponent(n.replace(/\//g,""))+'.jpg"), url("/res/preview.svg")';{const e=t.createElement("div");e.textContent=n,i.appendChild(e)}if(e.path.startsWith("https://")){const e=t.createElement("img");e.src="/res/cloud.svg",e.alt="Cloud",e.title="Embedded from third-party servers",e.width=24,e.height=24,e.loading="lazy",e.decoding="async",e.draggable=!1,i.appendChild(e)}switch(e.type){case"html5":{
const e=t.createElement("span");e.textContent="HTML5",e.style.background="#c04000",i.appendChild(e)}break;case"flash":{const e=t.createElement("span");e.textContent="Flash",e.style.background="#008000",i.appendChild(e)}break;case"dos":{const e=t.createElement("span");e.textContent="Dos",e.style.background="#0000ff",i.appendChild(e)}break;default:i.style.backgroundImage='url("/res/preview.svg")'}return i}function b(e){const n=t.createElement("div");n.className="item",n.onclick=()=>{
ne(e).catch((e=>{o("Failed to open the item. Message: "+e)}))},n.style.backgroundImage='url("'+s(e.prev[0])+'"), url("/res/preview.svg")';{const r=t.createElement("div");r.textContent=e.name,n.appendChild(r)}{const r=t.createElement("span");r.textContent="$"+e.price.toFixed(2),n.appendChild(r)}return n}function y(e){if(e.startsWith("https://")){const r=t.createElement("iframe");r.setAttribute("name","Frame"),r.setAttribute("width","1024"),r.setAttribute("height","768"),
r.setAttribute("loading","lazy"),r.setAttribute("sandbox","allow-forms allow-popups allow-scripts allow-same-origin allow-pointer-lock"),r.setAttribute("scrolling","no"),r.setAttribute("frameborder","0"),r.setAttribute("credentialless","true"),r.setAttribute("referrerpolicy","no-referrer"),r.setAttribute("allowfullscreen","true"),r.setAttribute("allowpaymentrequest","true");{
const t="data:application/xhtml+xml;base64,"+oa.Base64.encode(oa.UTF_8.encode(`<?xml version="1.0" encoding="utf-8" ?>\n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" lang="en">\n\t<head>\n\t\t<meta charset="utf-8" />\n\t\t<meta name="referrer" content="no-referrer" />\n\t\t<meta name="viewport" content="width=device-width,initial-scale=1" />\n\t\t<base href="${origin}" target="_blank" />\n\t\t<link rel="icon" type="image/x-icon" href="res/google.ico" />\n\t\t<link rel="stylesheet" type="text/css" href="data:text/css;base64,Ym9keSxlbWJlZCxpZnJhbWV7cG9zaXRpb246YWJzb2x1dGU7ZGlzcGxheTpibG9jazt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO21hcmdpbjowcHg7cGFkZGluZzowcHg7Ym9yZGVyOm5vbmU7b3ZlcmZsb3c6aGlkZGVuO30K" />\n\t\t<title>Google</title>\n\t</head>\n\t<body>\n\t\t<embed type="text/plain" width="1024" height="768" src="${n=e,
n.replace(/[&<"']/g,(e=>{switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return""}}))}" />\n\t</body>\n</html>`));r.addEventListener("load",(()=>{const e=r.contentWindow;null!=e?(e.stop(),e.focus(),e.location.replace(t)):r.setAttribute("src",t)}),{once:!0,passive:!0}),z.set(r,e)}return r}{const n=t.createElement("embed");return n.setAttribute("type","text/plain"),n.setAttribute("width","1024"),n.setAttribute("height","768"),
n.setAttribute("src",e),n}var n}function v(){ce=null,Q||(t.title="NettleWeb"),x.replaceState(void 0,"","/")}function w(t){const n=e.open(void 0,"_blank","");null!=n?(n.stop(),n.focus(),setTimeout((()=>{n.location.replace(t)}),100)):o("Please allow popups in your browser settings and try again.")}function k(t){const n=e.open(void 0,"_blank","");if(null==n)return void o("Please allow popups in your browser settings and try again.");n.focus();const r=n.document
;r.head.innerHTML='<meta charset="utf-8" /><meta name="referrer" content="no-referrer"/><meta name="viewport" content="width=device-width,initial-scale=1"/><base href="'+e.origin+'" target="_blank" /><link rel="icon" type="image/x-icon" href="res/google.ico" /><link rel="stylesheet" type="text/css" href="data:text/css;base64,Ym9keSxlbWJlZCxpZnJhbWV7cG9zaXRpb246YWJzb2x1dGU7ZGlzcGxheTpibG9jazt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO21hcmdpbjowcHg7cGFkZGluZzowcHg7Ym9yZGVyOm5vbmU7b3ZlcmZsb3c6aGlkZGVuO30K"/>',
r.body.appendChild(t),r.title="Google"}function C(){const e=t.createElement("iframe");e.setAttribute("id","anchor"),e.setAttribute("name","API Anchor"),e.setAttribute("width","1024"),e.setAttribute("height","768"),e.setAttribute("loading","lazy"),e.setAttribute("scrolling","no"),e.setAttribute("frameborder","0"),e.setAttribute("credentialless","true"),e.setAttribute("referrerpolicy","no-referrer"),e.setAttribute("allowfullscreen","true"),e.setAttribute("allowpaymentrequest","true"),
e.addEventListener("load",(()=>{const t=e.contentWindow;null!=t?(t.stop(),t.focus(),t.location.replace("https://nettleweb.com/?m=1")):e.setAttribute("src","https://nettleweb.com/?m=1")}),{once:!0,passive:!0}),L.appendChild(e)}"complete"!==t.readyState&&await new Promise((e=>{const n=()=>{"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),setTimeout(e,100,null))};t.addEventListener("readystatechange",n,{passive:!0})})),t.title="NettleWeb",ji._(e),e.focus(),
e.onerror=(e,t,n,r,o)=>{const a="Unhandled error at "+(t||"unknown source")+" "+(n||"X")+":"+(r||"X")+"\n\n Message: "+o;j.textContent=a,j.style.display="block"},e.onkeydown=e=>{if(e.ctrlKey&&!e.altKey&&!e.metaKey&&!e.shiftKey)switch(e.key){case"h":case"q":e.preventDefault(),e.stopPropagation(),E.replace("https://www.google.com/webhp?igu=1");break;case"b":e.preventDefault(),e.stopPropagation(),L.hasAttribute("style")?L.removeAttribute("style"):L.setAttribute("style","filter: blur(15px);")}},
e.onpopstate=e=>{e.preventDefault(),e.stopPropagation(),o("Notice: Please press ctrl+Q to leave this website.")},e.onappinstalled=e=>{e.preventDefault(),e.stopPropagation(),D.style.display="none"},e.onbeforeinstallprompt=e=>{e.preventDefault(),e.stopPropagation(),D.style.display="block",D.onclick=()=>{e.prompt().catch((e=>{o("Failed to show install prompt. Message: "+e)}))}}
;const E=e.location,x=e.history,T=E.pathname,A=new URLSearchParams(E.search),I=t.head,L=t.body,S=ji.$,j=n("error"),M=n("frame"),_=n("frame-view"),O=n("status"),D=n("install"),P=n("content"),F=n("accn-btn"),N=n("strm-btn"),H=n("comm-btn"),U=n("nmsg-btn"),B=n("side-menu");{const{_a:Ce,_b:Ee,_c:xe,_d:Te,_e:Ae,_f:Ie,_g:Le,_h:Se,_i:je,_j:Me,_k:_e,_l:Oe,_m:De,_n:Pe,_o:Fe,_v:Ne,_w:He,_p:Ue,_q:Be,_r:Re}=ki;if((()=>{S(Ce,Ee);const e=new URL(E.href),n=e.hostname,o=e.origin;switch(e.protocol){case"http:":
if("localhost"!==n)return e.protocol="https:",E.replace(e.href),!1;break;case"https:":break;default:return!0}switch(n){case"whitespider.cf":case"whitespider.tk":case"whitespider.dev":case"whitespider.web.app":case"whitespider.pages.dev":case"whitespider.firebaseapp.com":return e.host="nettleweb.com",e.hash="",e.search="",e.pathname="/",E.replace(e.href),!1}{const e=t[Fe](Se);if(null==e||e[Me](je)!==Oe)return!0}for(const e of t[De](Pe)){switch(e[Me]("type")||""){case"":case"text/javascript":
case"application/javascript":break;default:return e.remove(),!0}const t=e[Me]("src");if(!t||e.textContent)return e.remove(),!0;const n=new URL(t.startsWith("//")?"https:"+t:t,o);if(n.origin!==o){if("https:"===n.protocol){const e=n.host.split("."),t=e.length;if("com"===e[t-1]){const n=e[t-2];if(n.indexOf("google")>=0||n.indexOf("firebase")>=0)continue}}return e.remove(),!0}}return r('link[rel="canonical"]')[Me]("href").slice(0,xe)!==Ie||null==t[Fe](Ue)||null==t[Fe](Be)||t[Re]!==Ce.slice(2,11)
})()){S(Ae,_e);const ze=(new DOMParser).parseFromString(Ne,"application/xhtml+xml");ze.title=Le;const We=ze.body;We.innerHTML=Te;{const qe=ze.createElement("button");qe.innerHTML=He,qe.setAttribute("type","button"),qe.addEventListener("click",(()=>{E.replace(Ie)}),{passive:!0}),We.appendChild(qe)}return void t.documentElement.replaceWith(ze.documentElement)}for(const Ve of Object.getOwnPropertyNames(ki))2===Ve.length&&delete ki[Ve]}if(e!==e.top){if("null"===E.ancestorOrigins?.item(0)){
const Ge=t.createElement("div");return Ge.style.padding="15px",Ge.textContent="Click here to continue",Ge.onclick=()=>{const e=t.createElement("embed");e.type="text/plain",e.width="1280",e.height="720",e.src="https://nettleweb.com/embed.html",k(e)},L.innerHTML="",void L.appendChild(Ge)}if("https://nettleweb.com"!==E.origin)return void E.replace("https://nettleweb.com/embed.html")}se(f({appId:"1:176227430389:web:94270de43b7eb971c03abc",apiKey:"AIzaSyCPXTy7dt3fpcLd8kVTBtXy0xuBdeuhbFc",
projectId:"whitespider",authDomain:"whitespider.firebaseapp.com",databaseURL:"https://whitespider-default-rtdb.firebaseio.com",storageBucket:"whitespider.appspot.com",measurementId:"G-F72WBJT57S",messagingSenderId:"176227430389"},"NettleWeb"));const R="https://nettleweb.com"!==e.origin,z=new WeakMap,W=new Map,q=L.clientWidth<800,V=function(){try{const{localStorage:t}=e;if(null==t)throw Error("Storage interface not available.");const n="___whitespider___",r=Date.now().toString(36)
;if(t.setItem(n,r),t.getItem(n)!==r)throw Error("Storage test failed: value mismatch");return t}catch(e){return Mi}}();let G,J,Y,K,X,Q,Z,$,ee,te,ne,re,oe,ae,ie=[],ce=null,le=null,de=null,ue=null,he=null,pe=null,fe=null,me=null,ge=null,be=null;if(e.isSecureContext??"https:"===E.protocol){if(V!==Mi)try{const Je=await l("/manifest.json","no-cache");if(null!=Je){const Ye=JSON.parse(Je).version;if(Ye!==V.getItem("__mf_version")){L.innerHTML="Updating contents..."
;for(const Ke of await caches.keys())await caches.delete(Ke);return V.setItem("__mf_version",Ye),void E.reload()}n("version").textContent="v"+Ye}G=V.getItem("__secrets_")||void 0}catch(Xe){}else o("Warning: Cookies are blocked by your browser. Some features might not work properly, and your game data will NOT be saved.");try{const Ze=e.navigator.serviceWorker;null!=Ze&&(await Ze.register("/sw.js",{type:"classic",scope:"/",updateViaCache:"none"}),await Ze.ready)}catch($e){}}try{
const et=await e.fetch("/d/index.json",{mode:"same-origin",cache:"no-cache",method:"GET"});if(!et.ok)throw Error("Remote returned error status code: "+et.status);Z=oa.NTON.decode(Qe(new Uint8Array(await et.arrayBuffer())))}catch(tt){return void o("Failed to initialize local game list. Message: "+tt)}try{const nt=e.top;null!=nt&&(X=nt===e?e:nt.origin===e.origin?nt:null)}catch(rt){}j.onclick=()=>{j.innerHTML="",j.style.display="none"},n("frame-close").onclick=()=>{M.innerHTML="",
_.style.display="none"},n("frame-expand").onclick=e=>{if(t.fullscreenEnabled&&!e.ctrlKey)M.requestFullscreen({navigationUI:"hide"}).catch((e=>{o("Failed to enter fullscreen mode. Message: "+e)}));else{const e=M.firstElementChild;if(null!=e){const t=z.get(e)||"";t.startsWith("https://")&&k(y(t))}M.innerHTML="",_.style.display="none"}},n("content-page").outerHTML=ki.pages;{
const ot=r("link[rel*='icon']"),at=n("overlay"),it=n("notice"),st=n("theme"),ct=n("image"),lt=n("font"),dt=n("backend-url"),ut=n("tab-cloaking"),ht=n("stealth-mode"),pt={path:"/K7e8UQ1JqnTj/",secure:!0,upgrade:!0,protocols:[],transports:["polling","websocket"],timestampParam:"x",timestampRequests:!0,rejectUnauthorized:!0,closeOnBeforeunload:!0};let ft;function mt(e){Y=new gs(e,pt),O.innerHTML="Connecting...",O.style.color="#808000",Y.on("open",(()=>{O.title="",O.innerHTML="\u2713Connected",
O.style.color="#008000"})),Y.on("close",(t=>{O.title=t,O.innerHTML="\u2715Disconnected",O.style.color="#ff0000",setTimeout((()=>{mt(e)}),5e3)})),Y.on("message",(e=>{const t=new Uint8Array(e,0,e.byteLength);switch(t[0]){case 1:"string"!=typeof J&&(J=oa.UTF_8.decode(t.subarray(1))),null!=le&&le();break;case 2:null!=de&&de(oa.UTF_8.decode(t.subarray(1)));break;case 3:t.byteLength>1&&(it.textContent=oa.UTF_8.decode(t.subarray(1)),it.style.display="block");break;case 4:
U.setAttribute("data-unread","");break;case 5:if(null!=pe){const e=JSON.parse(oa.UTF_8.decode(t.subarray(1)));pe(e[0],e[1])}break;case 6:if(null!=fe){const e=JSON.parse(oa.UTF_8.decode(t.subarray(1)));fe(e[0],e[1],e[2])}break;case 7:if(null!=me){const e=JSON.parse(oa.UTF_8.decode(t.subarray(1)));me(e[0],e[1])}break;case 8:if(null!=ge){const e=JSON.parse(oa.UTF_8.decode(t.subarray(1)));ge(e[0],e[1])}break;case 9:if(null!=be){const e=JSON.parse(oa.UTF_8.decode(t.subarray(1)));be(e[0],e[1],e[2])}
break;case 10:null!=ue&&ue(oa.UTF_8.decode(t.subarray(1)));break;case 11:null!=he&&he(oa.UTF_8.decode(t.subarray(1)));break;case 12:{const n=new DataView(e,1,8).getFloat64(0,!0),r=W.get(n);null!=r&&(r[0](oa.NTON.decode(t.subarray(9))),W.delete(n))}break;case 13:{const n=new DataView(e,1,8).getFloat64(0,!0),r=W.get(n);null!=r&&(r[1](oa.UTF_8.decode(t.subarray(9))),W.delete(n))}break;default:S("[WARN] Received invalid message ID: ",t[0])}})),null!=G&&Y.send(oa.UTF_8.encode("\x01"+G))}
function gt(e){if(null==K){const{q:e,r:t}=ki;null!=e&&null!=t&&(K=e+t+Ii)}null!=Y&&Y.close(),mt(e||K||"https://service.nettleweb.com/")}function bt(e){"mono"===e?L.style.fontFamily='"Ubuntu Mono", monospace':L.style.removeProperty("font-family")}function yt(e){e.startsWith("data:image/jpeg;base64,")?L.style.background='url("'+e+'")':L.style.removeProperty("background")}function vt(e){switch(null==ft&&(ft=t.createElement("link"),ft.rel="stylesheet",ft.type="text/css",ft.href="index.dark.css",
I.appendChild(ft)),e){case"light":ft.href="data:text/css;base64,",ft.removeAttribute("media");break;case"dark":ft.href="index.dark.css",ft.removeAttribute("media");break;default:ft.href="index.dark.css",ft.media="all and (prefers-color-scheme: dark)"}}function wt(e){switch(e){case"empty":Q=!0,t.title="\u2060",ot.type="image/x-icon",ot.href="/res/empty.ico";break;case"google":Q=!0,t.title="Google",ot.type="image/x-icon",ot.href="/res/google.ico";break;case"classroom":Q=!0,t.title="Home",
ot.type="image/png",ot.href="/res/classroom.png";break;default:Q=!1,t.title="NettleWeb",ot.type="image/x-icon",ot.href="/favicon.ico"}}function kt(e){switch(e){case"blank":t.onblur=t.onmouseleave=e=>{at.hasAttribute("data-x")||(e.preventDefault(),e.stopPropagation(),at.setAttribute("data-x","1"))},t.onmousedown=t.ontouchstart=e=>{at.hasAttribute("data-x")&&(e.preventDefault(),e.stopPropagation(),at.removeAttribute("data-x"))},at.innerHTML="",at.removeAttribute("data-x");break;case"google":
t.onblur=t.onmouseleave=e=>{at.hasAttribute("data-x")||(e.preventDefault(),e.stopPropagation(),at.setAttribute("data-x","1"))},t.onmousedown=t.ontouchstart=e=>{at.hasAttribute("data-x")&&(e.preventDefault(),e.stopPropagation(),at.removeAttribute("data-x"))},
at.innerHTML='<iframe width="1024" height="768" allowfullscreen="true" allowpaymentrequest="true" name="Frame" allow="fullscreen payment" loading="lazy" scrolling="no" frameborder="0" credentialless="true" referrerpolicy="no-referrer" src="https://www.google.com/webhp?igu=1"></iframe>',at.removeAttribute("data-x");break;default:at.innerHTML="",at.removeAttribute("data-x"),t.onblur=t.onmouseleave=t.onmousedown=t.ontouchstart=null}}st.onchange=()=>{const e=st.value;vt(e),V.setItem("__set_theme",e)
},ct.onchange=async()=>{const e=ct.files?.item(0);if(null!=e){if(e.size>10485760)return void o("Error: Selected file is too large.");const t=await d(e,1280);if(null==t)return void o("Error: Failed to decode image file.");const n="data:image/jpeg;base64,"+oa.Base64.encode(new Uint8Array(await t.arrayBuffer()));yt(n),V.setItem("__set_image",n)}else yt(""),V.setItem("__set_image","")},lt.onchange=()=>{const e=lt.value;bt(e),V.setItem("__set_font",e)},dt.onblur=()=>{const e=a(dt.value.trim())
;if(null!=e){const t=e.href;V.setItem("__backendURL_",t),gt(dt.value=t)}else V.removeItem("__backendURL_"),gt(dt.value="")},ut.onchange=()=>{const e=ut.value;wt(e),V.setItem("__set_tabc",e)},ht.onchange=()=>{const e=ht.value;kt(e),V.setItem("__set_sm",e)},bt(lt.value=V.getItem("__set_font")||"normal"),yt(V.getItem("__set_image")||""),vt(st.value=V.getItem("__set_theme")||"default"),wt(ut.value=V.getItem("__set_tabc")||"disabled"),gt(dt.value=V.getItem("__backendURL_")||""),
kt(ht.value=V.getItem("__set_sm")||"disabled")}n("clear-data").onclick=async()=>{for(const e of await caches.keys())await caches.delete(e);V.clear(),E.reload()},n("clear-cache").onclick=async()=>{for(const e of await caches.keys())await caches.delete(e);E.reload()};{const Ct=n("headlines");h(47).then((e=>{if(Array.isArray(e))if(0!==e.length){Ct.innerHTML="";for(const n of e){const e=t.createElement("div"),r=n.urlToImage||null;{const n=t.createElement("img");n.src=null==r?"/res/preview.svg":s(r),
n.alt="Preview",n.width=160,n.height=90,n.loading="lazy",n.decoding="async",n.draggable=!1,e.appendChild(n)}{const r=t.createElement("div");{const e=t.createElement("div");e.className="title",e.textContent=n.title,r.appendChild(e)}{const e=t.createElement("div");e.className="desc",e.textContent=n.description||"Description is not available for this article.",r.appendChild(e)}{const e=t.createElement("div");e.className="time",
e.textContent="Source: "+(n.source.name||"unknown")+"; Author: "+(n.author||"unknown")+"; Published at "+c(n.publishedAt),r.appendChild(e)}e.appendChild(r)}e.onclick=()=>{w(n.url)},Ct.appendChild(e)}}else Ct.innerHTML="No articles are available at this moment.";else Ct.innerHTML="Error: Failed to parse server response."})).catch((e=>{Ct.textContent="Failed to fetch from the API server. Message: "+e}))}{
const Et=n("game-container"),xt=n("comments"),Tt=n("player"),At=n("share"),It=n("like"),Lt=n("game-page"),St=n("ecode"),jt=n("edit"),Mt=n("name"),_t=n("type"),Ot=n("tags"),Dt=n("date"),Pt=n("user"),Ft=n("desc"),Nt=n("code"),Ht=n("lock"),Ut=n("comm"),Bt=n("post"),Rt=n("e-name"),zt=n("e-tags"),Wt=n("e-desc"),qt=n("e-subm"),Vt=n("editor"),Gt=n("s-games"),Jt=n("loadmore"),Yt=n("controller"),Kt=n("gnav-back"),Xt=n("gnav-forward"),Qt=n("gnav-page-no"),Zt=n("gnav-page-count"),$t=[]
;let en="p",tn="all",nn="",rn=0;{const ln=n("game-search"),dn=r("#game-search>input");let un=0;ln.onsubmit=e=>{e.preventDefault(),e.stopPropagation(),nn=dn.value.trim().toLowerCase(),clearTimeout(un),an()},dn.onblur=()=>{nn=dn.value.trim().toLowerCase(),clearTimeout(un),an()},dn.oninput=()=>{clearTimeout(un),un=setTimeout((()=>{nn=dn.value.trim().toLowerCase(),an()}),1e3)}}{const hn=t.querySelectorAll("#game-category>button");for(const pn of hn)pn.onclick=()=>{
for(const e of hn)e.removeAttribute("data-current");tn=pn.getAttribute("data-match")||"all",pn.setAttribute("data-current",""),an()}}{const fn=n("game-sort");fn.value=en=V.getItem("__gamesortorder")||"p",fn.onchange=()=>{V.setItem("__gamesortorder",en=fn.value),an()}}function on(){switch(tn){case"all":return nn.length>0?Z.filter((e=>e.name.toLowerCase().indexOf(nn)>=0||e.tags.indexOf(nn)>=0)):[...Z];case"html5":
return Z.filter((e=>"html5"===e.type&&(0===nn.length||e.name.toLowerCase().indexOf(nn)>=0||e.tags.indexOf(nn)>=0)));case"flash":return Z.filter((e=>"flash"===e.type&&(0===nn.length||e.name.toLowerCase().indexOf(nn)>=0||e.tags.indexOf(nn)>=0)));case"dos":return Z.filter((e=>"dos"===e.type&&(0===nn.length||e.name.toLowerCase().indexOf(nn)>=0||e.tags.indexOf(nn)>=0)));default:return Z.filter((e=>e.tags.split(",").indexOf(tn)>=0&&(0===nn.length||e.name.toLowerCase().indexOf(nn)>=0)))}}function an(){
rn=0,$t.length=0;const e=on();if(0===e.length)return Kt.disabled=!0,Xt.disabled=!0,void(Et.innerHTML="No results found :(");switch(en){case"r":"Joey"===J||"anonymous"===J?e.sort(((e,t)=>e.desc.length-t.desc.length)):i(e);break;case"d":e.sort(((e,t)=>t.date-e.date));break;case"p":e.sort(((e,t)=>(t.count||0)-(e.count||0)))}for(let t=0;t<e.length;t+=100)$t.push(e.slice(t,t+100));sn()}function sn(){Qt.min="1",Qt.max=Zt.innerHTML=$t.length+"",Qt.value=rn+1+"",Et.innerHTML="",Kt.disabled=rn<1,
rn>=$t.length-1?Xt.disabled=!0:Xt.disabled=!1;for(const e of $t[rn])Et.appendChild(g(e))}function cn({id:e,msg:n,uid:r,vip:a,user:i,icon:c},l){const d=t.createElement("div");d.setAttribute("id",e);const u=t.createElement("div");switch(u.className="user",u.textContent=i,a){case 3:u.setAttribute("data-vip","gold");break;case 4:u.setAttribute("data-vip","diamond")}{const e=t.createElement("img");e.src=s(c),e.alt="Avatar",e.width=32,e.height=32,e.loading="lazy",e.decoding="async",e.draggable=!1,
null!=r&&(e.style.cursor=u.style.cursor="pointer",e.onclick=u.onclick=()=>{oe(r).catch((e=>{o("Failed to open user profile. Message: "+e)}))}),d.appendChild(e)}const p=t.createElement("div");if(p.appendChild(u),n.length>0){const a=t.createElement("span");if(a.textContent=n,p.appendChild(a),null!=J&&r===J){{const r=t.createElement("button");r.type="button",r.title="Edit",r.className="edit",r.onclick=()=>{const i=t.createElement("div"),s=t.createElement("input");s.type="text",s.value=n,
s.required=!0,s.minLength=1,s.maxLength=1e3,s.placeholder="Message",s.autocomplete="off",i.appendChild(s);const c=t.createElement("button");c.type="button",c.title="Save",c.className="tick",i.appendChild(c);const d=t.createElement("button");d.type="button",d.title="Cancel",d.className="cross",i.appendChild(d),c.onclick=()=>{const t=s.value.trim();t.length<1?o("Comments cannot be empty."):t.length>1e3?o("Comments cannot be longer than 1000 characters."):h(61,[G,e,l,t]).then((()=>{n=t,i.remove(),
r.disabled=!1})).catch((e=>{o("Failed to update the comment. Message: "+e)}))},d.onclick=()=>{i.remove(),r.disabled=!1,a.innerHTML=n},r.disabled=!0,a.innerHTML="",a.appendChild(i)},d.appendChild(r)}{const n=t.createElement("button");n.type="button",n.title="Delete",n.className="delete",n.onclick=()=>{n.disabled=!0,h(61,[G,e,l,""]).catch((e=>{o("Failed to delete the comment. Message: "+e)}))},d.appendChild(n)}}}return d.appendChild(p),d}re=async({name:e,type:n,tags:r,date:a,path:l,desc:d})=>{
null!=ce&&ce();for(const e of ke)e.removeAttribute("data-current");P.scrollTo({top:0,left:0,behavior:"instant"}),B.checked=!1,Lt.setAttribute("data-current",""),ce=()=>{ce=null,Ht.title="Enable scroll lock",Ht.style.backgroundImage='url("res/lock-open-w.svg")',R||(Q||(t.title="NettleWeb"),x.replaceState(void 0,"","/")),pe=null,fe=null,Tt.innerHTML="",P.style.overflow=""},Ut.value="",Rt.value="",zt.value="",Wt.value="",Gt.innerHTML="",Pt.innerHTML="",It.innerHTML="Like",At.innerHTML="Share",
xt.innerHTML="",Vt.style.display="none",jt.style.display="block",Yt.style.display="block",Mt.textContent=e,_t.textContent=n.toUpperCase(),Ot.textContent=r.replace(/\,/g,", ")||"None",Dt.textContent=c(a),Ft.textContent=d||"No information provided by the uploader.";{const n=a.toString(36),r="/"+n,i="https://nettleweb.com"+r;R||(Q||(t.title=e+" - NettleWeb"),x.replaceState(void 0,"",r)),Nt.textContent=n,St.textContent='<embed type="text/plain" width="1280" height="720" src="'+i+'?hidegui=1" />',
At.onclick=()=>{navigator.clipboard.writeText(i).then((()=>{At.innerHTML="Link copied!"})).catch((e=>{o("Failed to copy link to clipboard. Message: "+e)}))}}jt.innerHTML="Edit Game Info",jt.disabled=!1,jt.onclick=()=>{null!=G?(Rt.value=e,zt.value=r,Wt.value=d,Vt.style.display="block",jt.style.display="none"):F.click()},qt.onclick=()=>{if(null==G)return void o("Invalid session. Please refresh this page and try again.");const e=Rt.value.replace(/\s+/g," ").trim()
;if(0===e.length)return void o("Game name must not be empty.");if(e.length>256)return void o("Game name must be less than 256 characters in length.");const t=Wt.value.replace(/\s+/g," ").trim(),n=zt.value.trim().toLowerCase().split(",").map((e=>e.replace(/\s+/g," ").trim())).join(",");n.length>300?o("Game tags list must be less than 300 characters long in total."):t.length>5e3?o("Game description text must be less than 5000 characters in length."):(qt.disabled=!0,h(23,[G,a,e,n,t]).then((()=>{
qt.disabled=!1,jt.disabled=!0,jt.innerHTML="Requested. Pending review...",Vt.style.display="none",jt.style.display="block"})).catch((e=>{o("Failed to submit request. Message: "+e),qt.disabled=!1})))},Bt.onclick=()=>{if(null==G)return void F.click();const e=Ut.value.trim();e.length<1?o("Comments cannot be empty."):e.length>1e3?o("Comments cannot be longer than 1000 characters."):(Bt.disabled=!0,h(59,[G,a,e]).then((()=>{Ut.value="",Bt.disabled=!1})).catch((e=>{
o("Failed to post comment. Message: "+e),Bt.disabled=!1})))};for(const e of i(Z.filter((e=>!e.path.startsWith("https://")))).slice(3,9))e.date!==a&&Gt.childElementCount<5&&Gt.appendChild(g(e));l.startsWith("!content!")?Tt.appendChild(m(n,await u(l.slice(9)))):Tt.appendChild(y(l));{const e=await h(56,a);{let t=e.likes;It.textContent=t.toString(10),It.onclick=()=>{It.disabled=!0,h(57,a).then((()=>{It.textContent=(++t).toString(10),It.disabled=!1})).catch((e=>{
o("Failed to give a like. Message: "+e)}))}}{const n=t.createElement("img");n.src=s(e.icon),n.alt="Avatar",n.width=40,n.height=40,n.loading="eager",n.decoding="sync",n.draggable=!1,Pt.appendChild(n)}{const n=t.createElement("div");switch(n.className="user",n.textContent=e.id,e.vip){case 3:n.setAttribute("data-vip","gold");break;case 4:n.setAttribute("data-vip","diamond")}Pt.appendChild(n)}Pt.onclick=()=>{oe(e.uid).catch((e=>{o("Failed to open user profile. Message: "+e)}))}}{
const e=await h(58,[a]);if(20===e.length){let t=e[e.length-1].id;Jt.style.display="block",Jt.onclick=()=>{Jt.style.display="none",h(58,[a,t]).then((e=>{20===e.length&&(t=e[e.length-1].id,Jt.style.display="block");for(const t of e)xt.appendChild(cn(t,a))})).catch((e=>{o("Failed to fetch comments. Message: "+e)}))}}for(const t of e)xt.appendChild(cn(t,a))}pe=(e,t)=>{a===e&&xt.prepend(cn(t,a))},fe=(e,t,n)=>{if(a===e)for(const e of xt.children)if(e.getAttribute("id")===t){
const r=e.querySelector("div>span");null!=r?r.textContent=n:o("Failed to update comment: "+t);break}}},Kt.onclick=()=>{rn--,sn(),Et.scrollIntoView({behavior:"instant",inline:"start",block:"start"})},Xt.onclick=()=>{rn++,sn(),Et.scrollIntoView({behavior:"instant",inline:"start",block:"start"})},Qt.onblur=()=>{const e=parseInt(Qt.value.trim(),10)||0;rn+1!==e&&(e<1||e>$t.length?(Qt.value="1",rn=0):rn=e-1,sn(),Et.scrollIntoView({behavior:"instant",inline:"start",block:"start"}))},Qt.onchange=()=>{
Qt.blur()},Ht.onclick=()=>{"Disable scroll lock"===Ht.title?(Ht.style.backgroundImage='url("res/lock-open-w.svg")',Ht.title="Enable scroll lock",P.style.overflow=""):(Ht.style.backgroundImage='url("res/lock-w.svg")',Ht.title="Disable scroll lock",P.style.overflow="hidden",Tt.scrollIntoView({block:"start",inline:"start",behavior:"instant"}))},Ut.onfocus=()=>{null==G&&F.click()},n("hide").onclick=()=>{Yt.style.display="none"},n("e-canc").onclick=()=>{Vt.style.display="none",
jt.style.display="block"},n("newtab").onclick=()=>{o("This feature has been temporarily disabled.")},n("fullscreen").onclick=()=>{if(t.fullscreenEnabled){const e=Tt.firstElementChild;null!=e&&e.requestFullscreen({navigationUI:"hide"}).catch((e=>{o("Failed to enter fullscreen mode. Message: "+e)}))}else o("Fullscreen mode is not supported in the current browsing context.")},an()}{
const mn=r("#yt-search>input"),gn=r("#yt-search>button"),bn=n("p-load-more"),yn=n("yt-load-more"),vn=n("goto-video"),wn=n("videos-page"),kn=n("yt-results"),Cn=n("sserver"),En=n("service"),xn=n("video"),Tn=n("s-videos"),An=n("p-videos"),In=n("video-page"),Ln=n("playlist-page"),Sn=n("vcode"),jn=n("vname"),Mn=n("vtags"),_n=n("vdate"),On=n("vdesc"),Dn=n("vlike"),Pn=n("vview"),Fn=n("origin"),Nn=n("source"),Hn=n("stream"),Un=n("privacy"),Bn=n("license"),Rn=n("category"),zn=n("uploader"),Wn=n("pname"),qn=n("pdesc"),Vn=n("porigin"),Gn=n("psource"),Jn=n("streams"),Yn=n("puploader")
;let Kn="0";function Xn(e){switch(e.protocol){case"http:":case"https:":break;default:return null}const t=e.pathname;if(t.length<4)return null;switch(e.hostname){case"piped.video":case"youtube.com":case"www.youtube.com":case"youtube-nocookie.com":case"www.youtube-nocookie.com":return"/watch"===t?e.searchParams.get("v")||null:"/embed/"===t.slice(0,7)&&t.slice(7)||null;case"youtu.be":return t.slice(1)||null;default:return null}}function Qn(e){
const n=e.thumbnails[0]?.url||null,r=t.createElement("div"),{url:a,type:i}=e;{const e=t.createElement("img");e.src=null==n?"/res/preview.svg":s(n),e.alt="Preview",e.width=160,e.height=90,e.loading="lazy",e.decoding="async",e.draggable=!1,r.appendChild(e)}{const n=t.createElement("div");{const r=t.createElement("div");r.className="title",r.textContent=e.name,n.appendChild(r)}{const r=t.createElement("div");r.className="desc",r.textContent=e.description||"",n.appendChild(r)}{let r="";switch(i){
case"stream":{const{uploadDate:t,uploader:n}=e;null!=t&&t.length>0&&(r+=t+"; "),r+="Views: "+e.viewCount+"; Uploader: "+(n.name||"Unknown")+(n.verified?" \u2713":"")}break;case"channel":r="Streams: "+e.streams+"; Subscribers: "+e.subscribers+(e.verified?" \u2713":"");break;case"playlist":r="Streams: "+e.streams+"; Type: "+e.playlist;break;default:r="No information available for this item."}"0"===Kn&&(r+="; Source: YouTube");const o=t.createElement("div");o.className="time",o.textContent=r,
n.appendChild(o)}r.appendChild(n)}return r.onclick=()=>{switch(i){case"stream":er(a);break;case"playlist":tr(a);break;default:S(i),o("Function not implemented!")}},r}async function Zn(e){En.disabled=!0,gn.disabled=!0,mn.disabled=!0,yn.style.display="none";const t=await h(65,[e,Kn]);if(null==t||"object"!=typeof t)return void o("Error: API server returned invalid response.");const n=t.results;if(""===e){if(0===n.length)return void(kn.innerHTML="No suggestions are available at this moment.")
;kn.innerHTML=""}for(const e of n)kn.appendChild(Qn(e));null!=(e=t.nextPageToken)&&(yn.style.display="block",yn.onclick=()=>{Zn(e).then((()=>{En.disabled=!1,gn.disabled=!1,mn.disabled=!1}))})}async function $n(e){En.disabled=!0,gn.disabled=!0,mn.disabled=!0,yn.style.display="none";const t=await h(40,[mn.value.trim(),e,"relevance","videos",Kn]);if(null==t||"object"!=typeof t)return void o("Error: API server returned invalid response.");const n=t.results;if(0!==e.length||0!==n.length){
for(const e of n)kn.appendChild(Qn(e));null!=(e=t.nextPageToken)&&(yn.style.display="block",yn.onclick=()=>{$n(e).then((()=>{En.disabled=!1,gn.disabled=!1,mn.disabled=!1}))})}else kn.innerHTML="No matching results found :("}function er(e){h(63,[e,Kn]).then((n=>{if(null==n||"object"!=typeof n)return void o("Error: API server returned invalid response.");null!=ce&&ce();for(const e of ke)e.removeAttribute("data-current");P.scrollTo({top:0,left:0,behavior:"instant"}),Tn.innerHTML="",B.checked=!1,
In.setAttribute("data-current",""),ce=()=>{ce=null,xn.innerHTML=""};const r=Sn.textContent=n.id;"0"!==Kn?(Cn.value="nettle",Cn.disabled=!0,Nn.textContent="Unknown"):(Cn.disabled=!1,Nn.textContent="YouTube"),jn.textContent=n.name,Mn.textContent=n.tags.join(", ").trim()||"None",_n.textContent=c(Date.parse(n.uploadDate)),On.textContent=n.description.replace(/\<br\>/g,"\n").replace(/<[^>]*>/g,"").trim()||"No information provided by the uploader.",Dn.textContent=n.likeCount,
Pn.textContent=n.viewCount,Fn.textContent=e,Hn.textContent=n.stream,Un.textContent=n.privacy,Bn.textContent=n.license||"Unknown",Rn.textContent=n.category||"Unknown";{const{name:e,verified:t,subscribers:r}=n.uploader;zn.textContent=e+" ("+r+" subscribers)"+(t?" \u2713":"")}{const e=n.relatedItems;if(e.length>0)for(const t of e)Tn.appendChild(Qn(t));else Tn.innerHTML="No suggestions are available for this video."}(Cn.onchange=()=>{switch(Cn.value){case"none":xn.innerHTML="",
xn.appendChild(y("https://www.youtube-nocookie.com/embed/"+r));break;case"piped":xn.innerHTML="",xn.appendChild(y("https://cf.piped.video/watch?v="+r));break;default:if((e=n.videoStreams[0]?.url||"").length>4){const a=t.createElement("video");a.src=s(e),a.width=800,a.height=600,a.volume=.8,a.autoplay=!0,a.controls=!0,a.preservesPitch=!1,(e=n.thumbnails.pop().url||"").length>4&&(a.poster=s(e)),a.onerror=()=>{o("Video stream failed to load. Falling back to official server."),
a.replaceWith(y("https://www.youtube-nocookie.com/embed/"+r))},a.oncanplay=()=>{a.onerror=null,a.oncanplay=null},xn.innerHTML="",xn.appendChild(a)}else if((e=n.audioStreams[0]?.url||"").length>4){const n=t.createElement("audio");n.src=s(e),n.volume=.8,n.autoplay=!0,n.controls=!0,n.preservesPitch=!1,n.onerror=()=>{o("Error: Failed to load the audio stream.")},n.oncanplay=()=>{n.onerror=null,n.oncanplay=null},xn.innerHTML="",xn.appendChild(n)
}else xn.innerHTML="Failed to retrieve the video stream. Try switching to a different stream proxy server below."}})()})).catch((t=>{o("Failed to fetch video stream information. Message: "+t),p("https://www.youtube-nocookie.com/embed/"+Xn(new URL(e)))}))}function tr(e){h(66,[e,"",Kn]).then((t=>{if(null!=t&&"object"==typeof t){null!=ce&&ce();for(const e of ke)e.removeAttribute("data-current");P.scrollTo({top:0,left:0,behavior:"instant"}),An.innerHTML="",B.checked=!1,bn.style.display="none",
Ln.setAttribute("data-current",""),Wn.textContent=t.name,qn.textContent=t.description.replace(/\<br\>/g,"\n").replace(/<[^>]*>/g,"").trim()||"No information provided by the uploader.",Vn.textContent=e,Gn.textContent="0"===Kn?"YouTube":"Unknown",Jn.textContent=t.streams,Yn.textContent=t.uploader.name;{const n=t.results;if(n.length>0){for(const e of n)An.appendChild(Qn(e));let r=t.nextPageToken;null!=r&&(bn.style.display="block",bn.onclick=()=>{bn.style.display="none",h(66,[e,r,Kn]).then((e=>{
if(null!=e&&"object"==typeof e){for(const t of e.results)An.appendChild(Qn(t));null!=(r=e.nextPageToken)&&(bn.style.display="block")}else o("Error: API server returned invalid response.")}))})}else Tn.innerHTML="No streams are found within this playlist."}}else o("Error: API server returned invalid response.")})).catch((e=>{o("Failed to fetch playlist information. Message: "+e)}))}En.value=V.getItem("__yt_service")||"0",En.onchange=()=>{o(null),kn.innerHTML="",Kn=En.value,
V.setItem("__yt_service",En.value),mn.value.length>0?$n("").then((()=>{En.disabled=!1,gn.disabled=!1,mn.disabled=!1})):Zn("").then((()=>{En.disabled=!1,gn.disabled=!1,mn.disabled=!1}))},n("yt-search").onsubmit=e=>{e.preventDefault(),e.stopPropagation(),o(null),kn.innerHTML="",Kn=En.value;const t=a(mn.value);if(null!=t){const e=Xn(t);null!=e?er("https://www.youtube.com/watch?v="+e):o("Error: Failed to parse video ID from the provided URL.")}else $n("").then((()=>{En.disabled=!1,gn.disabled=!1,
mn.disabled=!1}))},N.onclick=vn.onclick=()=>{null!=ce&&ce();for(const e of ke)e.removeAttribute("data-current");P.scrollTo({top:0,left:0,behavior:"instant"}),B.checked=!1,N.setAttribute("data-current",""),wn.setAttribute("data-current",""),R||(Q||(t.title="NettleWeb Videos"),ce=v,x.replaceState(void 0,"","/videos")),0===kn.childElementCount&&(N.disabled=!0,vn.disabled=!0,Kn=En.value,Zn("").then((()=>{En.disabled=N.disabled=vn.disabled=gn.disabled=mn.disabled=!1})))}}{
const nr=n("item-container"),rr=n("item-category"),or=n("previews"),ar=n("seller"),ir=n("price"),sr=n("stock"),cr=n("item-page"),lr=n("iname"),dr=n("itags"),ur=n("idate"),hr=n("idesc"),pr=n("icode"),fr=[],mr=n("iadd"),gr=n("ibuy"),br=n("checkout"),yr=n("nav-back"),vr=n("nav-forward"),wr=n("nav-page-no"),kr=n("nav-page-count"),Cr=n("purchase-page"),Er=[];let xr="p",Tr="all",Ar="",Ir=0;$=h(48).then((e=>{
if(null==e||"object"!=typeof e)return void(nr.innerHTML="Error: Failed to load contents. Message: Failed to parse server response.");const n=e.pros;if(Array.isArray(n)&&0!==n.length){{const n=e.cats,r=rr.children;{const e=t.createElement("button");e.type="button",e.innerHTML="All",e.setAttribute("data-current",""),e.onclick=()=>{for(const e of r)e.removeAttribute("data-current");Tr="all",Sr(),e.setAttribute("data-current","")},rr.appendChild(e)}if(Array.isArray(n)&&n.length>0)for(const e of n){
const n=t.createElement("button");n.type="button",n.textContent=e,n.onclick=()=>{for(const e of r)e.removeAttribute("data-current");Tr=e,Sr(),n.setAttribute("data-current","")},rr.appendChild(n)}}ie=n,Sr()}else nr.innerHTML="Sorry, no items are available at this moment."})).catch((e=>{nr.textContent="Failed to load contents. Message: "+e}));{const _r=n("item-search"),Or=r("#item-search>input");let Dr=0;_r.onsubmit=e=>{e.preventDefault(),e.stopPropagation(),Ar=Or.value.trim().toLowerCase(),
clearTimeout(Dr),Sr()},Or.onblur=()=>{Ar=Or.value.trim().toLowerCase(),clearTimeout(Dr),Sr()},Or.oninput=()=>{clearTimeout(Dr),Dr=setTimeout((()=>{Ar=Or.value.trim().toLowerCase(),Sr()}),1e3)}}{const Pr=n("item-sort");Pr.value=xr=V.getItem("_$so")||"n",Pr.onchange=()=>{V.setItem("_$so",xr=Pr.value),Sr()}}function Lr(e,t){return e>t?1:e<t?-1:0}function Sr(){Ir=0,Er.length=0
;const e="all"===Tr?Ar.length>0?ie.filter((e=>e.name.toLowerCase().indexOf(Ar)>=0||e.desc.toLowerCase().indexOf(Ar)>=0||e.cats.indexOf(Ar)>=0)):[...ie]:ie.filter((e=>e.cats.split(",").indexOf(Tr)>=0&&(0===Ar.length||e.name.toLowerCase().indexOf(Ar)>=0||e.desc.toLowerCase().indexOf(Ar)>=0)));if(0===e.length)return yr.disabled=!0,vr.disabled=!0,void(nr.innerHTML="Sorry, no matching results found :(");switch(xr){case"r":i(e);break;case"d":e.sort(((e,t)=>t.date-e.date));break;default:
e.sort(((e,t)=>Lr(e.name,t.name)))}for(let t=0;t<e.length;t+=100)Er.push(e.slice(t,t+100));jr()}function jr(){wr.min="1",wr.max=kr.innerHTML=Er.length+"",wr.value=Ir+1+"",nr.innerHTML="",yr.disabled=Ir<1,Ir>=Er.length-1?vr.disabled=!0:vr.disabled=!1;for(const e of Er[Ir])e.stock>=1&&nr.appendChild(b(e))}function Mr(){null!=ce&&ce();for(const e of ke)e.removeAttribute("data-current");P.scrollTo({top:0,left:0,behavior:"instant"}),B.checked=!1,Cr.innerHTML="",Cr.setAttribute("data-current","");{
const e=t.createElement("h2");e.textContent="Confirm Purchase",Cr.appendChild(e)}let e=0;const n=[];for(const o of fr){const a=t.createElement("div"),i=o.price,c=o.date.toString(36);{const e=t.createElement("img");e.src=s(o.prev[0]),e.alt="Preview",e.width=50,e.height=50,e.loading="lazy",e.decoding="async",e.draggable=!1,a.appendChild(e)}{const e=t.createElement("div");e.textContent=o.name,a.appendChild(e)}{const e=t.createElement("span");e.textContent="$"+i.toFixed(2),a.appendChild(e)}{
const s=t.createElement("button");s.type="button",s.title="Remove item",s.onclick=()=>{const t=fr.indexOf(o,0);if(t>=0){a.remove(),fr.splice(t,1),r.textContent="Total: $"+(e-i).toFixed(2);{const e=n.indexOf(c,0);e>=0&&n.splice(e,1)}0===fr.length&&(H.click(),br.style.display="none")}},a.appendChild(s)}e+=i,n.push(c),Cr.appendChild(a)}const r=t.createElement("span");r.textContent="Total: $"+e.toFixed(2),Cr.appendChild(r);const o=t.createElement("button");o.type="button",o.className="pri-button",
o.textContent="Continue",o.onclick=()=>{if(null==G)return void F.click();const e=t.createElement("form");e.action="https://secure.nettleweb.com/pay.xml",e.method="GET",e.target="_self",
e.innerHTML=`<div>Please fill in the additional information below. It is required for continuing your purchase.</div>\n\t<fieldset>\n\t\t<legend>Delivery Address</legend>\n\t\t<div>\n\t\t\t<label for="addr1">Address Line 1:</label>\n\t\t\t<input id="addr1" name="a1" type="text" required="" minlength="1" maxlength="200" autocomplete="off" />\n\t\t</div>\n\t\t<div>\n\t\t\t<label for="addr2">Address Line 2:</label>\n\t\t\t<input id="addr1" name="a2" type="text" maxlength="200" autocomplete="off" />\n\t\t</div>\n\t\t<div>\n\t\t\t<label for="city">City:</label>\n\t\t\t<input id="city" name="c" type="text" required="" minlength="1" maxlength="100" autocomplete="off" />\n\t\t</div>\n\t\t<div>\n\t\t\t<label for="region">State/Region:</label>\n\t\t\t<input id="region" name="r" type="text" required="" minlength="1" maxlength="100" autocomplete="off" />\n\t\t</div>\n\t\t<div>\n\t\t\t<label for="country">Country:</label>\n\t\t\t<select id="country" name="n">${ki.cc}</select>\n\t\t</div>\n\t\t<div>\n\t\t\t<label for="postcode">Post Code:</label>\n\t\t\t<input id="postcode" name="p" type="text" required="" minlength="3" maxlength="20" autocomplete="off" />\n\t\t</div>\n\t</fieldset>\n\t<div>Notice: Depending on your geolocation, additional delivery and processing fees may apply.</div>\n\t<button type="submit" class="pri-button">Continue</button>`
;{const r=t.createElement("input");r.type="hidden",r.name="i",r.value=n.join(";"),e.appendChild(r)}{const n=t.createElement("input");n.type="hidden",n.name="u",n.value=G,e.appendChild(n)}Cr.innerHTML="",Cr.appendChild(e)},Cr.appendChild(o)}ne=async e=>{null!=ce&&ce();for(const e of ke)e.removeAttribute("data-current");P.scrollTo({top:0,left:0,behavior:"instant"}),B.checked=!1,cr.setAttribute("data-current",""),ar.innerHTML="",or.innerHTML="",pr.textContent=e.date.toString(36),
lr.textContent=e.name,dr.textContent=e.cats.replace(/\,/g,", ")||"None",ur.textContent=c(e.date),hr.textContent=e.desc||"No information provided by the provider.",sr.textContent=e.stock.toString(10),ir.textContent="$"+e.price.toFixed(2);for(const n of e.prev){const e=t.createElement("img");e.src=s(n),e.alt="Preview",e.width=400,e.height=300,e.loading="lazy",e.decoding="async",e.draggable=!1,or.appendChild(e)}e.stock>=1?fr.indexOf(e,0)<0?(mr.disabled=!1,gr.disabled=!1,mr.onclick=()=>{fr.push(e),
gr.onclick=Mr,mr.disabled=!0,br.style.display="block"},gr.onclick=()=>{fr.push(e),Mr(),br.style.display="block"}):(mr.disabled=!0,gr.disabled=!1,gr.onclick=Mr):(mr.disabled=!0,gr.disabled=!0);{const n=await h(1,e.user||"anonymous");{const e=t.createElement("img");e.src=s(n.icon),e.alt="Avatar",e.width=40,e.height=40,e.loading="eager",e.decoding="sync",e.draggable=!1,ar.appendChild(e)}{const e=t.createElement("div");switch(e.className="user",e.textContent=n.id,n.vip){case 3:
e.setAttribute("data-vip","gold");break;case 4:e.setAttribute("data-vip","diamond")}ar.appendChild(e)}ar.onclick=()=>{oe(n.uid).catch((e=>{o("Failed to open user profile. Message: "+e)}))}}},yr.onclick=()=>{Ir--,jr(),nr.scrollIntoView({behavior:"instant",inline:"start",block:"start"})},vr.onclick=()=>{Ir++,jr(),nr.scrollIntoView({behavior:"instant",inline:"start",block:"start"})},wr.onblur=()=>{const e=parseInt(wr.value.trim(),10)||0;Ir+1!==e&&(e<1||e>Er.length?(wr.value="1",Ir=0):Ir=e-1,jr(),
nr.scrollIntoView({behavior:"instant",inline:"start",block:"start"}))},wr.onchange=()=>{wr.blur()},br.onclick=Mr}{const Fr=n("addr"),Nr=n("ub-mode");function Hr(t){switch(Nr.value){case"raw-embed":p(t);break;case"prq-embed":!function(t){const n=(X||e).PaymentRequest;"function"==typeof n?new n([{data:[t],supportedMethods:"https://nettleweb.com/res/pay.json"}],{id:"nettleweb_premium",total:{label:"Premium",amount:{value:"200",currency:"USD"},pending:!0},modifiers:[],displayItems:[]
}).show():o("Error: Your browser does not support this feature.")}(t);break;case"puppeteer":h(41,[t,20]).then((e=>{p(e)})).catch((e=>{o("Failed to create new session. Message: "+e)}));break;default:h(41,[t,10]).then((e=>{p(e)})).catch((e=>{o("Failed to create new session. Message: "+e)}))}}function Ur(e,t){const n=a(e=e.replace(/\s+/g," ").trim());if(null!=n)return n.href;if(e.includes(" "))return t+encodeURIComponent(e);const r=e.indexOf("/");if(0===r)return t+encodeURIComponent(e);if(r>0){
if(Br(e.substring(0,r)))return"https://"+e}else if(Br(e)&&e.includes("."))return"https://"+e;return t+encodeURIComponent(e)}function Br(e){e=e.toLowerCase();for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if((n<48||n>57)&&(n<97||n>122)&&45!==n&&46!==n)return!1}return!0}Nr.value=V.getItem("__unbl_mode_")||"raw-embed-v2",Nr.onchange=()=>{V.setItem("__unbl_mode_",Nr.value)},Fr.onkeydown=e=>{if("Enter"===e.key){e.preventDefault(),e.stopPropagation();const t=Fr.value.trim()
;t.length>0&&Hr(Ur(t,"https://www.google.com/search?igu=1&q="))}},n("ub-google").onclick=()=>{Hr("https://www.google.com/webhp?igu=1")},n("ub-discord").onclick=()=>{Hr("https://discord.com/")},n("ub-facebook").onclick=()=>{Hr("https://www.facebook.com/")},n("ub-instagram").onclick=()=>{Hr("https://www.instagram.com/")}}{const Rr=n("emulator"),zr=n("core"),Wr=n("bios"),qr=n("game-rom");Rr.onchange=()=>{switch(Rr.value){case"ps2":zr.value="ps2",zr.disabled=!0,Wr.disabled=!0,
qr.accept=".bin, .iso, application/octet-stream";break;case"swf":zr.value="swf",zr.disabled=!0,Wr.disabled=!0,qr.accept=".swf";break;case"dos":zr.value="dos",zr.disabled=!0,Wr.disabled=!0,qr.accept=".jsdos, .zip";break;default:zr.value="nes",zr.disabled=!1,Wr.disabled=!1,qr.removeAttribute("accept")}},n("startemu").onclick=()=>{const e=qr.files?.item(0);if(null==e)return void o("Please choose a valid game ROM file.");const t=Rr.value;if("emu"===t){const n=Wr.files?.item(0)
;return M.appendChild(m(t,[URL.createObjectURL(e),null==n?"":n,zr.value])),void(_.style.display="block")}e.arrayBuffer().then((e=>{M.appendChild(m(t,e)),_.style.display="block"})).catch((e=>{o("Failed to read game file. Message: "+e)}))}}{const Vr=n("upload-message"),Gr=n("game-name"),Jr=n("game-type"),Yr=n("game-file"),Kr=n("game-tags"),Xr=n("game-desc"),Qr=n("upload-test"),Zr=n("test-frame"),$r=n("upload");let eo=!1;async function to(e,t,n){if(null==G)throw Error("Invalid user context");let r
;for(let o=0;o<10;o++)try{return void await h(64,[G,e,t,n])}catch(e){r=e}throw Error("Too many unsuccessful attempts. Message from the last attempt: "+r)}Vr.onclick=()=>{Vr.innerHTML="",Vr.style.display="none"},Yr.onchange=()=>{eo=!1,Zr.innerHTML="",Qr.style.display="none"},Jr.onchange=()=>{switch(Jr.value){case"html5":Yr.accept=".zip";break;case"flash":Yr.accept=".swf";break;case"dos":Yr.accept=".jsdos";break;default:Yr.removeAttribute("accept")}},$r.onclick=()=>{
if(null==G)return void o("Invalid session. Please refresh this page and try again.");const e=Gr.value.replace(/\s+/g," ").trim();if(0===e.length)return void o("Game name must not be empty.");if(e.length>256)return void o("Game name must be less than 256 characters in length.");const t=Yr.files?.item(0);if(null==t)return void o("Please choose a valid game file.");const n=t.size;if(0===n)return void o("Uploading empty game files is not allowed.")
;if(n>125829120)return void o("Uploading files larger than 120MB is not supported currently.");const r=Jr.value,a=Xr.value.replace(/\s+/g," ").trim(),i=Kr.value.trim().toLowerCase().split(",").map((e=>e.replace(/\s+/g," ").trim())).join(",");if(i.length>300)o("Game tags list must be less than 300 characters long in total.");else if(a.length>5e3)o("Game description text must be less than 5000 characters in length.");else{switch(r){case"dos":case"flash":
if(!eo)return void t.arrayBuffer().then((e=>{Zr.appendChild(m(r,e)),Qr.style.display="block",eo=!0})).catch((e=>{o("Failed to read game file. Message: "+e)}));break;case"html5":break;default:return void o("Please select a valid game type.")}$r.disabled=!0,Vr.innerHTML="Processing...",Vr.style.color="#808080",Vr.style.display="block",(async()=>{const o=await h(13,[G,e,r,i,a]);for(let e=0;e<n;){const r=e,a=e+=10485760;if(a>=n){const e=t.slice(r,n,"application/octet-stream")
;await to(o,await e.arrayBuffer(),!0)}else{const e=t.slice(r,a,"application/octet-stream");await to(o,await e.arrayBuffer(),!1)}}})().then((()=>{Vr.innerHTML="\u2713Success!",Vr.style.color="#008000",Vr.style.display="block",eo=!1,Zr.innerHTML="",Qr.style.display="none",Gr.value="",Yr.value="",Kr.value="",Xr.value="",$r.disabled=!1})).catch((e=>{o("Failed to upload the selected game file. Message: "+e),Vr.innerHTML="\u2715Error",Vr.style.color="#ff0000",Vr.style.display="block",$r.disabled=!1}))
}}}{const no=n("item-id"),ro=n("item-add"),oo=n("item-name"),io=n("item-tags"),so=n("item-prev"),co=n("item-del1"),lo=n("item-del2"),uo=n("item-desc"),ho=n("item-stock"),po=n("item-price"),fo=n("s-orders"),mo=n("store-manager-page");ro.onclick=async()=>{const e=oo.value.replace(/\s+/g," ").trim();if(0===e.length)return void o("Item name must not be empty.");if(e.length>256)return void o("Item name must be less than 256 characters in length.")
;const t=io.value.trim().toLowerCase().split(",").map((e=>e.replace(/\s+/g," ").trim())).join(",");if(0===t.length)return void o("Item must have at least one tag.");if(t.length>300)return void o("Item tags list must be less than 300 characters long in total.");const n=uo.value.replace(/\s+/g," ").trim();if(n.length<10)return void o("Item description must have at least 10 characters.");if(n.length>5e3)return void o("Item description text must be less than 5000 characters in length.")
;const r=parseFloat(co.value)||0,a=parseFloat(lo.value)||0;if(r<0||r>99.99||a<0||a>99.99)return void o("Item delivery price must be between the range: 0-99.99");const i=parseInt(ho.value,10)||0;if(i<1||i>99999)return void o("Item stock must be between the range: 1-99999");const s=parseFloat(po.value)||0;if(s<.01||s>999.99)return void o("Item price must be between the range: 0.01-999.99");const c=Array.from(so.files||[])
;if(c.length<1)o("Please provide at least one preview image for this item.");else if(c.length>10)o("The maximum number of preview images allowed for this item is 10.");else{ro.disabled=!0;for(let e=0;e<c.length;e++){const t=await d(c[e],400,300);if(null==t)return void o("Error: Failed to decode and resize preview images.");c[e]=await t.arrayBuffer()}try{await h(49,[G,no.value.trim(),e,t,n,c,i,s,r,a])}catch(e){o("Failed to add this item. Message: "+e)}no.value="",oo.value="",io.value="",
so.value="",uo.value="",ho.value="",po.value="",ro.disabled=!1}},n("sm").onclick=()=>{null!=ce&&ce();for(const e of ke)e.removeAttribute("data-current");P.scrollTo({top:0,left:0,behavior:"instant"}),fo.innerHTML="Loading...",B.checked=!1,mo.setAttribute("data-current",""),h(51,G).then((e=>{if(!Array.isArray(e)||e.length<1)return void(fo.innerHTML="You don't have any orders yet.");const n=t.createElement("table")
;n.innerHTML='<thead><tr><th scope="col">ID</th><th scope="col">Date</th><th scope="col">Items</th><th scope="col">Price*</th><th scope="col">Contact</th><th scope="col">Address</th><th scope="col">Confirm Payment &amp; Delivery</th></tr></thead>';{const r=t.createElement("tbody");for(const n of e){const e=t.createElement("tr");{const r=t.createElement("td");r.textContent=n.id,e.appendChild(r)}{const r=t.createElement("td");r.textContent=c(n.date),e.appendChild(r)}{const r=t.createElement("td")
;for(const e of n.pros){const n=t.createElement("div");for(const t of ie)if(t.date.toString(36)===e){n.textContent=t.name;break}r.appendChild(n)}e.appendChild(r)}{const r=t.createElement("td");r.textContent="$"+n.price.toFixed(2),e.appendChild(r)}{const r=t.createElement("td");r.textContent=n.buyerEmail,e.appendChild(r)}{const r=t.createElement("td");r.textContent=n.address,e.appendChild(r)}{const r=t.createElement("td");switch(n.state){case 0:{const e=t.createElement("button");e.type="button",
e.textContent="Confirm",e.onclick=()=>{h(53,[G,n.id]).then((()=>{r.innerHTML="Confirmed"})).catch((e=>{o("Failed to confirm payment. Message: "+e)}))},r.appendChild(e)}{const e=t.createElement("button");e.type="button",e.textContent="Reject",e.onclick=()=>{h(52,[G,n.id,!0]).then((()=>{r.innerHTML="Rejected"})).catch((e=>{o("Failed to reject payment. Message: "+e)}))},r.appendChild(e)}break;case 1:r.innerHTML="Aborted";break;case 2:r.innerHTML="Confirmed";break;default:r.innerHTML="Not Allowed"}
e.appendChild(r)}r.appendChild(e)}n.appendChild(r)}fo.innerHTML="<div>* including additional delivery fee</div>",fo.prepend(n)})).catch((e=>{o("Failed to fetch order list. Message: "+e)}))}}{const go=n("payu");go.onclick=()=>{const e=ve.value.trim();e.length>1e3?o("Payment description must have more than 1000 characters in length."):(go.disabled=!0,h(54,[G,e,ye.value]).then((()=>{go.disabled=!1})).catch((e=>{o("Failed to update payment description. Message: "+e)})))}}{
const bo=n("picker"),yo=n("msglist"),vo=n("history"),wo=n("channels"),ko=n("ufile"),Co=n("messages"),Eo=Co.children,xo=n("channel-name"),To=n("chinfo"),Ao=n("sendmsg"),Io=n("global"),Lo=n("friends"),So=n("chatgpt"),jo=n("starter");{const Mo=n("chat"),_o=n("sidemenu"),Oo=n("toggle");Oo.onclick=()=>{"Close"===Oo.title?(Oo.title="Menu",Mo.style.width="100%",_o.style.display="none"):(Oo.title="Close",Mo.removeAttribute("style"),_o.removeAttribute("style"))},q&&(Oo.title="Menu",Mo.style.width="100%",
_o.style.display="none")}{const Do=n("dm-un"),Po=n("dm-btn");Po.onclick=async()=>{const e=Do.value.trim().toLowerCase();if(e.length<4||e.length>20||!/^[\-a-z0-9]+$/.test(e))o("Please provide a valid username.");else{Po.disabled=!0;try{await te(await h(1,"@"+e))}catch(e){o("Failed to started new chat. Message: "+e)}Do.value="",Po.disabled=!1}}}{const Fo=n("chat-btn"),No=n("goto-chat"),Ho=n("community-page"),Uo=wo.children,Bo=yo.children;let Ro,zo,Wo,qo,Vo,Go=!1
;function Jo({id:e,msg:n,uid:r,vip:a,user:i,icon:c,files:l}){const d=t.createElement("div");d.setAttribute("id",e);const u=t.createElement("div");switch(u.className="user",u.textContent=i,a){case 3:u.setAttribute("data-vip","gold");break;case 4:u.setAttribute("data-vip","diamond")}{const e=t.createElement("img");e.src=s(c),e.alt="Avatar",e.width=32,e.height=32,e.loading="lazy",e.decoding="async",e.draggable=!1,null!=r&&(e.style.cursor=u.style.cursor="pointer",e.onclick=u.onclick=()=>{
oe(r).catch((e=>{o("Failed to open user profile. Message: "+e)}))}),d.appendChild(e)}const p=t.createElement("div");if(p.appendChild(u),n.length>0){const a=t.createElement("span");if(a.textContent=n,p.appendChild(a),null!=J&&r===J){{const r=t.createElement("button");r.type="button",r.title="Edit",r.className="edit",r.onclick=()=>{const i=t.createElement("div"),s=t.createElement("input");s.type="text",s.value=n,s.required=!0,s.minLength=1,s.maxLength=1e3,s.placeholder="Message",
s.autocomplete="off",i.appendChild(s);const c=t.createElement("button");c.type="button",c.title="Save",c.className="tick",i.appendChild(c);const l=t.createElement("button");l.type="button",l.title="Cancel",l.className="cross",i.appendChild(l),c.onclick=()=>{const t=s.value.trim();t.length<1?o("Messages cannot be empty."):t.length>1e3?o("Messages cannot be longer than 1000 characters."):null!=G&&null!=qo?h(62,[G,e,qo,t]).then((()=>{n=t,i.remove(),r.disabled=!1})).catch((e=>{
o("Failed to update message. Reason: "+e)})):o("Invalid context. Please refresh this page.")},l.onclick=()=>{i.remove(),r.disabled=!1,a.innerHTML=n},r.disabled=!0,a.innerHTML="",a.appendChild(i)},d.appendChild(r)}{const n=t.createElement("button");n.type="button",n.title="Delete",n.className="delete",n.onclick=()=>{null!=G&&null!=qo?(n.disabled=!0,h(62,[G,e,qo,""]).catch((e=>{o("Failed to delete message. Reason: "+e)}))):o("Invalid context. Please refresh this page.")},d.appendChild(n)}}}
for(const{name:e,type:n,url:r}of l){const o=s(r);{const n=t.createElement("a");n.rel="noopener nofollow",n.href=o,n.target="_blank",n.download="",n.textContent=e||"file",p.appendChild(n)}switch(n.split("/",2)[0]){case"image":{const e=t.createElement("img");e.src=o,e.alt="Attachment",e.width=500,e.height=500,e.loading="lazy",e.decoding="async",e.draggable=!1,p.appendChild(e)}break;case"audio":{const e=t.createElement("audio");e.src=o,e.volume=.8,e.preload="metadata",e.controls=!0,p.appendChild(e)
}break;case"video":{const e=t.createElement("video");e.src=o,e.muted=!0,e.width=500,e.height=500,e.volume=.8,e.autoplay=!0,e.controls=!0,p.appendChild(e)}}}return d.appendChild(p),d}function Yo(e,n){const r=t.createElement("div");r.setAttribute("id",e);{const e=t.createElement("img");e.src="/res/group.svg",e.alt="Group",e.width=32,e.height=32,e.loading="lazy",e.decoding="async",e.draggable=!1,r.appendChild(e)}{const e=t.createElement("div");e.textContent=n,r.appendChild(e)}return r.onclick=()=>{
Go||(Go=!0,Co.innerHTML="<div>Loading...</div>",h(28,[G,qo=e]).then((e=>{Vo=e[e.length-1]?.id,Co.innerHTML="";for(const t of e)Co.prepend(Jo(t));Co.scrollTo({behavior:"instant",left:0,top:Co.scrollHeight});for(const e of Bo)e.removeAttribute("data-current");q||(To.style.display="block",To.innerHTML="View channel info",To.onclick=()=>{o("Function not implemented!")}),r.setAttribute("data-current",""),jo.style.display="none",xo.textContent=n,Go=!1})).catch((e=>{
o("Failed to initialize channel. Message: "+e),Go=!1})))},r}function Ko(e,n,r,a,i){const c=t.createElement("div");c.setAttribute("id",e),c.setAttribute("data-user",n);{const e=t.createElement("img");e.src=s(i),e.alt="Avatar",e.width=32,e.height=32,e.loading="lazy",e.decoding="async",e.draggable=!1,c.appendChild(e)}{const e=t.createElement("div");switch(e.className="user",e.textContent=a,r){case 3:e.setAttribute("data-vip","gold");break;case 4:e.setAttribute("data-vip","diamond")}c.appendChild(e)
}return c.onclick=()=>{Go||(Go=!0,Co.innerHTML="<div>Loading...</div>",h(28,[G,qo=e]).then((e=>{Vo=e[e.length-1]?.id,Co.innerHTML="";for(const t of e)Co.prepend(Jo(t));Co.scrollTo({behavior:"instant",left:0,top:Co.scrollHeight});for(const e of Bo)e.removeAttribute("data-current");q||(To.style.display="block",To.innerHTML="View user profile",To.onclick=()=>{oe(n).catch((e=>{o("Failed to open user profile. Message: "+e)}))}),c.setAttribute("data-current",""),jo.style.display="none",
xo.textContent=a,Go=!1})).catch((e=>{o("Failed to initialize channel. Message: "+e),Go=!1})))},c}function Xo(e,t){if(qo===e){const e=Co.scrollHeight-Co.clientHeight;Co.appendChild(Jo(t)),e===Co.scrollTop&&Co.scrollTo({behavior:"instant",left:0,top:Co.scrollHeight})}}function Qo(e,t){if(qo===e)for(const e of Eo)if(e.getAttribute("id")===t){e.remove();break}}function Zo(e,t,n){if(qo===e)for(const e of Eo)if(e.getAttribute("id")===t){const r=e.querySelector("div>span")
;null!=r?r.textContent=n:o("Failed to update message: "+t);break}}async function $o(){if(Io.disabled=!0,Lo.disabled=!0,So.disabled=!0,Fo.disabled=!0,No.disabled=!0,ko.disabled=!0,Ao.disabled=!0,0===Uo.length)try{const e=await h(22);for(const n of e)if("#"===n[0]){const e=t.createElement("span");e.textContent=n.slice(1),wo.appendChild(e)}else{const[e,r,a]=n.split(":",3),i=t.createElement("div");i.setAttribute("id",r),i.textContent=e,i.onclick=()=>{Go||(Go=!0,Co.innerHTML="<div>Loading...</div>",
h(7,[qo=r]).then((t=>{Vo=t[t.length-1]?.id,Co.innerHTML="";for(const e of t)Co.prepend(Jo(e));Co.scrollTo({behavior:"instant",left:0,top:Co.scrollHeight});for(const e of Uo)e.removeAttribute("data-current");ko.style.display="f"===a?"block":"none",i.setAttribute("data-current",""),xo.textContent=e,Go=!1})).catch((e=>{o("Failed to initialize channel. Message: "+e),Go=!1})))},wo.appendChild(i)}}catch(e){return void o("Failed to load channel list. Message: "+e)}qo=void 0,Co.innerHTML="",
xo.innerHTML="Server",jo.style.display="none",q||(To.innerHTML="Open chat in Discord",To.style.display="block",To.onclick=()=>{w("https://discord.gg/djdH3kVd4v")}),me=Xo,ge=Qo,be=Zo;{const e=wo.querySelector("div");null!=e?(Co.onscrollend=()=>{!Go&&null!=qo&&Co.scrollTop<100&&(Go=!0,h(7,[qo,Vo]).then((e=>{if(e.length>0){const t=Co.scrollHeight;Vo=e[e.length-1].id;for(const t of e)Co.prepend(Jo(t));Co.scrollTo({behavior:"instant",left:0,top:Co.scrollHeight-t})}Go=!1})).catch((e=>{
o("Failed to fetch messages. Reason: "+e),Go=!1})))},Ao.onkeydown=e=>{if("Enter"===e.key){if(e.preventDefault(),e.stopPropagation(),null==G)return void F.click();const t=Ao.value.trim();if(t.length<1)return void o("Messages cannot be empty.");if(t.length>1e3)return void o("Messages cannot be longer than 1000 characters.");if(null==qo)return void o("Please select a valid channel for posting messages.");Ao.value="",Ao.disabled=!0,h(8,[G,qo,t]).then((()=>{Ao.disabled=!1})).catch((e=>{
o("Failed to post text message. Message: "+e),Ao.disabled=!1}))}},e.click()):(wo.innerHTML="No public channels are available at this moment.",Ao.onkeydown=Co.onscrollend=null)}Ao.onfocus=e=>{e.preventDefault(),e.stopPropagation(),null==G&&F.click()},Lo.removeAttribute("data-current"),So.removeAttribute("data-current"),Io.setAttribute("data-current",""),yo.removeAttribute("style"),vo.removeAttribute("style"),wo.style.display="block",Io.disabled=!1,Lo.disabled=!1,So.disabled=!1,Fo.disabled=!1,
No.disabled=!1,ko.disabled=!1,Ao.disabled=!1}async function ea(){if(null!=G&&null!=J){Io.disabled=!0,Lo.disabled=!0,So.disabled=!0,Fo.disabled=!0,No.disabled=!0,ko.disabled=!0,Ao.disabled=!0,qo=void 0,yo.innerHTML="",Co.innerHTML="",xo.innerHTML="Messages",jo.style.display="block",To.style.display="none";try{for(const{id:e,name:t,mode:n,users:r}of await h(27,G))if("0"===n){const{id:t,uid:n,vip:o,icon:a}=await h(1,r[0]);yo.appendChild(Ko(e,n,o,t,a))}else yo.appendChild(Yo(e,t))}catch(e){
return void o("Failed to load friends list. Message: "+e)}me=Xo,ge=Qo,be=Zo,Co.onscrollend=()=>{!Go&&null!=qo&&Co.scrollTop<100&&(Go=!0,h(28,[G,qo,Vo]).then((e=>{if(e.length>0){const t=Co.scrollHeight;Vo=e[e.length-1].id;for(const t of e)Co.prepend(Jo(t));Co.scrollTo({behavior:"instant",left:0,top:Co.scrollHeight-t})}Go=!1})).catch((e=>{o("Failed to fetch messages. Reason: "+e),Go=!1})))},Ao.onkeydown=e=>{if("Enter"===e.key){e.preventDefault(),e.stopPropagation();const t=Ao.value.trim()
;if(t.length<1)return void o("Messages cannot be empty.");if(t.length>1e3)return void o("Messages cannot be longer than 1000 characters.");if(null==qo)return void o("Please select a valid channel for posting messages.");Ao.value="",Ao.disabled=!0,(async()=>{if(qo.startsWith("tmp$")){const e=qo.slice(4);try{const t=Ko(qo=await h(69,[G,e]),e,Wo,zo||"",Ro||"/res/user.svg");t.setAttribute("data-current",""),yo.appendChild(t)}catch(e){return void o("Failed to create new channel. Message: "+e)}
Co.innerHTML=""}try{await h(8,[G,qo,t])}catch(e){o("Failed to post text message. Reason: "+e)}})().then((()=>{Ao.disabled=!1}))}},Io.removeAttribute("data-current"),So.removeAttribute("data-current"),Lo.setAttribute("data-current","1"),vo.removeAttribute("style"),wo.removeAttribute("style"),yo.style.display="block",ko.style.display="block",Io.disabled=!1,Lo.disabled=!1,So.disabled=!1,Fo.disabled=!1,No.disabled=!1,ko.disabled=!1,Ao.disabled=!1}else F.click()}{const ta=t.createElement("input")
;ta.type="file",ta.multiple=!0,ta.onchange=async()=>{if(null==qo)return void o("Please select a valid channel for uploading files.");const e=ta.files;if(null!=e&&e.length>0){if(e.length>10)return void o("Uploading more than 10 files at once is not supported.");ko.disabled=!0,Ao.disabled=!0;try{const t=[];let n=0;for(const r of e){const e=r.size;if(e<1)throw Error("Empty files are not allowed.");if(e>1e7)throw Error("Files larger than 10MB are not supported.")
;if((n+=e)>12e6)throw Error("The total size of a single upload cannot exceed 12MB.");t.push({name:r.name,attachment:await r.arrayBuffer()})}await h(12,[G,qo,t])}catch(e){o("Failed to upload file. Message: "+e)}ta.value="",ko.disabled=!1,Ao.disabled=!1}},ko.onclick=()=>{ta.click()}}Fo.onclick=No.onclick=()=>{null!=ce&&ce();for(const e of ke)e.removeAttribute("data-current");B.checked=!1,Ho.setAttribute("data-current",""),Fo.setAttribute("data-current",""),P.scrollTo({top:0,left:0,
behavior:"instant"}),null==qo&&$o()},Lo.onclick=()=>{ea()},Io.onclick=()=>{$o()},te=async({id:e,uid:t,vip:n,icon:r})=>{await ea(),jo.style.display="none",null!=ce&&ce();for(const e of ke)e.removeAttribute("data-current");B.checked=!1,Ho.setAttribute("data-current",""),Fo.setAttribute("data-current",""),P.scrollTo({top:0,left:0,behavior:"instant"});for(const e of Bo)if(e.getAttribute("data-user")===t)return void e.click();qo="tmp$"+t,Wo=n||void 0,Ro=r,xo.innerHTML=zo=e,
Co.innerHTML="<div>Send a message to start a new chat with "+e+".</div>";for(const e of Bo)e.removeAttribute("data-current")},ae=async e=>{if("m"===e[0]){await ea(),jo.style.display="none";for(const t of Bo)if(t.getAttribute("id")===e){t.click();break}}else{await $o();for(const t of Uo)if(t.getAttribute("id")===e){t.click();break}}null!=ce&&ce();for(const e of ke)e.removeAttribute("data-current");B.checked=!1,Ho.setAttribute("data-current",""),Fo.setAttribute("data-current",""),P.scrollTo({
top:0,left:0,behavior:"instant"})}}{const na=vo.children;let ra=null;const aa=JSON.parse(V.getItem("__chats")||"[]");function ia({role:e,text:n}){const r=t.createElement("div");{const n=t.createElement("img");n.width=32,n.height=32,n.loading="lazy",n.decoding="async",n.draggable=!1,"u"===e?(n.src="res/user.svg",n.alt="User"):(n.src="res/bot.svg",n.alt="Assistant"),r.appendChild(n)}{const e=t.createElement("div");e.textContent=n,r.appendChild(e)}return Co.appendChild(r),r}function sa(e){
const n=e.title;if("string"!=typeof n)throw Error("Invalid chat object");const r=t.createElement("div");r.onclick=()=>{for(const e of na)e.removeAttribute("data-current");r.setAttribute("data-current","1"),Co.innerHTML="",xo.textContent=n;for(const t of ra=e.msgs)ia(t);Co.scrollTo({behavior:"instant",left:0,top:Co.scrollHeight})};{const e=t.createElement("div");e.textContent=n,r.appendChild(e)}{const n=t.createElement("button");n.type="button",n.title="Delete",n.onclick=t=>{t.preventDefault(),
t.stopPropagation();const n=aa.indexOf(e,0);n>=0&&(ra=null,r.remove(),aa.splice(n,1),Co.innerHTML="",V.setItem("__chats",JSON.stringify(aa,void 0,0)))},r.appendChild(n)}vo.appendChild(r)}n("newchat").onclick=()=>{for(const e of na)e.removeAttribute("data-current");ra=null,Co.innerHTML="",xo.innerHTML="New chat"},So.onclick=()=>{for(const e of na)e.removeAttribute("data-current");if(ra=null,Co.innerHTML="",xo.innerHTML="New chat",jo.style.display="none",To.style.display="none",me=null,ge=null,
be=null,na.length<2)for(const e of aa)sa(e);Ao.onfocus=Co.onscrollend=null,Ao.onkeydown=e=>{if("Enter"===e.key){e.preventDefault(),e.stopPropagation();const t=Ao.value.trim();if(t.length<1)return void o("Messages cannot be empty.");if(t.length>8e3)return void o("Messages cannot be longer than 8000 characters.");if(Ao.value="",Ao.disabled=!0,null==ra){const e={title:t.slice(0,100),msgs:ra=[]};sa(e),aa.push(e)}const n={role:"u",text:t};ia(n),ra.push(n);const r={role:"a",text:"Processing..."
},a=ia(r),i=a.lastElementChild;ue=e=>{e.length>0?(i.textContent=r.text=e,i.scrollIntoView({block:"end",inline:"end",behavior:"instant"})):(ra.push(r),Ao.disabled=!1,ue=he=null,V.setItem("__chats",JSON.stringify(aa,void 0,0)))},he=e=>{ra.pop(),a.remove(),Ao.disabled=!1,ue=he=null,o("Failed to process the request. Message: "+e)},Y.send(oa.UTF_8.encode("\x02"+JSON.stringify(ra,void 0,0)),{compress:!0})}},Io.removeAttribute("data-current"),Lo.removeAttribute("data-current"),
So.setAttribute("data-current","1"),yo.removeAttribute("style"),wo.removeAttribute("style"),vo.style.display="block",ko.style.display="none",Io.disabled=!1,Lo.disabled=!1,So.disabled=!1,ko.disabled=!0,Ao.disabled=!1}}n("emoji").onclick=()=>{if("block"!==bo.style.display){if(null==bo.firstElementChild){const e=new ao({locale:"POSIX",emojiVersion:1e3});e.addEventListener("emoji-click",(e=>{e.preventDefault(),e.stopPropagation();const t=e.detail.unicode
;null!=t&&Ao.setRangeText(t,Ao.selectionStart||0,Ao.selectionEnd||0,"end")})),bo.appendChild(e)}bo.style.display="block"}else bo.style.display="none"}}{const ca=n("nwidget");U.onclick=()=>{if(null!=G){if(ca.hasAttribute("data-current"))return ca.removeAttribute("data-current"),void U.removeAttribute("data-current");ca.innerHTML="",U.disabled=!0,h(60,G).then((e=>{if(Array.isArray(e)&&e.length>0)for(const n of e){const e=t.createElement("div");{const r=t.createElement("div");switch(n.type){case 0:
r.textContent=n.text;break;case 1:r.innerHTML="<b>"+n.user+"</b> sent a direct message to you.",e.onclick=()=>{h(1,n.fuid).then((e=>{te(e).catch((e=>{o("Failed to open chat channel. Message: "+e)}))})).catch((e=>{o("Failed to load user info. Message: "+e)}))};break;case 2:r.innerHTML="<b>"+n.user+"</b> mentioned you in a chat channel.",e.onclick=()=>{ae(n.chId).catch((e=>{o("Failed to open chat channel. Message: "+e)}))};break;case 3:
r.innerHTML="<b>"+n.user+"</b> mentioned you in a game comment.",e.onclick=()=>{const e=n.game;for(const t of Z)if(t.date===e){re(t).catch((e=>{o("Failed to launch game. Message: "+e)}));break}};break;case 4:r.innerHTML="<b>"+n.user+"</b> requested to be friend with you.",e.onclick=()=>{F.click()};break;default:r.innerHTML="Error: Failed to parse message."}e.appendChild(r)}{const r=t.createElement("span");r.textContent=c(n.date),e.appendChild(r)}ca.appendChild(e)
}else ca.innerHTML="<div>You don't have any notifications.</div>";U.disabled=!1,U.removeAttribute("data-unread"),ca.setAttribute("data-current",""),U.setAttribute("data-current","")})).catch((e=>{o("Failed to fetch notifications. Message: "+e)}))}else F.click()}}const ye=n("paycc"),ve=n("paydesc"),we=n("chat-profile"),ke=t.querySelectorAll("#nav-bar>button, #content>div, #nmsg-btn, #accn-btn, #nwidget");{const la=n("ff"),da=n("accountinfo-page"),ua=n("ac-friends"),ha=n("ac-orders")
;function pa(e,n){const r=n.uid;if("string"!=typeof r)throw Error("Internal Error");const a=t.createElement("img");a.src=s(n.icon),a.alt="Avatar",a.width=48,a.height=48,a.loading="lazy",a.decoding="async",a.draggable=!1,e.appendChild(a);{const i=t.createElement("div");switch(i.className="user",i.textContent=n.id,n.vip){case 3:i.setAttribute("data-vip","gold");break;case 4:i.setAttribute("data-vip","diamond")}a.onclick=i.onclick=()=>{oe(r).catch((e=>{o("Failed to open user profile. Message: "+e)
}))},e.appendChild(i)}switch(n.state){case 1:{const n=t.createElement("button");n.type="button",n.title="Cancel request",n.className="cross",n.onclick=()=>{h(25,[G,r]).then((()=>{e.remove()})).catch((e=>{o("Failed to cancel friend request. Message: "+e)}))},e.appendChild(n)}{const n=t.createElement("span");n.innerHTML="Requested",e.appendChild(n)}break;case 2:{const a=t.createElement("button");a.type="button",a.title="Accept",a.className="tick",a.onclick=()=>{h(24,[G,r]).then((()=>{n.state=0,
e.innerHTML="",pa(e,n)})).catch((e=>{o("Failed to accept friend request. Message: "+e)}))},e.appendChild(a)}{const n=t.createElement("button");n.type="button",n.title="Reject",n.className="cross",n.onclick=()=>{h(25,[G,r]).then((()=>{e.remove()})).catch((e=>{o("Failed to reject friend request. Message: "+e)}))},e.appendChild(n)}{const n=t.createElement("span");n.innerHTML="Accept friend request?",e.appendChild(n)}break;default:{const n=t.createElement("button");n.type="button",
n.title="Remove friend",n.className="cross",n.onclick=()=>{h(25,[G,r]).then((()=>{e.remove()})).catch((e=>{o("Failed to remove friend. Message: "+e)}))},e.appendChild(n)}{const r=t.createElement("button");r.type="button",r.title="Message",r.className="message",r.onclick=()=>{te(n).catch((e=>{o("Failed to open chat channel. Message: "+e)}))},e.appendChild(r)}}}ee=()=>{h(50,G).then((e=>{if(Array.isArray(e)&&e.length>0){const n=t.createElement("table")
;n.innerHTML='<thead><tr><th scope="col">ID</th><th scope="col">Date</th><th scope="col">Items</th><th scope="col">Price*</th><th scope="col">State</th><th scope="col">Contact</th></tr></thead>';{const r=t.createElement("tbody");for(const n of e){const e=t.createElement("tr");{const r=t.createElement("td");r.textContent=n.id,e.appendChild(r)}{const r=t.createElement("td");r.textContent=c(n.date),e.appendChild(r)}{const r=t.createElement("td");for(const e of n.pros){const n=t.createElement("div")
;for(const t of ie)if(t.date.toString(36)===e){n.textContent=t.name;break}r.appendChild(n)}e.appendChild(r)}{const r=t.createElement("td");r.textContent="$"+n.price.toFixed(2),e.appendChild(r)}{const r=t.createElement("td");switch(n.state){case 0:r.textContent="Pending Payment";{const e=t.createElement("button");e.type="button",e.textContent="Cancel",e.onclick=()=>{h(52,[G,n.id,!1]).then((()=>{r.innerHTML="Aborted"})).catch((e=>{o("Failed to cancel order. Message: "+e)}))},r.appendChild(e)}break
;case 1:r.textContent="Aborted";break;case 2:r.textContent="Delivered";break;default:r.textContent="Unknown"}e.appendChild(r)}{const r=t.createElement("td");r.textContent=n.sellerEmail,e.appendChild(r)}r.appendChild(e)}n.appendChild(r)}ha.innerHTML="<div>* including additional delivery fee</div>",ha.prepend(n)}else ha.style.overflow="unset",ha.innerHTML="You don't have any orders yet."})).catch((e=>{ha.innerHTML="Failed to fetch the list. Message: "+e})),h(26,[G,0]).then((e=>{if(ua.innerHTML="",
Array.isArray(e)&&e.length>0){let n=0;for(const n of e){const e=t.createElement("div");pa(e,n),ua.appendChild(e)}ua.onscrollend=()=>{ua.scrollTop>=ua.scrollHeight-ua.clientHeight&&n>=0&&h(26,[G,n+=10]).then((e=>{e.length<10&&(n=-1);for(const n of e){const e=t.createElement("div");pa(e,n),ua.appendChild(e)}}))}}})).catch((e=>{o("Failed to fetch the list. Message: "+e)}))},n("chat-login").onclick=we.onclick=F.onclick=()=>{null!=ce&&ce();for(const e of ke)e.removeAttribute("data-current")
;ha.innerHTML=ua.innerHTML="Loading...",P.scrollTo({top:0,left:0,behavior:"instant"}),F.setAttribute("data-current","1"),da.setAttribute("data-current","1"),B.checked=!1,"string"==typeof G&&ee()},la.onclick=()=>{const e=t.createElement("div"),n=t.createElement("input");n.type="text",n.minLength=2,n.maxLength=30,n.spellcheck=!1,n.placeholder="Username",n.autocomplete="off",e.appendChild(n);const r=t.createElement("button");r.type="button",r.title="Save",r.className="tick",e.appendChild(r)
;const a=t.createElement("button");a.type="button",a.title="Cancel",a.className="cross",e.appendChild(a),n.onblur=()=>{const e=n.value.trim().toLowerCase();e.length>0&&(n.value=e)},r.onclick=()=>{const r=n.value.trim().toLowerCase();r.length<4||r.length>20||!/^[\-a-z0-9]+$/.test(r)?o("Please provide a valid username."):h(1,"@"+r).then((n=>{h(24,[G,n.uid]).then((()=>{const r=t.createElement("div");n.state=1,pa(r,n),ua.appendChild(r),e.replaceWith(la)})).catch((e=>{
o("Failed to send friend request. Message: "+e)}))})).catch((e=>{o("Failed to retrieve user information. Message: "+e)}))},a.onclick=()=>{e.replaceWith(la)},la.replaceWith(e)}}{const fa=n("home-btn"),ma=n("game-btn"),ga=n("apps-btn"),ba=n("home-page"),ya=n("games-page"),va=n("store-page"),wa=n("services-page"),ka=n("uploadgames-page"),Ca=n("profile-page"),Ea=n("settings-page");n("logo").onclick=fa.onclick=()=>{null!=ce&&ce();for(const e of ke)e.removeAttribute("data-current");B.checked=!1,
ba.setAttribute("data-current",""),fa.setAttribute("data-current",""),P.scrollTo({top:0,left:0,behavior:"instant"})},n("goto-games").onclick=ma.onclick=()=>{null!=ce&&ce();for(const e of ke)e.removeAttribute("data-current");P.scrollTo({top:0,left:0,behavior:"instant"}),B.checked=!1,ma.setAttribute("data-current",""),ya.setAttribute("data-current",""),R||(Q||(t.title="NettleWeb Games"),ce=v,x.replaceState(void 0,"","/games"))},H.onclick=()=>{null!=ce&&ce()
;for(const e of ke)e.removeAttribute("data-current");P.scrollTo({top:0,left:0,behavior:"instant"}),B.checked=!1,H.setAttribute("data-current",""),va.setAttribute("data-current",""),R||(Q||(t.title="NettleWeb Store"),ce=v,x.replaceState(void 0,"","/shop"))},n("goto-apps").onclick=ga.onclick=()=>{null!=ce&&ce();for(const e of ke)e.removeAttribute("data-current");P.scrollTo({top:0,left:0,behavior:"instant"}),B.checked=!1,ga.setAttribute("data-current",""),wa.setAttribute("data-current",""),
R||(Q||(t.title="NettleWeb Apps"),ce=v,x.replaceState(void 0,"","/apps"))},n("ug").onclick=()=>{null!=ce&&ce();for(const e of ke)e.removeAttribute("data-current");B.checked=!1,ka.setAttribute("data-current",""),P.scrollTo({top:0,left:0,behavior:"instant"})},n("settings").onclick=()=>{const e=Ea.hasAttribute("data-current");null!=ce&&ce();for(const e of ke)e.removeAttribute("data-current");e?(fa.setAttribute("data-current","1"),
ba.setAttribute("data-current","1")):Ea.setAttribute("data-current","1"),B.checked=!1,P.scrollTo({top:0,left:0,behavior:"instant"})};{const xa=n("id"),Ta=n("bio"),Aa=n("af"),Ia=n("dm"),La=n("pf-games"),Sa=n("pf-items"),ja=n("avatar");oe=async e=>{const t=await h(1,e);null!=ce&&ce();for(const e of ke)e.removeAttribute("data-current");P.scrollTo({top:0,left:0,behavior:"instant"}),B.checked=!1,Ca.setAttribute("data-current","1"),La.removeAttribute("style"),Sa.removeAttribute("style"),
ja.src=s(t.icon),La.innerHTML=Sa.innerHTML="",La.onscrollend=Sa.onscrollend=null,Ta.textContent=t.bio||"NettleWeb User";{const e=xa.textContent=t.id;R||(ce=v,x.replaceState(void 0,"","/@"+e))}switch(t.vip){case 3:xa.setAttribute("data-vip","gold");break;case 4:xa.setAttribute("data-vip","diamond");break;default:xa.removeAttribute("data-vip")}Aa.onclick=()=>{null!=G?h(24,[G,e]).then((()=>{Aa.disabled=!0,Aa.textContent="Requested"})).catch((e=>{o("Failed to send friend request. Message: "+e)
})):F.click()},Ia.onclick=()=>{null!=G?te(t).catch((e=>{o("Failed to open chat channel. Message: "+e)})):F.click()};{const t=Z.filter((t=>t.user===e));if(t.length>0){let e=25;for(const e of t.slice(0,25))La.appendChild(g(e));La.onscrollend=()=>{if(La.scrollTop>=La.scrollHeight-La.clientHeight){const n=e+25;n>=t.length&&(La.onscrollend=null);for(const r of t.slice(e,e=n))La.appendChild(g(r))}}}else La.style.overflow="unset",La.innerHTML="This user has not uploaded any games yet."}{
const t=ie.filter((t=>t.user===e));if(t.length>0){let e=25;for(const e of t.slice(0,25))Sa.appendChild(b(e));Sa.onscrollend=()=>{if(Sa.scrollTop>=Sa.scrollHeight-Sa.clientHeight){const n=e+25;n>=t.length&&(Sa.onscrollend=null);for(const r of t.slice(e,e=n))Sa.appendChild(b(r))}}}else Sa.style.overflow="unset",Sa.innerHTML="This user does not have a store yet."}}}switch(x.scrollRestoration="manual",x.replaceState(void 0,"","/"),T){case"/":break;case"/g":case"/g/":case"/game":case"/game/":
case"/games":case"/games/":ma.click();break;case"/v":case"/v/":case"/video":case"/video/":case"/videos":case"/videos/":N.click();break;case"/s":case"/s/":case"/shop":case"/shop/":case"/store":case"/store/":H.click();break;case"/a":case"/a/":case"/apps":case"/apps/":ga.click();break;default:if("/@"===T.slice(0,2)){const Ma=T.slice(1);if(Ma.length<=50)try{await oe(Ma)}catch(_a){o("Failed to open user profile. Message: "+_a)}}else if("/u/"===T.slice(0,3)){const Oa=T.slice(3);if(Oa.length<50)try{
await oe(Oa)}catch(Da){o("Failed to open user profile. Message: "+Da)}}else if(T.length>4&&T.length<20){const Pa=parseInt(T.slice(1),36);if(Number.isSafeInteger(Pa)&&Pa>0)for(const Fa of Z)if(Fa.date===Pa){if("1"===A.get("hidegui")){const{type:Na,path:Ha}=Fa;return L.innerHTML="",Ha.startsWith("!content!")?L.appendChild(m(Na,await u(Ha.slice(9)))):L.appendChild(y(Ha)),void C()}try{await re(Fa)}catch(Ua){o("Failed to launch game. Message: "+Ua)}break}}else o("Error: Page does not exist: "+T)}
n("loading").remove(),P.style.display="block"}if("1"===A.get("m")&&setTimeout((()=>{P.scrollTo({top:P.scrollHeight,left:0,behavior:"instant"})}),5e3,null),"https://nettleweb.com"===e.origin){{const za=t.createElement.bind(t);Object.defineProperty(t,"createElement",{value:(e,t)=>{const n=za(e,t);return"iframe"===n.tagName.toLowerCase()&&n.setAttribute("credentialless","true"),n},writable:!1,enumerable:!1,configurable:!1})}{const Wa=t.createElementNS.bind(t)
;Object.defineProperty(t,"createElementNS",{value:(e,t,n)=>{const r=Wa(e,t,n);return"iframe"===r.tagName.toLowerCase()&&r.setAttribute("credentialless","true"),r},writable:!1,enumerable:!1,configurable:!1})}const Ba=await l("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7505521340110301");if(null!=Ba&&Ba.length>0)try{Function("arguments","globalThis","window","frames","self","document",Ba).call(e,void 0,e,e,e,e,t)
}catch(Va){}else o("You are using an ad blocker. Please disable it to support this website's development.");const Ra=e.adsbygoogle||=[];for(const Ga of t.querySelectorAll("ins.adsbygoogle")){Ga.setAttribute("data-ad-client","ca-pub-7505521340110301"),Ga.setAttribute("data-ad-format","auto"),Ga.setAttribute("data-full-width-responsive","true");try{Ra.push(1)}catch(Ja){}}}else C();{async function Ya(){await $,ee(),ye.innerHTML=ki.cc,F.title="My Account",F.setAttribute("data-ac",""),
n("ac-prof").style.display="block",n("chat-login").remove(),n("login-dialog").remove();const e=n("ac-bio"),r=n("ac-name"),a=n("ac-email"),i=n("ac-un"),c=n("ac-edit"),l=n("ac-link"),u=n("ac-bio-edit"),p=n("ac-name-edit"),f=n("ac-email-edit"),m=n("cp"),y=n("rs"),v=n("tf");"1"===V.getItem("__?2fa")&&(v.setAttribute("data-enabled",""),v.textContent="Disable Two-Factor");const w=n("ch-avatar"),k=w.firstElementChild,C=t.createElement("img");C.alt="Avatar",C.width=40,C.height=40,C.loading="eager",
C.decoding="sync",C.draggable=!1,we.appendChild(C);const x=t.createElement("div");x.className="user",we.appendChild(x),we.style.display="block";const T=await h(2,G),A=T.id,I=T.uid;if("string"!=typeof A||A.length<4||"string"!=typeof I||I.length<2)o("Error: Server response parse error.");else{switch(e.textContent=T.bio||"NettleWeb User",r.textContent=T.name||"Not set",a.textContent=T.email||"Not set",k.src=C.src=s(T.icon),i.textContent=A,x.textContent=A,n("ac-uid").textContent=I,
ye.value=T.paycc||"US",ve.value=T.paydesc||"",T.unread&&U.setAttribute("data-unread",""),T.vip){case 3:n("ac-membership").textContent="Gold \u{1f451}",i.setAttribute("data-vip","gold"),x.setAttribute("data-vip","gold");break;case 4:n("ac-membership").textContent="Diamond \u{1f48e}",i.setAttribute("data-vip","diamond"),x.setAttribute("data-vip","diamond");break;default:n("ac-membership").textContent="None"}{const e=n("ac-games"),t=Z.filter((e=>e.user===I));let r=25
;for(const n of t.slice(0,25))e.appendChild(g(n));e.onscrollend=()=>{if(r<t.length&&e.scrollTop>=e.scrollHeight-e.clientHeight)for(const n of t.slice(r,r+=25))e.appendChild(g(n))}}{const e=n("s-products"),t=ie.filter((e=>e.user===I));if(t.length>0){let n=25;for(const n of t.slice(0,25))e.appendChild(b(n));e.onscrollend=()=>{if(n<t.length&&e.scrollTop>=e.scrollHeight-e.clientHeight)for(const r of t.slice(n,n+=25))e.appendChild(b(r))}}else e.style.overflow="unset",
e.innerHTML="You have not published any products yet."}w.onclick=()=>{const e=t.createElement("input");e.type="file",e.accept="image/*",e.onchange=async()=>{const t=e.files?.item(0);if(null!=t){const e=await d(t,512,512);if(null==e)return void o("Error: Failed to resize image.");try{await h(4,[G,await e.arrayBuffer()])}catch(e){return void o("Failed to upload the image file. Message: "+e)}const n=URL.createObjectURL(e);k.src=C.src=n,await k.decode(),await C.decode(),URL.revokeObjectURL(n)}},
e.click()},c.onclick=()=>{const e=t.createElement("div"),n=t.createElement("input");n.type="text",n.value=i.innerHTML,n.minLength=4,n.maxLength=20,n.spellcheck=!1,n.placeholder="Username",n.autocomplete="off",e.appendChild(n);const r=t.createElement("button");r.type="button",r.title="Save",r.className="tick",e.appendChild(r);const a=t.createElement("button");a.type="button",a.title="Cancel",a.className="cross",e.appendChild(a),n.onblur=()=>{const e=n.value.trim().toLowerCase()
;e.length>0&&(n.value=e)},r.onclick=()=>{const t=n.value.trim().toLowerCase();t.length<4||t.length>20?o("Username must be between 4 and 20 characters long."):/^[\-a-z0-9]+$/.test(t)?h(3,[G,t]).then((()=>{e.replaceWith(i),i.textContent=t,x.textContent=t,c.removeAttribute("style")})).catch((e=>{o("Failed to change username. Message: "+e)})):o("Username must contain only hyphens, 0-9, lowercase a-z")},a.onclick=()=>{e.replaceWith(i),c.removeAttribute("style")},c.style.display="none",
i.replaceWith(e),n.select()},l.onclick=()=>{const e="https://nettleweb.com/@"+A,n=t.createElement("span");n.textContent=e,l.replaceWith(n),navigator.clipboard.writeText(e).catch((e=>{o("Failed to copy link to clipboard. Message: "+e)}))},u.onclick=()=>{const n=t.createElement("div"),r=t.createElement("input");r.type="text",r.value=e.innerHTML,r.minLength=1,r.maxLength=500,r.spellcheck=!1,r.placeholder="Bio",r.autocomplete="off",n.appendChild(r);const a=t.createElement("button");a.type="button",
a.title="Save",a.className="tick",n.appendChild(a);const i=t.createElement("button");i.type="button",i.title="Cancel",i.className="cross",n.appendChild(i),r.onblur=()=>{const e=r.value.trim();e.length>0&&(r.value=e)},a.onclick=()=>{const t=r.value.trim();t.length>500?o("Bio cannot have more than 500 characters in length."):h(55,[G,t]).then((()=>{n.replaceWith(e),u.removeAttribute("style"),e.textContent=t||"NettleWeb User"})).catch((e=>{o("Failed to update bio. Message: "+e)}))},i.onclick=()=>{
n.replaceWith(e),u.removeAttribute("style")},u.style.display="none",e.replaceWith(n),r.select()},p.onclick=()=>{const e=t.createElement("div"),n=t.createElement("input");n.type="text",n.value=r.innerHTML,n.minLength=2,n.maxLength=30,n.spellcheck=!1,n.placeholder="Name",n.autocomplete="off",e.appendChild(n);const a=t.createElement("button");a.type="button",a.title="Save",a.className="tick",e.appendChild(a);const i=t.createElement("button");i.type="button",i.title="Cancel",i.className="cross",
e.appendChild(i),n.onblur=()=>{const e=n.value.trim();e.length>0&&(n.value=e)},a.onclick=()=>{const t=n.value.trim();t.length>30?o("Name cannot have more than 30 characters in length."):h(20,[G,t]).then((()=>{e.replaceWith(r),r.textContent=t,p.removeAttribute("style")})).catch((e=>{o("Failed to update name. Message: "+e)}))},i.onclick=()=>{e.replaceWith(r),p.removeAttribute("style")},p.style.display="none",r.replaceWith(e),n.select()},f.onclick=()=>{
const e=t.createElement("div"),n=t.createElement("input");n.type="email",n.value=a.innerHTML,n.minLength=6,n.maxLength=320,n.spellcheck=!1,n.placeholder="Email",n.autocomplete="off",e.appendChild(n);const r=t.createElement("button");r.type="button",r.title="Save",r.className="tick",e.appendChild(r);const i=t.createElement("button");i.type="button",i.title="Cancel",i.className="cross",e.appendChild(i),n.onblur=()=>{const e=n.value.trim().toLowerCase();e.length>0&&(n.value=e)},r.onclick=()=>{
const i=n.value.trim().toLowerCase();i.length<6||i.length>320||i.indexOf("@",1)<0?o("Please provide a valid email address."):h(19,[G,i]).then((()=>{{const n=t.createElement("div");n.textContent="Please check your inbox and fill in the 6-digit verification code below to verify your email address.",e.prepend(n)}n.type="text",n.value="",n.minLength=6,n.maxLength=6,n.placeholder="6-digit verification code",n.onblur=()=>{const e=n.value.trim();e.length>0&&(n.value=e)},r.onclick=()=>{
const t=n.value.trim();6===t.length&&/^\d+$/.test(t)?h(18,[G,t]).then((()=>{e.replaceWith(a),a.textContent=i,f.removeAttribute("style")})).catch((e=>{o("Failed to verify your email. Message: "+e)})):o("The code provided must have exactly 6 digits.")}})).catch((e=>{o("Failed to update your email address. Message: "+e)}))},i.onclick=()=>{e.replaceWith(a),f.removeAttribute("style")},f.style.display="none",a.replaceWith(e),n.select()},m.onclick=()=>{const e=t.createElement("div");{
const n=t.createElement("div");n.setAttribute("style","position:relative;display:block;width:fit-content;height:fit-content;margin:10px 0px;padding:5px;line-height:18px;"),n.innerHTML="Notice: If your account was created with your Google account and does not have a password, set the current password field to 'CHANGEME!'. After changing your password, previously logged-in sessions will still have access to your account. To revoke the access, click the 'logout all sessions' button down below.",
e.appendChild(n)}const n=t.createElement("input");n.type="password",n.minLength=8,n.maxLength=30,n.spellcheck=!1,n.placeholder="Current password",n.autocomplete="off",e.appendChild(n);const r=t.createElement("input");r.type="password",r.minLength=8,r.maxLength=30,r.spellcheck=!1,r.placeholder="New password",r.autocomplete="off",e.appendChild(r);const a=t.createElement("input");a.type="password",a.minLength=8,a.maxLength=30,a.spellcheck=!1,a.placeholder="Confirm password",a.autocomplete="off",
e.appendChild(a);const i=t.createElement("button");i.type="button",i.title="Change",i.className="tick",e.appendChild(i);const s=t.createElement("button");s.type="button",s.title="Cancel",s.className="cross",e.appendChild(s),i.onclick=()=>{const t=n.value;if(t.length<8||t.length>30)return void o("The current password must have 8 to 30 characters.");const i=r.value;i.length<8||i.length>30?o("The new password must have 8 to 30 characters."):t!==i?i===a.value?h(9,[G,t,i]).then((()=>{e.replaceWith(m)
})).catch((e=>{o("Failed to change password. Message: "+e)})):o("The confirm password does not match the new password."):o("The new password must be different from the current password.")},s.onclick=()=>{e.replaceWith(m)},m.replaceWith(e)},y.onclick=()=>{h(43,G).then((e=>{"string"==typeof e&&2048===e.length?(Y.send(oa.UTF_8.encode("\x01"+(G=e))),V.setItem("__secrets_",e),y.disabled=!0):o("Error: Remote returned invalid token.")})).catch((e=>{o("Failed to revoke login tokens. Message: "+e)}))},
v.onclick=()=>{const e=t.createElement("div");if(v.hasAttribute("data-enabled")){const n=t.createElement("input");n.type="text",n.minLength=6,n.maxLength=6,n.spellcheck=!1,n.placeholder="6-digit verification code",n.autocomplete="off",e.appendChild(n);const r=t.createElement("button");r.type="button",r.title="Change",r.className="tick",e.appendChild(r),r.onclick=()=>{const t=n.value.trim();6===t.length&&/^\d+$/.test(t)?h(46,[G,t]).then((()=>{V.setItem("__?2fa","0"),e.replaceWith(v),
v.removeAttribute("data-enabled"),v.textContent="Enable Two-Factor"})).catch((e=>{o("Failed to enable two-factor authentication. Message: "+e)})):o("The code provided must have exactly 6 digits.")}}else{{const n=t.createElement("div");n.setAttribute("style","position:relative;display:block;width:fit-content;height:fit-content;margin:15px 0px;line-height:18px;white-space:pre-wrap;"),
n.innerHTML='In order to enable two-factor authentication (2FA), please follow the steps below:\n1. Install an <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2" target="_blank" rel="noopener">authenticator app</a> if you don\'t have one already.\n2. Scan the QR code below or manually input the secret to save your account onto the authenticator.\n3. Input the 6-digit verification code generated below to verify.\n\nAfter enabling 2FA, you will be required to input the generated 6-digit verification code everytime as you login for enhanced account security.\n\nTo avoid being locked out, save the secret or a screenshot of the QR code across multiple devices, so that it could be restored back into the authenticator in case you lost your data.',
e.appendChild(n)}const n=oa.Base32.encode(crypto.getRandomValues(new Uint8Array(new ArrayBuffer(32),0,32)));{const r=t.createElement("img");r.alt="QR Code",r.width=147,r.height=147,r.loading="eager",r.decoding="sync",r.draggable=!1,r.src=qa("otpauth://totp/NettleWeb:"+A+"?secret="+n+"&issuer=NettleWeb&algorithm=SHA1").toDataURL({type:"image/png",scale:3}),e.appendChild(r)}{const r=t.createElement("div")
;r.setAttribute("style","position:relative;display:block;width:fit-content;height:fit-content;margin:15px 0px;line-height:18px;"),r.textContent="Secret: "+n,e.appendChild(r)}const r=t.createElement("input");r.type="text",r.minLength=6,r.maxLength=6,r.spellcheck=!1,r.placeholder="6-digit verification code",r.autocomplete="off",e.appendChild(r);const a=t.createElement("button");a.type="button",a.title="Change",a.className="tick",e.appendChild(a),a.onclick=()=>{const t=r.value.trim()
;6===t.length&&/^\d+$/.test(t)?h(44,[G,n,t]).then((()=>{V.setItem("__?2fa","1"),e.replaceWith(v),v.setAttribute("data-enabled",""),v.textContent="Disable Two-Factor"})).catch((e=>{o("Failed to enable two-factor authentication. Message: "+e)})):o("The code provided must have exactly 6 digits.")}}const n=t.createElement("button");n.type="button",n.title="Cancel",n.className="cross",e.appendChild(n),n.onclick=()=>{e.replaceWith(v)},v.replaceWith(e)},n("so").onclick=()=>{V.removeItem("__secrets_"),
setTimeout((()=>E.reload()),200)},n("da").onclick=()=>{o("Error: Operation not permitted.")},n("account-settings").style.display="block"}}if(null!=G){const oi=await new Promise((e=>{le=()=>{le=de=null,e(null)},de=t=>{le=de=null,e(t)},Y.send(oa.UTF_8.encode("\x01"+G))}));if(null==oi)return void await Ya();o("Failed to validate login token. Please login again. Message: "+oi),G=null}const Ka=n("login-dialog");let Xa,Qa,Za;function $a(){Ka.style.display="none",Ka.innerHTML="";{
const e=t.createElement("h3");e.textContent="Login",Ka.appendChild(e)}const e=t.createElement("input");e.type="text",e.value=Qa||"",e.required=!0,e.minLength=4,e.maxLength=320,e.spellcheck=!1,e.placeholder="Username/Email",e.autocomplete="off",Ka.appendChild(e);const n=t.createElement("input");n.type="password",n.value=Za||"",n.required=!0,n.minLength=8,n.maxLength=30,n.spellcheck=!1,n.placeholder="Password",n.autocomplete="off",Ka.appendChild(n);const r=t.createElement("button")
;r.type="button",r.className="pri-button",r.textContent="Login",Ka.appendChild(r);const a=t.createElement("div");a.tabIndex=0,a.textContent="Register",Ka.appendChild(a);const i=t.createElement("div");i.tabIndex=0,i.textContent="Forgot password",Ka.appendChild(i);const s=t.createElement("div");s.tabIndex=0,s.textContent="Sign in with Google",Ka.appendChild(s),e.onblur=()=>{const t=e.value.trim().toLowerCase();t.length>0&&(Qa=e.value=t)},n.onblur=()=>{const e=n.value;e.length>0&&(Za=e)},
r.onclick=()=>{const t=Qa=e.value.trim().toLowerCase();if(t.indexOf("@",1)<0){if(t.length<4||t.length>20)return void o("Username must be between 4 and 20 characters long.");if(!/^[\-a-z0-9]+$/.test(t))return void o("Username must contain only hyphens, 0-9, lowercase a-z.")}else if(t.length<6||t.length>320)return void o("Invalid email address. (Usernames should not contain a '@' symbol)");const r=Za=n.value
;r.length<8||r.length>30?o("Password must be between 8 and 30 characters long."):h(10,[t,r]).then((e=>{"string"==typeof e?ni(e):o("Error: Remote returned invalid token data.")})).catch((e=>{o("Failed to retrieve login token. Message: "+e)}))},a.onclick=ei,i.onclick=ti,s.onclick=ri,Ka.style.display="block"}function ei(){Ka.style.display="none",Ka.innerHTML="";{const e=t.createElement("h3");e.textContent="Register",Ka.appendChild(e)}const e=t.createElement("input");e.type="text",e.value=Qa||"",
e.required=!0,e.minLength=4,e.maxLength=20,e.spellcheck=!1,e.placeholder="Username",e.autocomplete="off",Ka.appendChild(e);const n=t.createElement("input");n.type="email",n.value=Xa||"",n.required=!0,n.minLength=6,n.maxLength=320,n.spellcheck=!1,n.placeholder="Email",n.autocomplete="off",Ka.appendChild(n);const r=t.createElement("input");r.type="password",r.value=Za||"",r.required=!0,r.minLength=8,r.maxLength=30,r.spellcheck=!1,r.placeholder="Password",r.autocomplete="off",Ka.appendChild(r)
;const a=t.createElement("input");a.type="password",a.value="",a.required=!0,a.minLength=8,a.maxLength=30,a.spellcheck=!1,a.placeholder="Confirm password",a.autocomplete="off",Ka.appendChild(a);const i=t.createElement("button");i.type="button",i.className="pri-button",i.textContent="Register",Ka.appendChild(i);const s=t.createElement("div");s.tabIndex=0,s.textContent="Login",Ka.appendChild(s);const c=t.createElement("div");c.tabIndex=0,c.textContent="Sign in with Google",Ka.appendChild(c),
e.onblur=()=>{const t=e.value.trim().toLowerCase();t.length>0&&(Qa=e.value=t)},n.onblur=()=>{const e=n.value.trim().toLowerCase();e.length>0&&(Xa=n.value=e)},r.onblur=()=>{const e=r.value;e.length>0&&(Za=e)},i.onclick=()=>{const i=Qa=e.value.trim().toLowerCase();if(i.length<4||i.length>20)return void o("The username must be between 4 and 20 characters long.");if(!/^[\-a-z0-9]+$/.test(i))return void o("The username must contain only hyphens, lowercase a-z and 0-9.")
;const s=Xa=n.value.trim().toLowerCase();if(s.length<6||s.length>320||s.indexOf("@",1)<0)return void o("Please provide a valid email.");const l=Za=r.value;l.length<8||l.length>30?o("The password must be between 8 and 30 characters long."):l===a.value?h(11,[i,l,s]).then((()=>{Ka.style.display="none",Ka.innerHTML="";{const e=t.createElement("h3");e.textContent="Verify Email",Ka.appendChild(e)}{const e=t.createElement("span")
;e.textContent="Please check your inbox and fill in the 6-digit verification code below to verify your email address.",Ka.appendChild(e)}const e=t.createElement("input");e.type="text",e.value="",e.required=!0,e.minLength=6,e.maxLength=6,e.spellcheck=!1,e.placeholder="6-digit verification code",e.autocomplete="off",Ka.appendChild(e);const n=t.createElement("button");n.type="button",n.className="pri-button",n.textContent="Verify",Ka.appendChild(n);{const e=t.createElement("span")
;e.textContent="Notice: If you are using a managed email address (ie. school or work) and did not receive a code in your inbox after several attempts, the code is likely to be blocked by your administrator. In this case, using a personal account could help.",Ka.appendChild(e)}Ka.appendChild(c),e.onblur=()=>{const t=e.value.trim();t.length>0&&(e.value=t)},n.onclick=()=>{const t=e.value.trim();6===t.length&&/^\d+$/.test(t)?h(17,[i,t]).then((e=>{
"string"==typeof e&&2048===e.length?(Y.send(oa.UTF_8.encode("\x01"+(G=e))),V.setItem("__secrets_",e),Ya()):o("Error: Remote returned invalid token data.")})).catch((e=>{o("Failed to verify your email address. Message: "+e)})):o("The code provided must have exactly 6 digits.")},Ka.style.display="block"})).catch((e=>{o("Failed to send request. Message: "+e)})):o("The confirm password does not match.")},s.onclick=$a,c.onclick=ri,Ka.style.display="block"}function ti(){Ka.style.display="none",
Ka.innerHTML="";{const e=t.createElement("h3");e.textContent="Reset Password",Ka.appendChild(e)}const e=t.createElement("input");e.type="email",e.value=Xa||"",e.required=!0,e.minLength=6,e.maxLength=320,e.spellcheck=!1,e.placeholder="Email",e.autocomplete="off",Ka.appendChild(e);const n=t.createElement("button");n.type="button",n.className="pri-button",n.textContent="Continue",Ka.appendChild(n);const r=t.createElement("div");r.tabIndex=0,r.textContent="Login",Ka.appendChild(r)
;const a=t.createElement("div");a.tabIndex=0,a.textContent="Register",Ka.appendChild(a);const i=t.createElement("div");i.tabIndex=0,i.textContent="Sign in with Google",Ka.appendChild(i),e.onblur=()=>{const t=e.value.trim().toLowerCase();t.length>0&&(Xa=e.value=t)},n.onclick=()=>{const n=Xa=e.value.trim().toLowerCase();n.length<6||n.length>320||n.indexOf("@",1)<0?o("Please provide a valid email."):h(21,n).then((()=>{Ka.style.display="none",Ka.innerHTML="";{const e=t.createElement("h3")
;e.textContent="Reset Password",Ka.appendChild(e)}{const e=t.createElement("span");e.textContent="Please check your inbox and follow the instructions on the email.",Ka.appendChild(e)}Ka.appendChild(r),Ka.appendChild(a),Ka.appendChild(i),Ka.style.display="block"})).catch((e=>{o("Failed to send request. Message: "+e)}))},r.onclick=$a,a.onclick=ei,i.onclick=ri,Ka.style.display="block"}function ni(e){if(2048===e.length)return Y.send(oa.UTF_8.encode("\x01"+(G=e))),V.setItem("__secrets_",e),
V.setItem("__?2fa","0"),void Ya();Ka.style.display="none",Ka.innerHTML="";{const e=t.createElement("h3");e.textContent="Two-Factor Authentication",Ka.appendChild(e)}{const e=t.createElement("span");e.textContent="Please open your authenticator app and fill in the generated 6-digit verification code below.",Ka.appendChild(e)}const n=t.createElement("input");n.type="text",n.value="",n.minLength=6,n.maxLength=6,n.spellcheck=!1,n.placeholder="6-digit verification code",n.autocomplete="off",
Ka.appendChild(n);const r=t.createElement("button");r.type="button",r.className="pri-button",r.textContent="Verify",Ka.appendChild(r),n.onblur=()=>{const e=n.value.trim();e.length>0&&(n.value=e)},r.onclick=()=>{const t=n.value.trim();6===t.length&&/^\d+$/.test(t)?h(45,[e,t]).then((e=>{"string"==typeof e&&2048===e.length?(Y.send(oa.UTF_8.encode("\x01"+(G=e))),V.setItem("__secrets_",e),V.setItem("__?2fa","1"),Ya()):o("Error: Remote returned invalid token data.")})).catch((e=>{
o("Failed to login with OTP. Message: "+e)})):o("The code provided must have exactly 6 digits.")},Ka.style.display="block"}function ri(){const t=new URL("https://accounts.google.com/o/oauth2/v2/auth");{const n=t.searchParams;n.set("client_id","176227430389-qkdboctmfhe9jnvnk2vmarafc5p8amuf.apps.googleusercontent.com"),n.set("redirect_uri",e.origin+"/auth.html"),n.set("response_type","token"),n.set("state","12"),n.set("scope","email profile"),n.set("include_granted_scopes","true"),
n.set("enable_granular_consent","true")}E.replace(t)}{const ai=V.getItem("_cre_")||"";if(ai.length>0){try{const ii=await h(0,ai);if("string"!=typeof ii)return void o("Error: Remote returned invalid token data.");F.click(),ni(ii)}catch(si){o("Failed to retrieve login token. Message: "+si)}V.removeItem("_cre_")}else $a()}}})(window)})();